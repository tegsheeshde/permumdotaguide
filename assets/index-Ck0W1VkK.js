var e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var t=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function te(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ne(e,t){return te(e.type,t,e.props)}function re(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ie(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var ae=/\/+/g;function oe(e,t){return typeof e==`object`&&e&&e.key!=null?ie(``+e.key):t.toString(36)}function se(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ce(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ce(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+oe(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(ae,`$&/`)+`/`),ce(o,r,i,``,function(e){return e})):o!=null&&(re(o)&&(o=ne(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(ae,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+oe(a,u),c+=ce(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+oe(a,u++),c+=ce(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ce(se(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function le(e,t,n){if(e==null)return e;var r=[],i=0;return ce(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ue(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var T=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},E={map:le,forEach:function(e,t,n){le(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return le(e,function(){t++}),t},toArray:function(e){return le(e,function(e){return e})||[]},only:function(e){if(!re(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=E,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ee.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return te(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ee.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return te(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=re,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ue}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,T)}catch(e){T(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.0`})),n=e(((e,n)=>{n.exports=t()})),r=e((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,re());else{var t=n(l);t!==null&&oe(x,t.startTime-e)}}var S=!1,C=-1,w=5,ee=-1;function te(){return g?!0:!(e.unstable_now()-ee<w)}function ne(){if(g=!1,S){var t=e.unstable_now();ee=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&te());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&oe(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?re():S=!1}}}var re;if(typeof y==`function`)re=function(){y(ne)};else if(typeof MessageChannel<`u`){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=ne,re=function(){ae.postMessage(null)}}else re=function(){_(ne,0)};function oe(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,oe(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,re()))),r},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),i=e(((e,t)=>{t.exports=r()})),a=e((e=>{var t=n();function r(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for(`react.portal`);function s(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,e.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(r(299));return s(e,t,null,n)},e.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,a.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&a.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin),i=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?a.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):n===`script`&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??a.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else a.d.m(e)},e.requestFormReset=function(e){a.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},e.useFormStatus=function(){return c.H.useHostTransitionStatus()},e.version=`19.2.0`})),o=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=a()})),s=e((e=>{var t=i(),r=n(),a=o();function s(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(l(e)!==e)throw Error(s(188))}function p(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t===e?e:null}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return f(i),e;if(a===r)return f(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),ee=Symbol.for(`react.suspense`),te=Symbol.for(`react.suspense_list`),ne=Symbol.for(`react.memo`),re=Symbol.for(`react.lazy`),ie=Symbol.for(`react.activity`),ae=Symbol.for(`react.memo_cache_sentinel`),oe=Symbol.iterator;function se(e){return typeof e!=`object`||!e?null:(e=oe&&e[oe]||e[`@@iterator`],typeof e==`function`?e:null)}var ce=Symbol.for(`react.client.reference`);function le(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ce?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ee:return`Suspense`;case te:return`SuspenseList`;case ie:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ne:return t=e.displayName||null,t===null?le(e.type)||`Memo`:t;case re:t=e._payload,e=e._init;try{return le(e(t))}catch{}}return null}var ue=Array.isArray,T=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},fe=[],pe=-1;function me(e){return{current:e}}function he(e){0>pe||(e.current=fe[pe],fe[pe]=null,pe--)}function ge(e,t){pe++,fe[pe]=e.current,e.current=t}var _e=me(null),ve=me(null),ye=me(null),be=me(null);function xe(e,t){switch(ge(ye,t),ge(ve,e),ge(_e,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?qd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=qd(t),e=Jd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}he(_e),ge(_e,e)}function Se(){he(_e),he(ve),he(ye)}function Ce(e){e.memoizedState!==null&&ge(be,e);var t=_e.current,n=Jd(t,e.type);t!==n&&(ge(ve,e),ge(_e,n))}function we(e){ve.current===e&&(he(_e),he(ve)),be.current===e&&(he(be),ip._currentValue=de)}var Te,Ee;function De(e){if(Te===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Te=t&&t[1]||``,Ee=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Te+e+Ee}var Oe=!1;function ke(e,t){if(!e||Oe)return``;Oe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{Oe=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?De(n):``}function Ae(e,t){switch(e.tag){case 26:case 27:case 5:return De(e.type);case 16:return De(`Lazy`);case 13:return e.child!==t&&t!==null?De(`Suspense Fallback`):De(`Suspense`);case 19:return De(`SuspenseList`);case 0:case 15:return ke(e.type,!1);case 11:return ke(e.type.render,!1);case 1:return ke(e.type,!0);case 31:return De(`Activity`);default:return``}}function je(e){try{var t=``,n=null;do t+=Ae(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Me=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,Pe=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,Ie=t.unstable_requestPaint,Le=t.unstable_now,Re=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,Be=t.unstable_UserBlockingPriority,Ve=t.unstable_NormalPriority,He=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,We=t.log,Ge=t.unstable_setDisableYieldValue,Ke=null,qe=null;function Je(e){if(typeof We==`function`&&Ge(e),qe&&typeof qe.setStrictMode==`function`)try{qe.setStrictMode(Ke,e)}catch{}}var Ye=Math.clz32?Math.clz32:Qe,Xe=Math.log,Ze=Math.LN2;function Qe(e){return e>>>=0,e===0?32:31-(Xe(e)/Ze|0)|0}var $e=256,et=262144,tt=4194304;function nt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=nt(n))):i=nt(o):i=nt(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=nt(n))):i=nt(o)):i=nt(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function D(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function it(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function at(){var e=tt;return tt<<=1,!(tt&62914560)&&(tt=4194304),e}function ot(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function st(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ct(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ye(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&lt(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function lt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ye(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function ut(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function dt(e,t){var n=t&-t;return n=n&42?1:ft(n),(n&(e.suspendedLanes|t))===0?n:0}function ft(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function mt(){var e=E.p;return e===0?(e=window.event,e===void 0?32:bp(e.type)):e}function ht(e,t){var n=E.p;try{return E.p=e,t()}finally{E.p=n}}var gt=Math.random().toString(36).slice(2),_t=`__reactFiber$`+gt,vt=`__reactProps$`+gt,yt=`__reactContainer$`+gt,bt=`__reactEvents$`+gt,xt=`__reactListeners$`+gt,St=`__reactHandles$`+gt,Ct=`__reactResources$`+gt,wt=`__reactMarker$`+gt;function Tt(e){delete e[_t],delete e[vt],delete e[bt],delete e[xt],delete e[St]}function Et(e){var t=e[_t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yt]||n[_t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_f(e);e!==null;){if(n=e[_t])return n;e=_f(e)}return t}e=n,n=e.parentNode}return null}function Dt(e){if(e=e[_t]||e[yt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ot(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function kt(e){var t=e[Ct];return t||=e[Ct]={hoistableStyles:new Map,hoistableScripts:new Map},t}function At(e){e[wt]=!0}var jt=new Set,Mt={};function Nt(e,t){Pt(e,t),Pt(e+`Capture`,t)}function Pt(e,t){for(Mt[e]=t,e=0;e<t.length;e++)jt.add(t[e])}var Ft=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),It={},Lt={};function Rt(e){return Me.call(Lt,e)?!0:Me.call(It,e)?!1:Ft.test(e)?Lt[e]=!0:(It[e]=!0,!1)}function zt(e,t,n){if(Rt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Bt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Vt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function O(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ht(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ut(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wt(e){if(!e._valueTracker){var t=Ht(e)?`checked`:`value`;e._valueTracker=Ut(e,t,``+e[t])}}function Gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ht(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Kt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var qt=/[\n"\\]/g;function Jt(e){return e.replace(qt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Yt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+O(t)):e.value!==``+O(t)&&(e.value=``+O(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Zt(e,o,O(n)):Zt(e,o,O(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+O(s):e.removeAttribute(`name`)}function Xt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Wt(e);return}n=n==null?``:``+O(n),t=t==null?n:``+O(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Wt(e)}function Zt(e,t,n){t===`number`&&Kt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Qt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+O(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $t(e,t,n){if(t!=null&&(t=``+O(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+O(n)}function en(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(s(92));if(ue(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}n??=``,t=n}n=O(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Wt(e)}function tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var nn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function rn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||nn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function an(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(s(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&rn(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&rn(e,a,t[a])}function on(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var sn=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),cn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ln(e){return cn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function un(){}var dn=null;function fn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pn=null,mn=null;function hn(e){var t=Dt(e);if(t&&(e=t.stateNode)){var n=e[vt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Jt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[vt]||null;if(!i)throw Error(s(90));Yt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Gt(r)}break a;case`textarea`:$t(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Qt(e,!!n.multiple,t,!1)}}}var gn=!1;function _n(e,t,n){if(gn)return e(t,n);gn=!0;try{return e(t)}finally{if(gn=!1,(pn!==null||mn!==null)&&(wu(),pn&&(t=pn,e=mn,mn=pn=null,hn(t),e)))for(t=0;t<e.length;t++)hn(e[t])}}function vn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[vt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(s(231,t,typeof n));return n}var yn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),bn=!1;if(yn)try{var xn={};Object.defineProperty(xn,`passive`,{get:function(){bn=!0}}),window.addEventListener(`test`,xn,xn),window.removeEventListener(`test`,xn,xn)}catch{bn=!1}var Sn=null,Cn=null,wn=null;function Tn(){if(wn)return wn;var e,t=Cn,n=t.length,r,i=`value`in Sn?Sn.value:Sn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return wn=i.slice(e,1<r?1-r:void 0)}function En(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dn(){return!0}function On(){return!1}function kn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?Dn:On,this.isPropagationStopped=On,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=Dn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=Dn)},persist:function(){},isPersistent:Dn}),t}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jn=kn(An),Mn=h({},An,{view:0,detail:0}),Nn=kn(Mn),Pn,Fn,In,Ln=h({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==In&&(In&&e.type===`mousemove`?(Pn=e.screenX-In.screenX,Fn=e.screenY-In.screenY):Fn=Pn=0,In=e),Pn)},movementY:function(e){return`movementY`in e?e.movementY:Fn}}),Rn=kn(Ln),zn=kn(h({},Ln,{dataTransfer:0})),Bn=kn(h({},Mn,{relatedTarget:0})),Vn=kn(h({},An,{animationName:0,elapsedTime:0,pseudoElement:0})),Hn=kn(h({},An,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Un=kn(h({},An,{data:0})),Wn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Gn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Kn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function qn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kn[e])?!!t[e]:!1}function Jn(){return qn}var Yn=kn(h({},Mn,{key:function(e){if(e.key){var t=Wn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=En(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Gn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(e){return e.type===`keypress`?En(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?En(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Xn=kn(h({},Ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Zn=kn(h({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn})),Qn=kn(h({},An,{propertyName:0,elapsedTime:0,pseudoElement:0})),$n=kn(h({},Ln,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),er=kn(h({},An,{newState:0,oldState:0})),tr=[9,13,27,32],nr=yn&&`CompositionEvent`in window,rr=null;yn&&`documentMode`in document&&(rr=document.documentMode);var ir=yn&&`TextEvent`in window&&!rr,ar=yn&&(!nr||rr&&8<rr&&11>=rr),or=` `,sr=!1;function cr(e,t){switch(e){case`keyup`:return tr.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function lr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var ur=!1;function dr(e,t){switch(e){case`compositionend`:return lr(t);case`keypress`:return t.which===32?(sr=!0,or):null;case`textInput`:return e=t.data,e===or&&sr?null:e;default:return null}}function fr(e,t){if(ur)return e===`compositionend`||!nr&&cr(e,t)?(e=Tn(),wn=Cn=Sn=null,ur=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return ar&&t.locale!==`ko`?null:t.data;default:return null}}var pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!pr[e.type]:t===`textarea`}function hr(e,t,n,r){pn?mn?mn.push(r):mn=[r]:pn=r,t=jd(t,`onChange`),0<t.length&&(n=new jn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var gr=null,_r=null;function vr(e){wd(e,0)}function yr(e){if(Gt(Ot(e)))return e}function br(e,t){if(e===`change`)return t}var xr=!1;if(yn){var Sr;if(yn){var Cr=`oninput`in document;if(!Cr){var wr=document.createElement(`div`);wr.setAttribute(`oninput`,`return;`),Cr=typeof wr.oninput==`function`}Sr=Cr}else Sr=!1;xr=Sr&&(!document.documentMode||9<document.documentMode)}function Tr(){gr&&(gr.detachEvent(`onpropertychange`,Er),_r=gr=null)}function Er(e){if(e.propertyName===`value`&&yr(_r)){var t=[];hr(t,_r,e,fn(e)),_n(vr,t)}}function Dr(e,t,n){e===`focusin`?(Tr(),gr=t,_r=n,gr.attachEvent(`onpropertychange`,Er)):e===`focusout`&&Tr()}function Or(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return yr(_r)}function kr(e,t){if(e===`click`)return yr(t)}function Ar(e,t){if(e===`input`||e===`change`)return yr(t)}function jr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Mr=typeof Object.is==`function`?Object.is:jr;function Nr(e,t){if(Mr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Me.call(t,i)||!Mr(e[i],t[i]))return!1}return!0}function Pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fr(e,t){var n=Pr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Pr(n)}}function Ir(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ir(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Kt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kt(e.document)}return t}function Rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var zr=yn&&`documentMode`in document&&11>=document.documentMode,Br=null,Vr=null,Hr=null,Ur=!1;function Wr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ur||Br==null||Br!==Kt(r)||(r=Br,`selectionStart`in r&&Rr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hr&&Nr(Hr,r)||(Hr=r,r=jd(Vr,`onSelect`),0<r.length&&(t=new jn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Br)))}function Gr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Kr={animationend:Gr(`Animation`,`AnimationEnd`),animationiteration:Gr(`Animation`,`AnimationIteration`),animationstart:Gr(`Animation`,`AnimationStart`),transitionrun:Gr(`Transition`,`TransitionRun`),transitionstart:Gr(`Transition`,`TransitionStart`),transitioncancel:Gr(`Transition`,`TransitionCancel`),transitionend:Gr(`Transition`,`TransitionEnd`)},qr={},Jr={};yn&&(Jr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),`TransitionEvent`in window||delete Kr.transitionend.transition);function Yr(e){if(qr[e])return qr[e];if(!Kr[e])return e;var t=Kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Jr)return qr[e]=t[n];return e}var Xr=Yr(`animationend`),Zr=Yr(`animationiteration`),Qr=Yr(`animationstart`),$r=Yr(`transitionrun`),ei=Yr(`transitionstart`),ti=Yr(`transitioncancel`),ni=Yr(`transitionend`),ri=new Map,ii=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ii.push(`scrollEnd`);function ai(e,t){ri.set(e,t),Nt(t,[e])}var oi=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},si=[],ci=0,li=0;function ui(){for(var e=ci,t=li=ci=0;t<e;){var n=si[t];si[t++]=null;var r=si[t];si[t++]=null;var i=si[t];si[t++]=null;var a=si[t];if(si[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&mi(n,i,a)}}function di(e,t,n,r){si[ci++]=e,si[ci++]=t,si[ci++]=n,si[ci++]=r,li|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function fi(e,t,n,r){return di(e,t,n,r),hi(e)}function pi(e,t){return di(e,null,null,t),hi(e)}function mi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ye(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function hi(e){if(50<hu)throw hu=0,gu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var gi={};function _i(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(e,t,n,r){return new _i(e,t,n,r)}function yi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bi(e,t){var n=e.alternate;return n===null?(n=vi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function xi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Si(e,t,n,r,i,a){var o=0;if(r=e,typeof e==`function`)yi(e)&&(o=1);else if(typeof e==`string`)o=Yf(e,n,_e.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ie:return e=vi(31,n,t,i),e.elementType=ie,e.lanes=a,e;case y:return Ci(n.children,i,a,t);case b:o=8,i|=24;break;case x:return e=vi(12,n,t,i|2),e.elementType=x,e.lanes=a,e;case ee:return e=vi(13,n,t,i),e.elementType=ee,e.lanes=a,e;case te:return e=vi(19,n,t,i),e.elementType=te,e.lanes=a,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:o=10;break a;case S:o=9;break a;case w:o=11;break a;case ne:o=14;break a;case re:o=16,r=null;break a}o=29,n=Error(s(130,e===null?`null`:typeof e,``)),r=null}return t=vi(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ci(e,t,n,r){return e=vi(7,e,r,t),e.lanes=n,e}function wi(e,t,n){return e=vi(6,e,null,t),e.lanes=n,e}function Ti(e){var t=vi(18,null,null,0);return t.stateNode=e,t}function Ei(e,t,n){return t=vi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Di=new WeakMap;function Oi(e,t){if(typeof e==`object`&&e){var n=Di.get(e);return n===void 0?(t={value:e,source:t,stack:je(t)},Di.set(e,t),t):n}return{value:e,source:t,stack:je(t)}}var ki=[],Ai=0,ji=null,Mi=0,Ni=[],Pi=0,Fi=null,Ii=1,Li=``;function Ri(e,t){ki[Ai++]=Mi,ki[Ai++]=ji,ji=e,Mi=t}function zi(e,t,n){Ni[Pi++]=Ii,Ni[Pi++]=Li,Ni[Pi++]=Fi,Fi=e;var r=Ii;e=Li;var i=32-Ye(r)-1;r&=~(1<<i),n+=1;var a=32-Ye(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ii=1<<32-Ye(t)+i|n<<i|r,Li=a+e}else Ii=1<<a|n<<i|r,Li=e}function Bi(e){e.return!==null&&(Ri(e,1),zi(e,1,0))}function Vi(e){for(;e===ji;)ji=ki[--Ai],ki[Ai]=null,Mi=ki[--Ai],ki[Ai]=null;for(;e===Fi;)Fi=Ni[--Pi],Ni[Pi]=null,Li=Ni[--Pi],Ni[Pi]=null,Ii=Ni[--Pi],Ni[Pi]=null}function Hi(e,t){Ni[Pi++]=Ii,Ni[Pi++]=Li,Ni[Pi++]=Fi,Ii=t.id,Li=t.overflow,Fi=e}var Ui=null,Wi=null,k=!1,Gi=null,Ki=!1,qi=Error(s(519));function Ji(e){throw ea(Oi(Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),qi}function Yi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[_t]=e,t[vt]=r,n){case`dialog`:q(`cancel`,t),q(`close`,t);break;case`iframe`:case`object`:case`embed`:q(`load`,t);break;case`video`:case`audio`:for(n=0;n<Sd.length;n++)q(Sd[n],t);break;case`source`:q(`error`,t);break;case`img`:case`image`:case`link`:q(`error`,t),q(`load`,t);break;case`details`:q(`toggle`,t);break;case`input`:q(`invalid`,t),Xt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:q(`invalid`,t);break;case`textarea`:q(`invalid`,t),en(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Ld(t.textContent,n)?(r.popover!=null&&(q(`beforetoggle`,t),q(`toggle`,t)),r.onScroll!=null&&q(`scroll`,t),r.onScrollEnd!=null&&q(`scrollend`,t),r.onClick!=null&&(t.onclick=un),t=!0):t=!1,t||Ji(e,!0)}function Xi(e){for(Ui=e.return;Ui;)switch(Ui.tag){case 5:case 31:case 13:Ki=!1;return;case 27:case 3:Ki=!0;return;default:Ui=Ui.return}}function Zi(e){if(e!==Ui)return!1;if(!k)return Xi(e),k=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Yd(e.type,e.memoizedProps)),n=!n),n&&Wi&&Ji(e),Xi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Wi=gf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Wi=gf(e)}else t===27?(t=Wi,rf(e.type)?(e=hf,hf=null,Wi=e):Wi=t):Wi=Ui?mf(e.stateNode.nextSibling):null;return!0}function Qi(){Wi=Ui=null,k=!1}function $i(){var e=Gi;return e!==null&&(tu===null?tu=e:tu.push.apply(tu,e),Gi=null),e}function ea(e){Gi===null?Gi=[e]:Gi.push(e)}var ta=me(null),na=null,ra=null;function ia(e,t,n){ge(ta,t._currentValue),t._currentValue=n}function aa(e){e._currentValue=ta.current,he(ta)}function oa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function sa(e,t,n,r){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){var o=i.child;a=a.firstContext;a:for(;a!==null;){var c=a;a=i;for(var l=0;l<t.length;l++)if(c.context===t[l]){a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),oa(a.return,n,e),r||(o=null);break a}a=c.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(s(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),oa(o,n,e),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function ca(e,t,n,r){e=null;for(var i=t,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(s(387));if(o=o.memoizedProps,o!==null){var c=i.type;Mr(i.pendingProps.value,o.value)||(e===null?e=[c]:e.push(c))}}else if(i===be.current){if(o=i.alternate,o===null)throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e===null?e=[ip]:e.push(ip))}i=i.return}e!==null&&sa(t,e,n,r),t.flags|=262144}function la(e){for(e=e.firstContext;e!==null;){if(!Mr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ua(e){na=e,ra=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function da(e){return pa(na,e)}function fa(e,t){return na===null&&ua(e),pa(e,t)}function pa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ra===null){if(e===null)throw Error(s(308));ra=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ra=ra.next=t;return n}var ma=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ha=t.unstable_scheduleCallback,ga=t.unstable_NormalPriority,_a={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function va(){return{controller:new ma,data:new Map,refCount:0}}function ya(e){e.refCount--,e.refCount===0&&ha(ga,function(){e.controller.abort()})}var ba=null,xa=0,Sa=0,A=null;function Ca(e,t){if(ba===null){var n=ba=[];xa=0,Sa=gd(),A={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return xa++,t.then(wa,wa),t}function wa(){if(--xa===0&&ba!==null){A!==null&&(A.status=`fulfilled`);var e=ba;ba=null,Sa=0,A=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ta(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var j=T.S;T.S=function(e,t){iu=Le(),typeof t==`object`&&t&&typeof t.then==`function`&&Ca(e,t),j!==null&&j(e,t)};var Ea=me(null);function Da(){var e=Ea.current;return e===null?Vl.pooledCache:e}function M(e,t){t===null?ge(Ea,Ea.current):ge(Ea,t.pool)}function N(){var e=Da();return e===null?null:{parent:_a._currentValue,pool:e}}var P=Error(s(460)),Oa=Error(s(474)),ka=Error(s(542)),Aa={then:function(){}};function ja(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ma(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(un,un),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ia(e),e;default:if(typeof t.status==`string`)t.then(un,un);else{if(e=Vl,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ia(e),e}throw Pa=t,P}}function Na(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Pa=e,P):e}}var Pa=null;function Fa(){if(Pa===null)throw Error(s(459));var e=Pa;return Pa=null,e}function Ia(e){if(e===P||e===ka)throw Error(s(483))}var La=null,Ra=0;function F(e){var t=Ra;return Ra+=1,La===null&&(La=[]),Ma(La,e,t)}function za(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ba(e,t){throw t.$$typeof===g?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Va(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function i(e,t){return e=bi(e,t),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function o(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=wi(n,e.mode,r),t.return=e,t):(t=i(t,n),t.return=e,t)}function l(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===a||typeof a==`object`&&a&&a.$$typeof===re&&Na(a)===t.type)?(t=i(t,n.props),za(t,n),t.return=e,t):(t=Si(n.type,n.key,n.props,null,e.mode,r),za(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Ei(n,e.mode,r),t.return=e,t):(t=i(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,a){return t===null||t.tag!==7?(t=Ci(n,e.mode,r,a),t.return=e,t):(t=i(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=wi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=Si(t.type,t.key,t.props,null,e.mode,n),za(n,t),n.return=e,n;case v:return t=Ei(t,e.mode,n),t.return=e,t;case re:return t=Na(t),f(e,t,n)}if(ue(t)||se(t))return t=Ci(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,F(t),n);if(t.$$typeof===C)return f(e,fa(e,t),n);Ba(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case re:return n=Na(n),p(e,t,n,r)}if(ue(n)||se(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,F(n),r);if(n.$$typeof===C)return p(e,t,fa(e,n),r);Ba(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case re:return r=Na(r),m(e,t,n,r,i)}if(ue(r)||se(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,F(r),i);if(r.$$typeof===C)return m(e,t,n,fa(t,r),i);Ba(t,r)}return null}function h(i,o,s,c){for(var l=null,u=null,d=o,h=o=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),o=a(_,o,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),k&&Ri(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(o=a(d,o,h),u===null?l=d:u.sibling=d,u=d);return k&&Ri(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),o=a(g,o,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),k&&Ri(i,h),l}function g(i,o,c,l){if(c==null)throw Error(s(151));for(var u=null,d=null,h=o,g=o=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(i,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(i,h),o=a(y,o,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(i,h),k&&Ri(i,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(i,v.value,l),v!==null&&(o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return k&&Ri(i,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,i,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(i,e)}),k&&Ri(i,g),u}function b(e,r,a,c){if(typeof a==`object`&&a&&a.type===y&&a.key===null&&(a=a.props.children),typeof a==`object`&&a){switch(a.$$typeof){case _:a:{for(var l=a.key;r!==null;){if(r.key===l){if(l=a.type,l===y){if(r.tag===7){n(e,r.sibling),c=i(r,a.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===re&&Na(l)===r.type){n(e,r.sibling),c=i(r,a.props),za(c,a),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}a.type===y?(c=Ci(a.props.children,e.mode,c,a.key),c.return=e,e=c):(c=Si(a.type,a.key,a.props,null,e.mode,c),za(c,a),c.return=e,e=c)}return o(e);case v:a:{for(l=a.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),c=i(r,a.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Ei(a,e.mode,c),c.return=e,e=c}return o(e);case re:return a=Na(a),b(e,r,a,c)}if(ue(a))return h(e,r,a,c);if(se(a)){if(l=se(a),typeof l!=`function`)throw Error(s(150));return a=l.call(a),g(e,r,a,c)}if(typeof a.then==`function`)return b(e,r,F(a),c);if(a.$$typeof===C)return b(e,r,fa(e,a),c);Ba(e,a)}return typeof a==`string`&&a!==``||typeof a==`number`||typeof a==`bigint`?(a=``+a,r!==null&&r.tag===6?(n(e,r.sibling),c=i(r,a),c.return=e,e=c):(n(e,r),c=wi(a,e.mode,c),c.return=e,e=c),o(e)):n(e,r)}return function(e,t,n,r){try{Ra=0;var i=b(e,t,n,r);return La=null,i}catch(t){if(t===P||t===ka)throw t;var a=vi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ha=Va(!0),Ua=Va(!1),Wa=!1;function Ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ka(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ja(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=hi(e),mi(e,null,n),t}return di(e,r,t,n),hi(e)}function I(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ut(e,n)}}function Ya(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Xa=!1;function Za(){if(Xa){var e=A;if(e!==null)throw e}}function Qa(e,t,n,r){Xa=!1;var i=e.updateQueue;Wa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(K&f)===f:(r&f)===f){f!==0&&f===Sa&&(Xa=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Wa=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Yl|=o,e.lanes=o,e.memoizedState=d}}function $a(e,t){if(typeof e!=`function`)throw Error(s(191,e));e.call(t)}function eo(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)$a(n[e],t)}var to=me(null),no=me(0);function ro(e,t){e=ql,ge(no,e),ge(to,t),ql=e|t.baseLanes}function io(){ge(no,ql),ge(to,to.current)}function ao(){ql=no.current,he(to),he(no)}var oo=me(null),so=null;function L(e){var t=e.alternate;ge(po,po.current&1),ge(oo,e),so===null&&(t===null||to.current!==null||t.memoizedState!==null)&&(so=e)}function co(e){ge(po,po.current),ge(oo,e),so===null&&(so=e)}function lo(e){e.tag===22?(ge(po,po.current),ge(oo,e),so===null&&(so=e)):uo(e)}function uo(){ge(po,po.current),ge(oo,oo.current)}function fo(e){he(oo),so===e&&(so=null),he(po)}var po=me(0);function mo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||df(n)||ff(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ho=0,R=null,z=null,B=null,go=!1,_o=!1,vo=!1,yo=0,bo=0,xo=null,So=0;function Co(){throw Error(s(321))}function wo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mr(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,a){return ho=a,R=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Vs:Hs,vo=!1,a=n(r,i),vo=!1,_o&&(a=Do(t,n,r,i)),Eo(e),a}function Eo(e){T.H=Bs;var t=z!==null&&z.next!==null;if(ho=0,B=z=R=null,go=!1,bo=0,xo=null,t)throw Error(s(300));e===null||ac||(e=e.dependencies,e!==null&&la(e)&&(ac=!0))}function Do(e,t,n,r){R=e;var i=0;do{if(_o&&(xo=null),bo=0,_o=!1,25<=i)throw Error(s(301));if(i+=1,B=z=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}T.H=Us,a=t(n,r)}while(_o);return a}function Oo(){var e=T.H,t=e.useState()[0];return t=typeof t.then==`function`?Po(t):t,e=e.useState()[0],(z===null?null:z.memoizedState)!==e&&(R.flags|=1024),t}function ko(){var e=yo!==0;return yo=0,e}function Ao(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function jo(e){if(go){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}go=!1}ho=0,B=z=R=null,_o=!1,bo=yo=0,xo=null}function Mo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return B===null?R.memoizedState=B=e:B=B.next=e,B}function V(){if(z===null){var e=R.alternate;e=e===null?null:e.memoizedState}else e=z.next;var t=B===null?R.memoizedState:B.next;if(t!==null)B=t,z=e;else{if(e===null)throw R.alternate===null?Error(s(467)):Error(s(310));z=e,e={memoizedState:z.memoizedState,baseState:z.baseState,baseQueue:z.baseQueue,queue:z.queue,next:null},B===null?R.memoizedState=B=e:B=B.next=e}return B}function No(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(e){var t=bo;return bo+=1,xo===null&&(xo=[]),e=Ma(xo,e,t),t=R,(B===null?t.memoizedState:B.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Vs:Hs),e}function Fo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Po(e);if(e.$$typeof===C)return da(e)}throw Error(s(438,String(e)))}function Io(e){var t=null,n=R.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=R.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=No(),R.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ae;return t.index++,n}function Lo(e,t){return typeof t==`function`?t(e):t}function Ro(e){return zo(V(),z,e)}function zo(e,t,n){var r=e.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,i===null)e.memoizedState=a;else{t=i.next;var c=o=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(ho&f)===f:(K&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Sa&&(d=!0);else if((ho&p)===p){u=u.next,p===Sa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,o=a):l=l.next=f,R.lanes|=p,Yl|=p;f=u.action,vo&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,o=a):l=l.next=p,R.lanes|=f,Yl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?o=a:l.next=c,!Mr(a,e.memoizedState)&&(ac=!0,d&&(n=A,n!==null)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Bo(e){var t=V(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Mr(a,t.memoizedState)||(ac=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Vo(e,t,n){var r=R,i=V(),a=k;if(a){if(n===void 0)throw Error(s(407));n=n()}else n=t();var o=!Mr((z||i).memoizedState,n);if(o&&(i.memoizedState=n,ac=!0),i=i.queue,fs(Wo.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||B!==null&&B.memoizedState.tag&1){if(r.flags|=2048,ss(9,{destroy:void 0},Uo.bind(null,r,i,n,t),null),Vl===null)throw Error(s(349));a||ho&127||Ho(r,t,n)}return n}function Ho(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=R.updateQueue,t===null?(t=No(),R.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Uo(e,t,n,r){t.value=n,t.getSnapshot=r,Go(t)&&Ko(e)}function Wo(e,t,n){return n(function(){Go(t)&&Ko(e)})}function Go(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mr(e,n)}catch{return!0}}function Ko(e){var t=pi(e,2);t!==null&&yu(t,e,2)}function qo(e){var t=Mo();if(typeof e==`function`){var n=e;if(e=n(),vo){Je(!0);try{n()}finally{Je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:e},t}function Jo(e,t,n,r){return e.baseState=n,zo(e,z,typeof r==`function`?r:Lo)}function Yo(e,t,n,r,i){if(Ls(e))throw Error(s(485));if(e=t.action,e!==null){var a={payload:i,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};T.T===null?a.isTransition=!1:n(!0),r(a),n=t.pending,n===null?(a.next=t.pending=a,Xo(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Xo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=T.T,o={};T.T=o;try{var s=n(i,r),c=T.S;c!==null&&c(o,s),Zo(e,t,s)}catch(n){$o(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),T.T=a}}else try{a=n(i,r),Zo(e,t,a)}catch(n){$o(e,t,n)}}function Zo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Qo(e,t,n)},function(n){return $o(e,t,n)}):Qo(e,t,n)}function Qo(e,t,n){t.status=`fulfilled`,t.value=n,es(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Xo(e,n)))}function $o(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,es(t),t=t.next;while(t!==r)}e.action=null}function es(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ts(e,t){return t}function ns(e,t){if(k){var n=Vl.formState;if(n!==null){a:{var r=R;if(k){if(Wi){b:{for(var i=Wi,a=Ki;i.nodeType!==8;){if(!a){i=null;break b}if(i=mf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Wi=mf(i.nextSibling),r=i.data===`F!`;break a}}Ji(r)}r=!1}r&&(t=n[0])}}return n=Mo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:t},n.queue=r,n=Ps.bind(null,R,r),r.dispatch=n,r=qo(!1),a=Is.bind(null,R,!1,r.queue),r=Mo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Yo.bind(null,R,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function rs(e){return is(V(),z,e)}function is(e,t,n){if(t=zo(e,t,ts)[0],e=Ro(Lo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Po(t)}catch(e){throw e===P?ka:e}else r=t;t=V();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(R.flags|=2048,ss(9,{destroy:void 0},as.bind(null,i,n),null)),[r,a,e]}function as(e,t){e.action=t}function os(e){var t=V(),n=z;if(n!==null)return is(t,n,e);V(),t=t.memoizedState,n=V();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ss(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=R.updateQueue,t===null&&(t=No(),R.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function cs(){return V().memoizedState}function ls(e,t,n,r){var i=Mo();R.flags|=e,i.memoizedState=ss(1|t,{destroy:void 0},n,r===void 0?null:r)}function us(e,t,n,r){var i=V();r=r===void 0?null:r;var a=i.memoizedState.inst;z!==null&&r!==null&&wo(r,z.memoizedState.deps)?i.memoizedState=ss(t,a,n,r):(R.flags|=e,i.memoizedState=ss(1|t,a,n,r))}function ds(e,t){ls(8390656,8,e,t)}function fs(e,t){us(2048,8,e,t)}function ps(e){R.flags|=4;var t=R.updateQueue;if(t===null)t=No(),R.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ms(e){var t=V().memoizedState;return ps({ref:t,nextImpl:e}),function(){if(W&2)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function hs(e,t){return us(4,2,e,t)}function gs(e,t){return us(4,4,e,t)}function _s(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vs(e,t,n){n=n==null?null:n.concat([e]),us(4,4,_s.bind(null,t,e),n)}function ys(){}function bs(e,t){var n=V();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xs(e,t){var n=V();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&wo(t,r[1]))return r[0];if(r=e(),vo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r}function Ss(e,t,n){return n===void 0||ho&1073741824&&!(K&261930)?e.memoizedState=t:(e.memoizedState=n,e=vu(),R.lanes|=e,Yl|=e,n)}function Cs(e,t,n,r){return Mr(n,t)?n:to.current===null?!(ho&42)||ho&1073741824&&!(K&261930)?(ac=!0,e.memoizedState=n):(e=vu(),R.lanes|=e,Yl|=e,t):(e=Ss(e,n,r),Mr(e,t)||(ac=!0),e)}function ws(e,t,n,r,i){var a=E.p;E.p=a!==0&&8>a?a:8;var o=T.T,s={};T.T=s,Is(e,!1,t,n);try{var c=i(),l=T.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Fs(e,t,Ta(c,r),_u(e)):Fs(e,t,r,_u(e))}catch(n){Fs(e,t,{then:function(){},status:`rejected`,reason:n},_u())}finally{E.p=a,o!==null&&s.types!==null&&(o.types=s.types),T.T=o}}function Ts(){}function Es(e,t,n,r){if(e.tag!==5)throw Error(s(476));var i=Ds(e).queue;ws(e,i,t,de,n===null?Ts:function(){return Os(e),n(r)})}function Ds(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:de},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Os(e){var t=Ds(e);t.next===null&&(t=e.alternate.memoizedState),Fs(e,t.next.queue,{},_u())}function ks(){return da(ip)}function As(){return V().memoizedState}function js(){return V().memoizedState}function Ms(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_u();e=qa(n);var r=Ja(t,e,n);r!==null&&(yu(r,t,n),I(r,t,n)),t={cache:va()},e.payload=t;return}t=t.return}}function Ns(e,t,n){var r=_u();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ls(e)?Rs(t,n):(n=fi(e,t,n,r),n!==null&&(yu(n,e,r),zs(n,t,r)))}function Ps(e,t,n){Fs(e,t,n,_u())}function Fs(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ls(e))Rs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Mr(s,o))return di(e,t,i,0),Vl===null&&ui(),!1}catch{}if(n=fi(e,t,i,r),n!==null)return yu(n,e,r),zs(n,t,r),!0}return!1}function Is(e,t,n,r){if(r={lane:2,revertLane:gd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ls(e)){if(t)throw Error(s(479))}else t=fi(e,n,r,2),t!==null&&yu(t,e,2)}function Ls(e){var t=e.alternate;return e===R||t!==null&&t===R}function Rs(e,t){_o=go=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ut(e,n)}}var Bs={readContext:da,use:Fo,useCallback:Co,useContext:Co,useEffect:Co,useImperativeHandle:Co,useLayoutEffect:Co,useInsertionEffect:Co,useMemo:Co,useReducer:Co,useRef:Co,useState:Co,useDebugValue:Co,useDeferredValue:Co,useTransition:Co,useSyncExternalStore:Co,useId:Co,useHostTransitionStatus:Co,useFormState:Co,useActionState:Co,useOptimistic:Co,useMemoCache:Co,useCacheRefresh:Co};Bs.useEffectEvent=Co;var Vs={readContext:da,use:Fo,useCallback:function(e,t){return Mo().memoizedState=[e,t===void 0?null:t],e},useContext:da,useEffect:ds,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),ls(4194308,4,_s.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ls(4194308,4,e,t)},useInsertionEffect:function(e,t){ls(4,2,e,t)},useMemo:function(e,t){var n=Mo();t=t===void 0?null:t;var r=e();if(vo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Mo();if(n!==void 0){var i=n(t);if(vo){Je(!0);try{n(t)}finally{Je(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ns.bind(null,R,e),[r.memoizedState,e]},useRef:function(e){var t=Mo();return e={current:e},t.memoizedState=e},useState:function(e){e=qo(e);var t=e.queue,n=Ps.bind(null,R,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ys,useDeferredValue:function(e,t){return Ss(Mo(),e,t)},useTransition:function(){var e=qo(!1);return e=ws.bind(null,R,e.queue,!0,!1),Mo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=R,i=Mo();if(k){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Vl===null)throw Error(s(349));K&127||Ho(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ds(Wo.bind(null,r,a,e),[e]),r.flags|=2048,ss(9,{destroy:void 0},Uo.bind(null,r,a,n,t),null),n},useId:function(){var e=Mo(),t=Vl.identifierPrefix;if(k){var n=Li,r=Ii;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=yo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=So++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:ks,useFormState:ns,useActionState:ns,useOptimistic:function(e){var t=Mo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Is.bind(null,R,!0,n),n.dispatch=t,[e,t]},useMemoCache:Io,useCacheRefresh:function(){return Mo().memoizedState=Ms.bind(null,R)},useEffectEvent:function(e){var t=Mo(),n={impl:e};return t.memoizedState=n,function(){if(W&2)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},Hs={readContext:da,use:Fo,useCallback:bs,useContext:da,useEffect:fs,useImperativeHandle:vs,useInsertionEffect:hs,useLayoutEffect:gs,useMemo:xs,useReducer:Ro,useRef:cs,useState:function(){return Ro(Lo)},useDebugValue:ys,useDeferredValue:function(e,t){return Cs(V(),z.memoizedState,e,t)},useTransition:function(){var e=Ro(Lo)[0],t=V().memoizedState;return[typeof e==`boolean`?e:Po(e),t]},useSyncExternalStore:Vo,useId:As,useHostTransitionStatus:ks,useFormState:rs,useActionState:rs,useOptimistic:function(e,t){return Jo(V(),z,e,t)},useMemoCache:Io,useCacheRefresh:js};Hs.useEffectEvent=ms;var Us={readContext:da,use:Fo,useCallback:bs,useContext:da,useEffect:fs,useImperativeHandle:vs,useInsertionEffect:hs,useLayoutEffect:gs,useMemo:xs,useReducer:Bo,useRef:cs,useState:function(){return Bo(Lo)},useDebugValue:ys,useDeferredValue:function(e,t){var n=V();return z===null?Ss(n,e,t):Cs(n,z.memoizedState,e,t)},useTransition:function(){var e=Bo(Lo)[0],t=V().memoizedState;return[typeof e==`boolean`?e:Po(e),t]},useSyncExternalStore:Vo,useId:As,useHostTransitionStatus:ks,useFormState:os,useActionState:os,useOptimistic:function(e,t){var n=V();return z===null?(n.baseState=e,[e,n.queue.dispatch]):Jo(n,z,e,t)},useMemoCache:Io,useCacheRefresh:js};Us.useEffectEvent=ms;function Ws(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_u(),i=qa(r);i.payload=t,n!=null&&(i.callback=n),t=Ja(e,i,r),t!==null&&(yu(t,e,r),I(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_u(),i=qa(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ja(e,i,r),t!==null&&(yu(t,e,r),I(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_u(),r=qa(n);r.tag=2,t!=null&&(r.callback=t),t=Ja(e,r,n),t!==null&&(yu(t,e,n),I(t,e,n))}};function Ks(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Nr(n,r)||!Nr(i,a):!0}function qs(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Gs.enqueueReplaceState(t,t.state,null)}function Js(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Ys(e){oi(e)}function Xs(e){console.error(e)}function Zs(e){oi(e)}function Qs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function $s(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function ec(e,t,n){return n=qa(n),n.tag=3,n.payload={element:null},n.callback=function(){Qs(e,t)},n}function tc(e){return e=qa(e),e.tag=3,e}function nc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){$s(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){$s(t,n,r),typeof i!=`function`&&(su===null?su=new Set([this]):su.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function rc(e,t,n,r,i){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&ca(t,n,i,!0),n=oo.current,n!==null){switch(n.tag){case 31:case 13:return so===null?ju():n.alternate===null&&Jl===0&&(Jl=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Aa?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Xu(e,r,i)),!1;case 22:return n.flags|=65536,r===Aa?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Xu(e,r,i)),!1}throw Error(s(435,n.tag))}return Xu(e,r,i),ju(),!1}if(k)return t=oo.current,t===null?(r!==qi&&(t=Error(s(423),{cause:r}),ea(Oi(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=Oi(r,n),i=ec(e.stateNode,r,i),Ya(e,i),Jl!==4&&(Jl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==qi&&(e=Error(s(422),{cause:r}),ea(Oi(e,n)))),!1;var a=Error(s(520),{cause:r});if(a=Oi(a,n),eu===null?eu=[a]:eu.push(a),Jl!==4&&(Jl=2),t===null)return!0;r=Oi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=ec(n.stateNode,r,e),Ya(n,e),!1;case 1:if(t=n.type,a=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||a!==null&&typeof a.componentDidCatch==`function`&&(su===null||!su.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=tc(i),nc(i,e,n,r),Ya(n,i),!1}n=n.return}while(n!==null);return!1}var ic=Error(s(461)),ac=!1;function oc(e,t,n,r){t.child=e===null?Ua(t,null,n,r):Ha(t,e.child,n,r)}function sc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ua(t),r=To(e,t,n,o,a,i),s=ko(),e!==null&&!ac?(Ao(e,t,i),Ac(e,t,i)):(k&&s&&Bi(t),t.flags|=1,oc(e,t,r,i),t.child)}function cc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!yi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,lc(e,t,a,r,i)):(e=Si(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!jc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Nr:n,n(o,r)&&e.ref===t.ref)return Ac(e,t,i)}return t.flags|=1,e=bi(a,r),e.ref=t.ref,e.return=t,t.child=e}function lc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Nr(a,r)&&e.ref===t.ref)if(ac=!1,t.pendingProps=r=a,jc(e,i))e.flags&131072&&(ac=!0);else return t.lanes=e.lanes,Ac(e,t,i)}return _c(e,t,n,r,i)}function uc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return fc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&M(t,a===null?null:a.cachePool),a===null?io():ro(t,a),lo(t);else return r=t.lanes=536870912,fc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&M(t,null),io(),uo(t)):(M(t,a.cachePool),ro(t,a),uo(t),t.memoizedState=null);return oc(e,t,i,n),t.child}function dc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function fc(e,t,n,r,i){var a=Da();return a=a===null?null:{parent:_a._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&M(t,null),io(),lo(t),e!==null&&ca(e,t,r,!0),t.childLanes=i,null}function pc(e,t){return t=Tc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mc(e,t,n){return Ha(t,e.child,null,n),e=pc(t,t.pendingProps),e.flags|=2,fo(t),t.memoizedState=null,e}function hc(e,t,n){var r=t.pendingProps,i=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(k){if(r.mode===`hidden`)return e=pc(t,r),t.lanes=536870912,dc(null,e);if(co(t),(e=Wi)?(e=uf(e,Ki),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fi===null?null:{id:Ii,overflow:Li},retryLane:536870912,hydrationErrors:null},n=Ti(e),n.return=t,t.child=n,Ui=t,Wi=null)):e=null,e===null)throw Ji(t);return t.lanes=536870912,null}return pc(t,r)}var a=e.memoizedState;if(a!==null){var o=a.dehydrated;if(co(t),i)if(t.flags&256)t.flags&=-257,t=mc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(ac||ca(e,t,n,!1),i=(n&e.childLanes)!==0,ac||i){if(r=Vl,r!==null&&(o=dt(r,n),o!==0&&o!==a.retryLane))throw a.retryLane=o,pi(e,o),yu(r,e,o),ic;ju(),t=mc(e,t,n)}else e=a.treeContext,Wi=mf(o.nextSibling),Ui=t,k=!0,Gi=null,Ki=!1,e!==null&&Hi(t,e),t=pc(t,r),t.flags|=4096;return t}return e=bi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function gc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function _c(e,t,n,r,i){return ua(t),n=To(e,t,n,r,void 0,i),r=ko(),e!==null&&!ac?(Ao(e,t,i),Ac(e,t,i)):(k&&r&&Bi(t),t.flags|=1,oc(e,t,n,i),t.child)}function vc(e,t,n,r,i,a){return ua(t),t.updateQueue=null,n=Do(t,r,n,i),Eo(e),r=ko(),e!==null&&!ac?(Ao(e,t,a),Ac(e,t,a)):(k&&r&&Bi(t),t.flags|=1,oc(e,t,n,a),t.child)}function yc(e,t,n,r,i){if(ua(t),t.stateNode===null){var a=gi,o=n.contextType;typeof o==`object`&&o&&(a=da(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Gs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ga(t),o=n.contextType,a.context=typeof o==`object`&&o?da(o):gi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Ws(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Gs.enqueueReplaceState(a,a.state,null),Qa(t,r,a,i),Za(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Js(n,s);a.props=c;var l=a.context,u=n.contextType;o=gi,typeof u==`object`&&u&&(o=da(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&qs(t,a,r,o),Wa=!1;var f=t.memoizedState;a.state=f,Qa(t,r,a,i),Za(),l=t.memoizedState,s||f!==l||Wa?(typeof d==`function`&&(Ws(t,n,d,r),l=t.memoizedState),(c=Wa||Ks(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ka(e,t),o=t.memoizedProps,u=Js(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=gi,typeof l==`object`&&l&&(c=da(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&qs(t,a,r,c),Wa=!1,f=t.memoizedState,a.state=f,Qa(t,r,a,i),Za();var p=t.memoizedState;o!==d||f!==p||Wa||e!==null&&e.dependencies!==null&&la(e.dependencies)?(typeof s==`function`&&(Ws(t,n,s,r),p=t.memoizedState),(u=Wa||Ks(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&la(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,gc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ha(t,e.child,null,i),t.child=Ha(t,null,n,i)):oc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Ac(e,t,i),e}function bc(e,t,n,r){return Qi(),t.flags|=256,oc(e,t,n,r),t.child}var xc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sc(e){return{baseLanes:e,cachePool:N()}}function Cc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Ql),e}function H(e,t,n){var r=t.pendingProps,i=!1,a=(t.flags&128)!=0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(po.current&2)!=0),o&&(i=!0,t.flags&=-129),o=(t.flags&32)!=0,t.flags&=-33,e===null){if(k){if(i?L(t):uo(t),(e=Wi)?(e=uf(e,Ki),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fi===null?null:{id:Ii,overflow:Li},retryLane:536870912,hydrationErrors:null},n=Ti(e),n.return=t,t.child=n,Ui=t,Wi=null)):e=null,e===null)throw Ji(t);return ff(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,i?(uo(t),i=t.mode,c=Tc({mode:`hidden`,children:c},i),r=Ci(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Sc(n),r.childLanes=Cc(e,o,n),t.memoizedState=xc,dc(null,r)):(L(t),wc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(a)t.flags&256?(L(t),t.flags&=-257,t=Ec(e,t,n)):t.memoizedState===null?(uo(t),c=r.fallback,i=t.mode,r=Tc({mode:`visible`,children:r.children},i),c=Ci(c,i,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ha(t,e.child,null,n),r=t.child,r.memoizedState=Sc(n),r.childLanes=Cc(e,o,n),t.memoizedState=xc,t=dc(null,r)):(uo(t),t.child=e.child,t.flags|=128,t=null);else if(L(t),ff(c)){if(o=c.nextSibling&&c.nextSibling.dataset,o)var u=o.dgst;o=u,r=Error(s(419)),r.stack=``,r.digest=o,ea({value:r,source:null,stack:null}),t=Ec(e,t,n)}else if(ac||ca(e,t,n,!1),o=(n&e.childLanes)!==0,ac||o){if(o=Vl,o!==null&&(r=dt(o,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,pi(e,r),yu(o,e,r),ic;df(c)||ju(),t=Ec(e,t,n)}else df(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Wi=mf(c.nextSibling),Ui=t,k=!0,Gi=null,Ki=!1,e!==null&&Hi(t,e),t=wc(t,r.children),t.flags|=4096);return t}return i?(uo(t),c=r.fallback,i=t.mode,l=e.child,u=l.sibling,r=bi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=Ci(c,i,n,null),c.flags|=2):c=bi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,dc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Sc(n):(i=c.cachePool,i===null?i=N():(l=_a._currentValue,i=i.parent===l?i:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:i}),r.memoizedState=c,r.childLanes=Cc(e,o,n),t.memoizedState=xc,dc(e.child,r)):(L(t),n=e.child,e=n.sibling,n=bi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function wc(e,t){return t=Tc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Tc(e,t){return e=vi(22,e,null,t),e.lanes=0,e}function Ec(e,t,n){return Ha(t,e.child,null,n),e=wc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),oa(e.return,t,n)}function Oc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function kc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=po.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,ge(po,o),oc(e,t,r,n),r=k?Mi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dc(e,n,t);else if(e.tag===19)Dc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&mo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Oc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&mo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Oc(t,!0,n,null,a,r);break;case`together`:Oc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ac(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ca(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=bi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=bi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&la(e))):!0}function Mc(e,t,n){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),ia(t,_a,e.memoizedState.cache),Qi();break;case 27:case 5:Ce(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:ia(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,co(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(L(t),e=Ac(e,t,n),e===null?null:e.sibling):H(e,t,n):(L(t),t.flags|=128,null);L(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(ca(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return kc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(po,po.current),r)break;return null;case 22:return t.lanes=0,uc(e,t,n,t.pendingProps);case 24:ia(t,_a,e.memoizedState.cache)}return Ac(e,t,n)}function Nc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ac=!0;else{if(!jc(e,n)&&!(t.flags&128))return ac=!1,Mc(e,t,n);ac=!!(e.flags&131072)}else ac=!1,k&&t.flags&1048576&&zi(t,Mi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Na(t.elementType),t.type=e,typeof e==`function`)yi(e)?(r=Js(e,r),t.tag=1,t=yc(null,t,e,r,n)):(t.tag=0,t=_c(null,t,e,r,n));else{if(e!=null){var i=e.$$typeof;if(i===w){t.tag=11,t=sc(null,t,e,r,n);break a}else if(i===ne){t.tag=14,t=cc(null,t,e,r,n);break a}}throw t=le(e)||e,Error(s(306,t,``))}}return t;case 0:return _c(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,i=Js(r,t.pendingProps),yc(e,t,r,i,n);case 3:a:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,Ka(e,t),Qa(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ia(t,_a,r),r!==a.cache&&sa(t,[_a],n,!0),Za(),r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=bc(e,t,r,n);break a}else if(r!==i){i=Oi(Error(s(424)),t),ea(i),t=bc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Wi=mf(e.firstChild),Ui=t,k=!0,Gi=null,Ki=!0,n=Ua(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Qi(),r===i){t=Ac(e,t,n);break a}oc(e,t,r,n)}t=t.child}return t;case 26:return gc(e,t),e===null?(n=Ff(t.type,null,t.pendingProps,null))?t.memoizedState=n:k||(n=t.type,e=t.pendingProps,r=Kd(ye.current).createElement(n),r[_t]=t,r[vt]=e,Bd(r,n,e),At(r),t.stateNode=r):t.memoizedState=Ff(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ce(t),e===null&&k&&(r=t.stateNode=vf(t.type,t.pendingProps,ye.current),Ui=t,Ki=!0,i=Wi,rf(t.type)?(hf=i,Wi=mf(r.firstChild)):Wi=i),oc(e,t,t.pendingProps.children,n),gc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&k&&((i=r=Wi)&&(r=cf(r,t.type,t.pendingProps,Ki),r===null?i=!1:(t.stateNode=r,Ui=t,Wi=mf(r.firstChild),Ki=!1,i=!0)),i||Ji(t)),Ce(t),i=t.type,a=t.pendingProps,o=e===null?null:e.memoizedProps,r=a.children,Yd(i,a)?r=null:o!==null&&Yd(i,o)&&(t.flags|=32),t.memoizedState!==null&&(i=To(e,t,Oo,null,null,n),ip._currentValue=i),gc(e,t),oc(e,t,r,n),t.child;case 6:return e===null&&k&&((e=n=Wi)&&(n=lf(n,t.pendingProps,Ki),n===null?e=!1:(t.stateNode=n,Ui=t,Wi=null,e=!0)),e||Ji(t)),null;case 13:return H(e,t,n);case 4:return xe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ha(t,null,r,n):oc(e,t,r,n),t.child;case 11:return sc(e,t,t.type,t.pendingProps,n);case 7:return oc(e,t,t.pendingProps,n),t.child;case 8:return oc(e,t,t.pendingProps.children,n),t.child;case 12:return oc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ia(t,t.type,r.value),oc(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,ua(t),i=da(i),r=r(i),t.flags|=1,oc(e,t,r,n),t.child;case 14:return cc(e,t,t.type,t.pendingProps,n);case 15:return lc(e,t,t.type,t.pendingProps,n);case 19:return kc(e,t,n);case 31:return hc(e,t,n);case 22:return uc(e,t,n,t.pendingProps);case 24:return ua(t),r=da(_a),e===null?(i=Da(),i===null&&(i=Vl,a=va(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},Ga(t),ia(t,_a,i)):((e.lanes&n)!==0&&(Ka(e,t),Qa(t,null,null,n),Za()),i=e.memoizedState,a=t.memoizedState,i.parent===r?(r=a.cache,ia(t,_a,r),r!==i.cache&&sa(t,[_a],n,!0)):(i={parent:r,cache:r},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),ia(t,_a,r))),oc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Pc(e){e.flags|=4}function Fc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Ou())e.flags|=8192;else throw Pa=Aa,Oa}else e.flags&=-16777217}function Ic(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Xf(t))if(Ou())e.flags|=8192;else throw Pa=Aa,Oa}function Lc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:at(),e.lanes|=t,$l|=t)}function Rc(e,t){if(!k)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Bc(e,t,n){var r=t.pendingProps;switch(Vi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zc(t),null;case 1:return zc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),aa(_a),Se(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Zi(t)?Pc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$i())),zc(t),null;case 26:var i=t.type,a=t.memoizedState;return e===null?(Pc(t),a===null?(zc(t),Fc(t,i,null,r,n)):(zc(t),Ic(t,a))):a?a===e.memoizedState?(zc(t),t.flags&=-16777217):(Pc(t),zc(t),Ic(t,a)):(e=e.memoizedProps,e!==r&&Pc(t),zc(t),Fc(t,i,e,r,n)),null;case 27:if(we(t),n=ye.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return zc(t),null}e=_e.current,Zi(t)?Yi(t,e):(e=vf(i,r,n),t.stateNode=e,Pc(t))}return zc(t),null;case 5:if(we(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return zc(t),null}if(a=_e.current,Zi(t))Yi(t,a);else{var o=Kd(ye.current);switch(a){case 1:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case 2:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;default:switch(i){case`svg`:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case`math`:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;case`script`:a=o.createElement(`div`),a.innerHTML=`<script><\/script>`,a=a.removeChild(a.firstChild);break;case`select`:a=typeof r.is==`string`?o.createElement(`select`,{is:r.is}):o.createElement(`select`),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is==`string`?o.createElement(i,{is:r.is}):o.createElement(i)}}a[_t]=t,a[vt]=r;a:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break a;for(;o.sibling===null;){if(o.return===null||o.return===t)break a;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;a:switch(Bd(a,i,r),i){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Pc(t)}}return zc(t),Fc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(s(166));if(e=ye.current,Zi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,i=Ui,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}e[_t]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Ld(e.nodeValue,n)),e||Ji(t,!0)}else e=Kd(e).createTextNode(r),e[_t]=t,t.stateNode=e}return zc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Zi(t),n!==null){if(e===null){if(!r)throw Error(s(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(557));e[_t]=t}else Qi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zc(t),e=!1}else n=$i(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(fo(t),t):(fo(t),null);if(t.flags&128)throw Error(s(558))}return zc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Zi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i===null?null:i.dehydrated,!i)throw Error(s(317));i[_t]=t}else Qi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zc(t),i=!1}else i=$i(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(fo(t),t):(fo(t),null)}return fo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Lc(t,t.updateQueue),zc(t),null);case 4:return Se(),e===null&&Dd(t.stateNode.containerInfo),zc(t),null;case 10:return aa(t.type),zc(t),null;case 19:if(he(po),r=t.memoizedState,r===null)return zc(t),null;if(i=(t.flags&128)!=0,a=r.rendering,a===null)if(i)Rc(r,!1);else{if(Jl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=mo(e),a!==null){for(t.flags|=128,Rc(r,!1),e=a.updateQueue,t.updateQueue=e,Lc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)xi(n,e),n=n.sibling;return ge(po,po.current&1|2),k&&Ri(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Le()>au&&(t.flags|=128,i=!0,Rc(r,!1),t.lanes=4194304)}else{if(!i)if(e=mo(a),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Lc(t,e),Rc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!a.alternate&&!k)return zc(t),null}else 2*Le()-r.renderingStartTime>au&&n!==536870912&&(t.flags|=128,i=!0,Rc(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e===null?t.child=a:e.sibling=a,r.last=a)}return r.tail===null?(zc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Le(),e.sibling=null,n=po.current,ge(po,i?n&1|2:n&1),k&&Ri(t,r.treeForkCount),e);case 22:case 23:return fo(t),ao(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(zc(t),t.subtreeFlags&6&&(t.flags|=8192)):zc(t),n=t.updateQueue,n!==null&&Lc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&he(Ea),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),aa(_a),zc(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Vc(e,t){switch(Vi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(_a),Se(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return we(t),null;case 31:if(t.memoizedState!==null){if(fo(t),t.alternate===null)throw Error(s(340));Qi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(fo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Qi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(po),null;case 4:return Se(),null;case 10:return aa(t.type),null;case 22:case 23:return fo(t),ao(),e!==null&&he(Ea),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return aa(_a),null;case 25:return null;default:return null}}function Hc(e,t){switch(Vi(t),t.tag){case 3:aa(_a),Se();break;case 26:case 27:case 5:we(t);break;case 4:Se();break;case 31:t.memoizedState!==null&&fo(t);break;case 13:fo(t);break;case 19:he(po);break;case 10:aa(t.type);break;case 22:case 23:fo(t),ao(),e!==null&&he(Ea);break;case 24:aa(_a)}}function Uc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Yu(t,t.return,e)}}function Wc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Yu(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Yu(t,t.return,e)}}function Gc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{eo(t,n)}catch(t){Yu(e,e.return,t)}}}function Kc(e,t,n){n.props=Js(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Yu(e,t,n)}}function qc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Yu(e,t,n)}}function Jc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Yu(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Yu(e,t,n)}else n.current=null}function Yc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Yu(e,e.return,t)}}function Xc(e,t,n){try{var r=e.stateNode;Vd(r,e.type,n,t),r[vt]=t}catch(t){Yu(e,e.return,t)}}function Zc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rf(e.type)||e.tag===4}function Qc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rf(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=un));else if(r!==4&&(r===27&&rf(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for($c(e,t,n),e=e.sibling;e!==null;)$c(e,t,n),e=e.sibling}function el(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&rf(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(el(e,t,n),e=e.sibling;e!==null;)el(e,t,n),e=e.sibling}function tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Bd(t,r,n),t[_t]=e,t[vt]=n}catch(t){Yu(e,e.return,t)}}var nl=!1,rl=!1,il=!1,al=typeof WeakSet==`function`?WeakSet:Set,ol=null;function sl(e,t){if(e=e.containerInfo,Wd=pp,e=Lr(e),Rr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break a}var o=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(c=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===i&&(c=o),p===a&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Gd={focusedElem:e,selectionRange:n},pp=!1,ol=t;ol!==null;)if(t=ol,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,ol=e;else for(;ol!==null;){switch(t=ol,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var h=Js(n.type,i);e=r.getSnapshotBeforeUpdate(h,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Yu(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)sf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:sf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,ol=e;break}ol=t.return}}function cl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Sl(e,n),r&4&&Uc(5,n);break;case 1:if(Sl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Yu(n,n.return,e)}else{var i=Js(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Yu(n,n.return,e)}}r&64&&Gc(n),r&512&&qc(n,n.return);break;case 3:if(Sl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{eo(e,t)}catch(e){Yu(n,n.return,e)}}break;case 27:t===null&&r&4&&tl(n);case 26:case 5:Sl(e,n),t===null&&r&4&&Yc(n),r&512&&qc(n,n.return);break;case 12:Sl(e,n);break;case 31:Sl(e,n),r&4&&pl(e,n);break;case 13:Sl(e,n),r&4&&ml(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=$u.bind(null,n),pf(e,n))));break;case 22:if(r=n.memoizedState!==null||nl,!r){t=t!==null&&t.memoizedState!==null||rl,i=nl;var a=rl;nl=r,(rl=t)&&!a?wl(e,n,(n.subtreeFlags&8772)!=0):Sl(e,n),nl=i,rl=a}break;case 30:break;default:Sl(e,n)}}function ll(e){var t=e.alternate;t!==null&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Tt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var U=null,ul=!1;function dl(e,t,n){for(n=n.child;n!==null;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(qe&&typeof qe.onCommitFiberUnmount==`function`)try{qe.onCommitFiberUnmount(Ke,n)}catch{}switch(n.tag){case 26:rl||Jc(n,t),dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:rl||Jc(n,t);var r=U,i=ul;rf(n.type)&&(U=n.stateNode,ul=!1),dl(e,t,n),yf(n.stateNode),U=r,ul=i;break;case 5:rl||Jc(n,t);case 6:if(r=U,i=ul,U=null,dl(e,t,n),U=r,ul=i,U!==null)if(ul)try{(U.nodeType===9?U.body:U.nodeName===`HTML`?U.ownerDocument.body:U).removeChild(n.stateNode)}catch(e){Yu(n,t,e)}else try{U.removeChild(n.stateNode)}catch(e){Yu(n,t,e)}break;case 18:U!==null&&(ul?(e=U,af(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),zp(e)):af(U,n.stateNode));break;case 4:r=U,i=ul,U=n.stateNode.containerInfo,ul=!0,dl(e,t,n),U=r,ul=i;break;case 0:case 11:case 14:case 15:Wc(2,n,t),rl||Wc(4,n,t),dl(e,t,n);break;case 1:rl||(Jc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Kc(n,t,r)),dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:rl=(r=rl)||n.memoizedState!==null,dl(e,t,n),rl=r;break;default:dl(e,t,n)}}function pl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zp(e)}catch(e){Yu(t,t.return,e)}}}function ml(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zp(e)}catch(e){Yu(t,t.return,e)}}function hl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new al),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new al),t;default:throw Error(s(435,e.tag))}}function gl(e,t){var n=hl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=ed.bind(null,e,t);t.then(r,r)}})}function _l(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,c=o;a:for(;c!==null;){switch(c.tag){case 27:if(rf(c.type)){U=c.stateNode,ul=!1;break a}break;case 5:U=c.stateNode,ul=!1;break a;case 3:case 4:U=c.stateNode.containerInfo,ul=!0;break a}c=c.return}if(U===null)throw Error(s(160));fl(a,o,i),U=null,ul=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)yl(t,e),t=t.sibling}var vl=null;function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_l(t,e),bl(e),r&4&&(Wc(3,e,e.return),Uc(3,e),Wc(5,e,e.return));break;case 1:_l(t,e),bl(e),r&512&&(rl||n===null||Jc(n,n.return)),r&64&&nl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=vl;if(_l(t,e),bl(e),r&512&&(rl||n===null||Jc(n,n.return)),r&4){var a=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;b:switch(r){case`title`:a=i.getElementsByTagName(`title`)[0],(!a||a[wt]||a[_t]||a.namespaceURI===`http://www.w3.org/2000/svg`||a.hasAttribute(`itemprop`))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector(`head > title`))),Bd(a,r,n),a[_t]=e,At(a),r=a;break a;case`link`:var o=qf(`link`,`href`,i).get(r+(n.href||``));if(o){for(var c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&a.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&a.getAttribute(`title`)===(n.title==null?null:n.title)&&a.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(c,1);break b}}a=i.createElement(r),Bd(a,r,n),i.head.appendChild(a);break;case`meta`:if(o=qf(`meta`,`content`,i).get(r+(n.content||``))){for(c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`content`)===(n.content==null?null:``+n.content)&&a.getAttribute(`name`)===(n.name==null?null:n.name)&&a.getAttribute(`property`)===(n.property==null?null:n.property)&&a.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){o.splice(c,1);break b}}a=i.createElement(r),Bd(a,r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[_t]=e,At(a),r=a}e.stateNode=r}else Jf(i,e.type,e.stateNode);else e.stateNode=Hf(i,r,e.memoizedProps);else a===r?r===null&&e.stateNode!==null&&Xc(e,e.memoizedProps,n.memoizedProps):(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?Jf(i,e.type,e.stateNode):Hf(i,r,e.memoizedProps))}break;case 27:_l(t,e),bl(e),r&512&&(rl||n===null||Jc(n,n.return)),n!==null&&r&4&&Xc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_l(t,e),bl(e),r&512&&(rl||n===null||Jc(n,n.return)),e.flags&32){i=e.stateNode;try{tn(i,``)}catch(t){Yu(e,e.return,t)}}r&4&&e.stateNode!=null&&(i=e.memoizedProps,Xc(e,i,n===null?i:n.memoizedProps)),r&1024&&(il=!0);break;case 6:if(_l(t,e),bl(e),r&4){if(e.stateNode===null)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Yu(e,e.return,t)}}break;case 3:if(Kf=null,i=vl,vl=Sf(t.containerInfo),_l(t,e),vl=i,bl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zp(t.containerInfo)}catch(t){Yu(e,e.return,t)}il&&(il=!1,xl(e));break;case 4:r=vl,vl=Sf(e.stateNode.containerInfo),_l(t,e),bl(e),vl=r;break;case 12:_l(t,e),bl(e);break;case 31:_l(t,e),bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 13:_l(t,e),bl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ru=Le()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 22:i=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=nl,d=rl;if(nl=u||i,rl=d||l,_l(t,e),rl=d,nl=u,bl(e),r&8192)a:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||l||nl||rl||Cl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(a=l.stateNode,i)o=a.style,typeof o.setProperty==`function`?o.setProperty(`display`,`none`,`important`):o.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Yu(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=i?``:l.memoizedProps}catch(e){Yu(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;i?of(m,!0):of(l.stateNode,!1)}catch(e){Yu(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,gl(e,n))));break;case 19:_l(t,e),bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 30:break;case 21:break;default:_l(t,e),bl(e)}}function bl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Zc(r)){n=r;break}r=r.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;el(e,Qc(e),i);break;case 5:var a=n.stateNode;n.flags&32&&(tn(a,``),n.flags&=-33),el(e,Qc(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;$c(e,Qc(e),o);break;default:throw Error(s(161))}}catch(t){Yu(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Sl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cl(e,t.alternate,t),t=t.sibling}function Cl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wc(4,t,t.return),Cl(t);break;case 1:Jc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Kc(t,t.return,n),Cl(t);break;case 27:yf(t.stateNode);case 26:case 5:Jc(t,t.return),Cl(t);break;case 22:t.memoizedState===null&&Cl(t);break;case 30:Cl(t);break;default:Cl(t)}e=e.sibling}}function wl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:wl(i,a,n),Uc(4,a);break;case 1:if(wl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Yu(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)$a(c[i],s)}catch(e){Yu(r,r.return,e)}}n&&o&64&&Gc(a),qc(a,a.return);break;case 27:tl(a);case 26:case 5:wl(i,a,n),n&&r===null&&o&4&&Yc(a),qc(a,a.return);break;case 12:wl(i,a,n);break;case 31:wl(i,a,n),n&&o&4&&pl(i,a);break;case 13:wl(i,a,n),n&&o&4&&ml(i,a);break;case 22:a.memoizedState===null&&wl(i,a,n),qc(a,a.return);break;case 30:break;default:wl(i,a,n)}t=t.sibling}}function Tl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ya(n))}function El(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ya(e))}function Dl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ol(e,t,n,r),t=t.sibling}function Ol(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Dl(e,t,n,r),i&2048&&Uc(9,t);break;case 1:Dl(e,t,n,r);break;case 3:Dl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ya(e)));break;case 12:if(i&2048){Dl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Yu(t,t.return,e)}}else Dl(e,t,n,r);break;case 31:Dl(e,t,n,r);break;case 13:Dl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Dl(e,t,n,r):(a._visibility|=2,kl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Dl(e,t,n,r):Al(e,t),i&2048&&Tl(o,t);break;case 24:Dl(e,t,n,r),i&2048&&El(t.alternate,t);break;default:Dl(e,t,n,r)}}function kl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:kl(a,o,s,c,i),Uc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,kl(a,o,s,c,i)):u._visibility&2?kl(a,o,s,c,i):Al(a,o),i&&l&2048&&Tl(o.alternate,o);break;case 24:kl(a,o,s,c,i),i&&l&2048&&El(o.alternate,o);break;default:kl(a,o,s,c,i)}t=t.sibling}}function Al(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Al(n,r),i&2048&&Tl(r.alternate,r);break;case 24:Al(n,r),i&2048&&El(r.alternate,r);break;default:Al(n,r)}t=t.sibling}}var jl=8192;function Ml(e,t,n){if(e.subtreeFlags&jl)for(e=e.child;e!==null;)Nl(e,t,n),e=e.sibling}function Nl(e,t,n){switch(e.tag){case 26:Ml(e,t,n),e.flags&jl&&e.memoizedState!==null&&Zf(n,vl,e.memoizedState,e.memoizedProps);break;case 5:Ml(e,t,n);break;case 3:case 4:var r=vl;vl=Sf(e.stateNode.containerInfo),Ml(e,t,n),vl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=jl,jl=16777216,Ml(e,t,n),jl=r):Ml(e,t,n));break;default:Ml(e,t,n)}}function Pl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];ol=r,Rl(r,e)}Pl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Il(e),e=e.sibling}function Il(e){switch(e.tag){case 0:case 11:case 15:Fl(e),e.flags&2048&&Wc(9,e,e.return);break;case 3:Fl(e);break;case 12:Fl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ll(e)):Fl(e);break;default:Fl(e)}}function Ll(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];ol=r,Rl(r,e)}Pl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wc(8,t,t.return),Ll(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ll(t));break;default:Ll(t)}e=e.sibling}}function Rl(e,t){for(;ol!==null;){var n=ol;switch(n.tag){case 0:case 11:case 15:Wc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ya(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,ol=r;else a:for(n=e;ol!==null;){r=ol;var i=r.sibling,a=r.return;if(ll(r),r===n){ol=null;break a}if(i!==null){i.return=a,ol=i;break a}ol=a}}}var zl={getCacheForType:function(e){var t=da(_a),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return da(_a).controller.signal}},Bl=typeof WeakMap==`function`?WeakMap:Map,W=0,Vl=null,G=null,K=0,Hl=0,Ul=null,Wl=!1,Gl=!1,Kl=!1,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,Ql=0,$l=0,eu=null,tu=null,nu=!1,ru=0,iu=0,au=1/0,ou=null,su=null,cu=0,lu=null,uu=null,du=0,fu=0,pu=null,mu=null,hu=0,gu=null;function _u(){return W&2&&K!==0?K&-K:T.T===null?mt():gd()}function vu(){if(Ql===0)if(!(K&536870912)||k){var e=et;et<<=1,!(et&3932160)&&(et=262144),Ql=e}else Ql=536870912;return e=oo.current,e!==null&&(e.flags|=32),Ql}function yu(e,t,n){(e===Vl&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)&&(Eu(e,0),Cu(e,K,Ql,!1)),st(e,n),(!(W&2)||e!==Vl)&&(e===Vl&&(!(W&2)&&(Xl|=n),Jl===4&&Cu(e,K,Ql,!1)),cd(e))}function bu(e,t,n){if(W&6)throw Error(s(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||D(e,t),i=r?Pu(e,t):Mu(e,t,!0),a=r;do{if(i===0){Gl&&!r&&Cu(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!Su(n)){i=Mu(e,t,!1),a=!1;continue}if(i===2){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=e.pendingLanes&-536870913,o=o===0?o&536870912?536870912:0:o;if(o!==0){t=o;a:{var c=e;i=eu;var l=c.current.memoizedState.isDehydrated;if(l&&(Eu(c,o).flags|=256),o=Mu(c,o,!1),o!==2){if(Kl&&!l){c.errorRecoveryDisabledLanes|=a,Xl|=a,i=4;break a}a=tu,tu=i,a!==null&&(tu===null?tu=a:tu.push.apply(tu,a))}i=o}if(a=!1,i!==2)continue}}if(i===1){Eu(e,0),Cu(e,t,0,!0);break}a:{switch(r=e,a=i,a){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Cu(r,t,Ql,!Wl);break a;case 2:tu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(i=ru+300-Le(),10<i)){if(Cu(r,t,Ql,!Wl),rt(r,0,!0)!==0)break a;du=t,r.timeoutHandle=Qd(xu.bind(null,r,n,tu,ou,nu,t,Ql,Xl,$l,Wl,a,`Throttled`,-0,0),i);break a}xu(r,n,tu,ou,nu,t,Ql,Xl,$l,Wl,a,null,-0,0)}}break}while(1);cd(e)}function xu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:un},Nl(t,a,d);var m=(a&62914560)===a?ru-Le():(a&4194048)===a?iu-Le():0;if(m=$f(d,m),m!==null){du=a,e.cancelPendingCommit=m(Vu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Cu(e,a,o,!l);return}}Vu(e,t,a,n,r,i,o,s,c)}function Su(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Mr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cu(e,t,n,r){t&=~Zl,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ye(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&lt(e,n,t)}function wu(){return W&6?!0:(ld(0,!1),!1)}function Tu(){if(G!==null){if(Hl===0)var e=G.return;else e=G,ra=na=null,jo(e),La=null,Ra=0,e=G;for(;e!==null;)Hc(e.alternate,e),e=e.return;G=null}}function Eu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,$d(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),du=0,Tu(),Vl=e,G=n=bi(e.current,null),K=t,Hl=0,Ul=null,Wl=!1,Gl=D(e,t),Kl=!1,$l=Ql=Zl=Xl=Yl=Jl=0,tu=eu=null,nu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ye(r),a=1<<i;t|=e[i],r&=~a}return ql=t,ui(),n}function Du(e,t){R=null,T.H=Bs,t===P||t===ka?(t=Fa(),Hl=3):t===Oa?(t=Fa(),Hl=4):Hl=t===ic?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Ul=t,G===null&&(Jl=1,Qs(e,Oi(t,e.current)))}function Ou(){var e=oo.current;return e===null?!0:(K&4194048)===K?so===null:(K&62914560)===K||K&536870912?e===so:!1}function ku(){var e=T.H;return T.H=Bs,e===null?Bs:e}function Au(){var e=T.A;return T.A=zl,e}function ju(){Jl=4,Wl||(K&4194048)!==K&&oo.current!==null||(Gl=!0),!(Yl&134217727)&&!(Xl&134217727)||Vl===null||Cu(Vl,K,Ql,!1)}function Mu(e,t,n){var r=W;W|=2;var i=ku(),a=Au();(Vl!==e||K!==t)&&(ou=null,Eu(e,t)),t=!1;var o=Jl;a:do try{if(Hl!==0&&G!==null){var s=G,c=Ul;switch(Hl){case 8:Tu(),o=6;break a;case 3:case 2:case 9:case 6:oo.current===null&&(t=!0);var l=Hl;if(Hl=0,Ul=null,Ru(e,s,c,l),n&&Gl){o=0;break a}break;default:l=Hl,Hl=0,Ul=null,Ru(e,s,c,l)}}Nu(),o=Jl;break}catch(t){Du(e,t)}while(1);return t&&e.shellSuspendCounter++,ra=na=null,W=r,T.H=i,T.A=a,G===null&&(Vl=null,K=0,ui()),o}function Nu(){for(;G!==null;)Iu(G)}function Pu(e,t){var n=W;W|=2;var r=ku(),i=Au();Vl!==e||K!==t?(ou=null,au=Le()+500,Eu(e,t)):Gl=D(e,t);a:do try{if(Hl!==0&&G!==null){t=G;var a=Ul;b:switch(Hl){case 1:Hl=0,Ul=null,Ru(e,t,a,1);break;case 2:case 9:if(ja(a)){Hl=0,Ul=null,Lu(t);break}t=function(){Hl!==2&&Hl!==9||Vl!==e||(Hl=7),cd(e)},a.then(t,t);break a;case 3:Hl=7;break a;case 4:Hl=5;break a;case 7:ja(a)?(Hl=0,Ul=null,Lu(t)):(Hl=0,Ul=null,Ru(e,t,a,7));break;case 5:var o=null;switch(G.tag){case 26:o=G.memoizedState;case 5:case 27:var c=G;if(o?Xf(o):c.stateNode.complete){Hl=0,Ul=null;var l=c.sibling;if(l!==null)G=l;else{var u=c.return;u===null?G=null:(G=u,zu(u))}break b}}Hl=0,Ul=null,Ru(e,t,a,5);break;case 6:Hl=0,Ul=null,Ru(e,t,a,6);break;case 8:Tu(),Jl=6;break a;default:throw Error(s(462))}}Fu();break}catch(t){Du(e,t)}while(1);return ra=na=null,T.H=r,T.A=i,W=n,G===null?(Vl=null,K=0,ui(),Jl):0}function Fu(){for(;G!==null&&!Fe();)Iu(G)}function Iu(e){var t=Nc(e.alternate,e,ql);e.memoizedProps=e.pendingProps,t===null?zu(e):G=t}function Lu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vc(n,t,t.pendingProps,t.type,void 0,K);break;case 11:t=vc(n,t,t.pendingProps,t.type.render,t.ref,K);break;case 5:jo(t);default:Hc(n,t),t=G=xi(t,ql),t=Nc(n,t,ql)}e.memoizedProps=e.pendingProps,t===null?zu(e):G=t}function Ru(e,t,n,r){ra=na=null,jo(t),La=null,Ra=0;var i=t.return;try{if(rc(e,i,t,n,K)){Jl=1,Qs(e,Oi(n,e.current)),G=null;return}}catch(t){if(i!==null)throw G=i,t;Jl=1,Qs(e,Oi(n,e.current)),G=null;return}t.flags&32768?(k||r===1?e=!0:Gl||K&536870912?e=!1:(Wl=e=!0,(r===2||r===9||r===3||r===6)&&(r=oo.current,r!==null&&r.tag===13&&(r.flags|=16384))),Bu(t,e)):zu(t)}function zu(e){var t=e;do{if(t.flags&32768){Bu(t,Wl);return}e=t.return;var n=Bc(t.alternate,t,ql);if(n!==null){G=n;return}if(t=t.sibling,t!==null){G=t;return}G=t=e}while(t!==null);Jl===0&&(Jl=5)}function Bu(e,t){do{var n=Vc(e.alternate,e);if(n!==null){n.flags&=32767,G=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){G=e;return}G=e=n}while(e!==null);Jl=6,G=null}function Vu(e,t,n,r,i,a,o,c,l){e.cancelPendingCommit=null;do Ku();while(cu!==0);if(W&6)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,a|=li,ct(e,n,a,o,c,l),e===Vl&&(G=Vl=null,K=0),uu=t,lu=e,du=n,fu=a,pu=i,mu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,td(Ve,function(){return qu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=T.T,T.T=null,i=E.p,E.p=2,o=W,W|=4;try{sl(e,t,n)}finally{W=o,E.p=i,T.T=r}}cu=1,Hu(),Uu(),Wu()}}function Hu(){if(cu===1){cu=0;var e=lu,t=uu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=T.T,T.T=null;var r=E.p;E.p=2;var i=W;W|=4;try{yl(t,e);var a=Gd,o=Lr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Ir(s.ownerDocument.documentElement,s)){if(c!==null&&Rr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Fr(s,h),v=Fr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}pp=!!Wd,Gd=Wd=null}finally{W=i,E.p=r,T.T=n}}e.current=t,cu=2}}function Uu(){if(cu===2){cu=0;var e=lu,t=uu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=T.T,T.T=null;var r=E.p;E.p=2;var i=W;W|=4;try{cl(e,t.alternate,t)}finally{W=i,E.p=r,T.T=n}}cu=3}}function Wu(){if(cu===4||cu===3){cu=0,Ie();var e=lu,t=uu,n=du,r=mu;t.subtreeFlags&10256||t.flags&10256?cu=5:(cu=0,uu=lu=null,Gu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(su=null),pt(n),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot==`function`)try{qe.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=T.T,i=E.p,E.p=2,T.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{T.T=t,E.p=i}}du&3&&Ku(),cd(e),i=e.pendingLanes,n&261930&&i&42?e===gu?hu++:(hu=0,gu=e):hu=0,ld(0,!1)}}function Gu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ya(t)))}function Ku(){return Hu(),Uu(),Wu(),qu()}function qu(){if(cu!==5)return!1;var e=lu,t=fu;fu=0;var n=pt(du),r=T.T,i=E.p;try{E.p=32>n?32:n,T.T=null,n=pu,pu=null;var a=lu,o=du;if(cu=0,uu=lu=null,du=0,W&6)throw Error(s(331));var c=W;if(W|=4,Il(a.current),Ol(a,a.current,o,n),W=c,ld(0,!1),qe&&typeof qe.onPostCommitFiberRoot==`function`)try{qe.onPostCommitFiberRoot(Ke,a)}catch{}return!0}finally{E.p=i,T.T=r,Gu(e,t)}}function Ju(e,t,n){t=Oi(n,t),t=ec(e.stateNode,t,2),e=Ja(e,t,2),e!==null&&(st(e,2),cd(e))}function Yu(e,t,n){if(e.tag===3)Ju(e,e,n);else for(;t!==null;){if(t.tag===3){Ju(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(su===null||!su.has(r))){e=Oi(n,e),n=tc(2),r=Ja(t,n,2),r!==null&&(nc(n,r,t,e),st(r,2),cd(r));break}}t=t.return}}function Xu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Bl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Kl=!0,i.add(n),e=Zu.bind(null,e,t,n),t.then(e,e))}function Zu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vl===e&&(K&n)===n&&(Jl===4||Jl===3&&(K&62914560)===K&&300>Le()-ru?!(W&2)&&Eu(e,0):Zl|=n,$l===K&&($l=0)),cd(e)}function Qu(e,t){t===0&&(t=at()),e=pi(e,t),e!==null&&(st(e,t),cd(e))}function $u(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qu(e,n)}function ed(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(t),Qu(e,n)}function td(e,t){return Ne(e,t)}var nd=null,rd=null,id=!1,ad=!1,od=!1,sd=0;function cd(e){e!==rd&&e.next===null&&(rd===null?nd=rd=e:rd=rd.next=e),ad=!0,id||(id=!0,hd())}function ld(e,t){if(!od&&ad){od=!0;do for(var n=!1,r=nd;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ye(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,md(r,a))}else a=K,a=rt(r,r===Vl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||D(r,a)||(n=!0,md(r,a));r=r.next}while(n);od=!1}}function ud(){dd()}function dd(){ad=id=!1;var e=0;sd!==0&&Zd()&&(e=sd);for(var t=Le(),n=null,r=nd;r!==null;){var i=r.next,a=fd(r,t);a===0?(r.next=null,n===null?nd=i:n.next=i,i===null&&(rd=n)):(n=r,(e!==0||a&3)&&(ad=!0)),r=i}cu!==0&&cu!==5||ld(e,!1),sd!==0&&(sd=0)}function fd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ye(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=it(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Vl,n=K,n=rt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Pe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||D(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Pe(r),pt(n)){case 2:case 8:n=Be;break;case 32:n=Ve;break;case 268435456:n=Ue;break;default:n=Ve}return r=pd.bind(null,e),n=Ne(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Pe(r),e.callbackPriority=2,e.callbackNode=null,2}function pd(e,t){if(cu!==0&&cu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ku()&&e.callbackNode!==n)return null;var r=K;return r=rt(e,e===Vl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(bu(e,r,t),fd(e,Le()),e.callbackNode!=null&&e.callbackNode===n?pd.bind(null,e):null)}function md(e,t){if(Ku())return null;bu(e,t,!0)}function hd(){tf(function(){W&6?Ne(ze,ud):dd()})}function gd(){if(sd===0){var e=Sa;e===0&&(e=$e,$e<<=1,!($e&261888)&&($e=256)),sd=e}return sd}function _d(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:ln(``+e)}function vd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function yd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=_d((i[vt]||null).action),o=r.submitter;o&&(t=(t=o[vt]||null)?_d(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new jn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(sd!==0){var e=o?vd(i,o):new FormData(i);Es(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?vd(i,o):new FormData(i),Es(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var bd=0;bd<ii.length;bd++){var xd=ii[bd];ai(xd.toLowerCase(),`on`+(xd[0].toUpperCase()+xd.slice(1)))}ai(Xr,`onAnimationEnd`),ai(Zr,`onAnimationIteration`),ai(Qr,`onAnimationStart`),ai(`dblclick`,`onDoubleClick`),ai(`focusin`,`onFocus`),ai(`focusout`,`onBlur`),ai($r,`onTransitionRun`),ai(ei,`onTransitionStart`),ai(ti,`onTransitionCancel`),ai(ni,`onTransitionEnd`),Pt(`onMouseEnter`,[`mouseout`,`mouseover`]),Pt(`onMouseLeave`,[`mouseout`,`mouseover`]),Pt(`onPointerEnter`,[`pointerout`,`pointerover`]),Pt(`onPointerLeave`,[`pointerout`,`pointerover`]),Nt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Nt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Nt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Nt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Nt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Nt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Sd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Cd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Sd));function wd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){oi(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){oi(e)}i.currentTarget=null,a=c}}}}function q(e,t){var n=t[bt];n===void 0&&(n=t[bt]=new Set);var r=e+`__bubble`;n.has(r)||(Od(t,e,2,!1),n.add(r))}function Td(e,t,n){var r=0;t&&(r|=4),Od(n,e,r,t)}var Ed=`_reactListening`+Math.random().toString(36).slice(2);function Dd(e){if(!e[Ed]){e[Ed]=!0,jt.forEach(function(t){t!==`selectionchange`&&(Cd.has(t)||Td(t,!1,e),Td(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ed]||(t[Ed]=!0,Td(`selectionchange`,!1,t))}}function Od(e,t,n,r){switch(bp(t)){case 2:var i=mp;break;case 8:i=hp;break;default:i=gp}n=i.bind(null,t,n,e),i=void 0,!bn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function kd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;s!==null;){if(o=Et(s),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){r=a=o;continue a}s=s.parentNode}}r=r.return}_n(function(){var r=a,i=fn(n),o=[];a:{var s=ri.get(e);if(s!==void 0){var c=jn,u=e;switch(e){case`keypress`:if(En(n)===0)break a;case`keydown`:case`keyup`:c=Yn;break;case`focusin`:u=`focus`,c=Bn;break;case`focusout`:u=`blur`,c=Bn;break;case`beforeblur`:case`afterblur`:c=Bn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:c=Rn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:c=zn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:c=Zn;break;case Xr:case Zr:case Qr:c=Vn;break;case ni:c=Qn;break;case`scroll`:case`scrollend`:c=Nn;break;case`wheel`:c=$n;break;case`copy`:case`cut`:case`paste`:c=Hn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:c=Xn;break;case`toggle`:case`beforetoggle`:c=er}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?s===null?null:s+`Capture`:s;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=vn(m,p),g!=null&&d.push(Ad(m,g,h))),f)break;m=m.return}0<d.length&&(s=new c(s,u,null,n,i),o.push({event:s,listeners:d}))}}if(!(t&7)){a:{if(s=e===`mouseover`||e===`pointerover`,c=e===`mouseout`||e===`pointerout`,s&&n!==dn&&(u=n.relatedTarget||n.fromElement)&&(Et(u)||u[yt]))break a;if((c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(u=n.relatedTarget||n.toElement,c=r,u=u?Et(u):null,u!==null&&(f=l(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(c=null,u=r),c!==u)){if(d=Rn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Xn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=c==null?s:Ot(c),h=u==null?s:Ot(u),s=new d(g,m+`leave`,c,n,i),s.target=f,s.relatedTarget=h,g=null,Et(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,c&&u)b:{for(d=Md,p=c,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;c!==null&&Nd(o,s,c,d,!1),u!==null&&f!==null&&Nd(o,f,u,d,!0)}}a:{if(s=r?Ot(r):window,c=s.nodeName&&s.nodeName.toLowerCase(),c===`select`||c===`input`&&s.type===`file`)var v=br;else if(mr(s))if(xr)v=Ar;else{v=Or;var y=Dr}else c=s.nodeName,!c||c.toLowerCase()!==`input`||s.type!==`checkbox`&&s.type!==`radio`?r&&on(r.elementType)&&(v=br):v=kr;if(v&&=v(e,r)){hr(o,v,n,i);break a}y&&y(e,s,r),e===`focusout`&&r&&s.type===`number`&&r.memoizedProps.value!=null&&Zt(s,`number`,s.value)}switch(y=r?Ot(r):window,e){case`focusin`:(mr(y)||y.contentEditable===`true`)&&(Br=y,Vr=r,Hr=null);break;case`focusout`:Hr=Vr=Br=null;break;case`mousedown`:Ur=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Ur=!1,Wr(o,n,i);break;case`selectionchange`:if(zr)break;case`keydown`:case`keyup`:Wr(o,n,i)}var b;if(nr)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else ur?cr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(ar&&n.locale!==`ko`&&(ur||x!==`onCompositionStart`?x===`onCompositionEnd`&&ur&&(b=Tn()):(Sn=i,Cn=`value`in Sn?Sn.value:Sn.textContent,ur=!0)),y=jd(r,x),0<y.length&&(x=new Un(x,e,null,n,i),o.push({event:x,listeners:y}),b?x.data=b:(b=lr(n),b!==null&&(x.data=b)))),(b=ir?dr(e,n):fr(e,n))&&(x=jd(r,`onBeforeInput`),0<x.length&&(y=new Un(`onBeforeInput`,`beforeinput`,null,n,i),o.push({event:y,listeners:x}),y.data=b)),yd(o,e,r,n,i)}wd(o,t)})}function Ad(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=vn(e,n),i!=null&&r.unshift(Ad(e,i,a)),i=vn(e,t),i!=null&&r.push(Ad(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Md(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Nd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=vn(n,a),l!=null&&o.unshift(Ad(n,l,c))):i||(l=vn(n,a),l!=null&&o.push(Ad(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Pd=/\r\n?/g,Fd=/\u0000|\uFFFD/g;function Id(e){return(typeof e==`string`?e:``+e).replace(Pd,`
`).replace(Fd,``)}function Ld(e,t){return t=Id(t),Id(e)===t}function Rd(e,t,n,r,i,a){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||tn(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&tn(e,``+r);break;case`className`:Bt(e,`class`,r);break;case`tabIndex`:Bt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Bt(e,n,r);break;case`style`:an(e,r,a);break;case`data`:if(t!==`object`){Bt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=ln(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof a==`function`&&(n===`formAction`?(t!==`input`&&Rd(e,t,`name`,i.name,i,null),Rd(e,t,`formEncType`,i.formEncType,i,null),Rd(e,t,`formMethod`,i.formMethod,i,null),Rd(e,t,`formTarget`,i.formTarget,i,null)):(Rd(e,t,`encType`,i.encType,i,null),Rd(e,t,`method`,i.method,i,null),Rd(e,t,`target`,i.target,i,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=ln(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=un);break;case`onScroll`:r!=null&&q(`scroll`,e);break;case`onScrollEnd`:r!=null&&q(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=ln(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:q(`beforetoggle`,e),q(`toggle`,e),zt(e,`popover`,r);break;case`xlinkActuate`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:zt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=sn.get(n)||n,zt(e,n,r))}}function zd(e,t,n,r,i,a){switch(n){case`style`:an(e,r,a);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?tn(e,r):(typeof r==`number`||typeof r==`bigint`)&&tn(e,``+r);break;case`onScroll`:r!=null&&q(`scroll`,e);break;case`onScrollEnd`:r!=null&&q(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=un);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Mt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(i=n.endsWith(`Capture`),t=n.slice(2,i?n.length-7:void 0),a=e[vt]||null,a=a==null?null:a[n],typeof a==`function`&&e.removeEventListener(t,a,i),typeof r==`function`)){typeof a!=`function`&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):zt(e,n,r)}}}function Bd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:q(`error`,e),q(`load`,e);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o!=null)switch(a){case`src`:r=!0;break;case`srcSet`:i=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:Rd(e,t,a,o,n,null)}}i&&Rd(e,t,`srcSet`,n.srcSet,n,null),r&&Rd(e,t,`src`,n.src,n,null);return;case`input`:q(`invalid`,e);var c=a=o=i=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:i=d;break;case`type`:o=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:a=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(s(137,t));break;default:Rd(e,t,r,d,n,null)}}Xt(e,a,c,l,u,o,i,!1);return;case`select`:for(i in q(`invalid`,e),r=o=a=null,n)if(n.hasOwnProperty(i)&&(c=n[i],c!=null))switch(i){case`value`:a=c;break;case`defaultValue`:o=c;break;case`multiple`:r=c;default:Rd(e,t,i,c,n,null)}t=a,n=o,e.multiple=!!r,t==null?n!=null&&Qt(e,!!r,n,!0):Qt(e,!!r,t,!1);return;case`textarea`:for(o in q(`invalid`,e),a=i=r=null,n)if(n.hasOwnProperty(o)&&(c=n[o],c!=null))switch(o){case`value`:r=c;break;case`defaultValue`:i=c;break;case`children`:a=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(s(91));break;default:Rd(e,t,o,c,n,null)}en(e,r,i,a);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Rd(e,t,l,r,n,null)}return;case`dialog`:q(`beforetoggle`,e),q(`toggle`,e),q(`cancel`,e),q(`close`,e);break;case`iframe`:case`object`:q(`load`,e);break;case`video`:case`audio`:for(r=0;r<Sd.length;r++)q(Sd[r],e);break;case`image`:q(`error`,e),q(`load`,e);break;case`details`:q(`toggle`,e);break;case`embed`:case`source`:case`link`:q(`error`,e),q(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:Rd(e,t,u,r,n,null)}return;default:if(on(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&zd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Rd(e,t,c,r,n,null))}function Vd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var i=null,a=null,o=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Rd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:a=m;break;case`name`:i=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:o=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(s(137,t));break;default:m!==f&&Rd(e,t,p,m,r,f)}}Yt(e,o,c,l,u,d,a,i);return;case`select`:for(a in m=o=c=p=null,n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(a)||Rd(e,t,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case`value`:p=a;break;case`defaultValue`:c=a;break;case`multiple`:o=a;default:a!==l&&Rd(e,t,i,a,r,l)}t=c,n=o,r=m,p==null?!!r!=!!n&&(t==null?Qt(e,!!n,n?[]:``,!1):Qt(e,!!n,t,!0)):Qt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(i=n[c],n.hasOwnProperty(c)&&i!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Rd(e,t,c,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(i!=null||a!=null))switch(o){case`value`:p=i;break;case`defaultValue`:m=i;break;case`children`:break;case`dangerouslySetInnerHTML`:if(i!=null)throw Error(s(91));break;default:i!==a&&Rd(e,t,o,i,r,a)}$t(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Rd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Rd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Rd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(s(137,t));break;default:Rd(e,t,u,p,r,m)}return;default:if(on(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&zd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||zd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Rd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Rd(e,t,f,p,r,m)}function Hd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Ud(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Hd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Hd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Wd=null,Gd=null;function Kd(e){return e.nodeType===9?e:e.ownerDocument}function qd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Jd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Yd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xd=null;function Zd(){var e=window.event;return e&&e.type===`popstate`?e===Xd?!1:(Xd=e,!0):(Xd=null,!1)}var Qd=typeof setTimeout==`function`?setTimeout:void 0,$d=typeof clearTimeout==`function`?clearTimeout:void 0,ef=typeof Promise==`function`?Promise:void 0,tf=typeof queueMicrotask==`function`?queueMicrotask:ef===void 0?Qd:function(e){return ef.resolve(null).then(e).catch(nf)};function nf(e){setTimeout(function(){throw e})}function rf(e){return e===`head`}function af(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),zp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)yf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,yf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[wt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&yf(e.ownerDocument.body);n=i}while(n);zp(t)}function of(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function sf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:sf(n),Tt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function cf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[wt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=mf(e.nextSibling),e===null)break}return null}function lf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=mf(e.nextSibling),e===null))return null;return e}function uf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=mf(e.nextSibling),e===null))return null;return e}function df(e){return e.data===`$?`||e.data===`$~`}function ff(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function pf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function mf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var hf=null;function gf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return mf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function _f(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function vf(e,t,n){switch(t=Kd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(s(452));return e;case`head`:if(e=t.head,!e)throw Error(s(453));return e;case`body`:if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function yf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Tt(e)}var bf=new Map,xf=new Set;function Sf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Cf=E.d;E.d={f:wf,r:Tf,D:Of,C:kf,L:Af,m:jf,X:Nf,S:Mf,M:Pf};function wf(){var e=Cf.f(),t=wu();return e||t}function Tf(e){var t=Dt(e);t!==null&&t.tag===5&&t.type===`form`?Os(t):Cf.r(e)}var Ef=typeof document>`u`?null:document;function Df(e,t,n){var r=Ef;if(r&&typeof t==`string`&&t){var i=Jt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),xf.has(i)||(xf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Bd(t,`link`,e),At(t),r.head.appendChild(t)))}}function Of(e){Cf.D(e),Df(`dns-prefetch`,e,null)}function kf(e,t){Cf.C(e,t),Df(`preconnect`,e,t)}function Af(e,t,n){Cf.L(e,t,n);var r=Ef;if(r&&e&&t){var i=`link[rel="preload"][as="`+Jt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Jt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Jt(n.imageSizes)+`"]`)):i+=`[href="`+Jt(e)+`"]`;var a=i;switch(t){case`style`:a=If(e);break;case`script`:a=Bf(e)}bf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),bf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Lf(a))||t===`script`&&r.querySelector(Vf(a))||(t=r.createElement(`link`),Bd(t,`link`,e),At(t),r.head.appendChild(t)))}}function jf(e,t){Cf.m(e,t);var n=Ef;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Jt(r)+`"][href="`+Jt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Bf(e)}if(!bf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),bf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Vf(a)))return}r=n.createElement(`link`),Bd(r,`link`,e),At(r),n.head.appendChild(r)}}}function Mf(e,t,n){Cf.S(e,t,n);var r=Ef;if(r&&e){var i=kt(r).hoistableStyles,a=If(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Lf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=bf.get(a))&&Wf(e,n);var c=o=r.createElement(`link`);At(c),Bd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Uf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Nf(e,t){Cf.X(e,t);var n=Ef;if(n&&e){var r=kt(n).hoistableScripts,i=Bf(e),a=r.get(i);a||(a=n.querySelector(Vf(i)),a||(e=h({src:e,async:!0},t),(t=bf.get(i))&&Gf(e,t),a=n.createElement(`script`),At(a),Bd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Pf(e,t){Cf.M(e,t);var n=Ef;if(n&&e){var r=kt(n).hoistableScripts,i=Bf(e),a=r.get(i);a||(a=n.querySelector(Vf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=bf.get(i))&&Gf(e,t),a=n.createElement(`script`),At(a),Bd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Ff(e,t,n,r){var i=(i=ye.current)?Sf(i):null;if(!i)throw Error(s(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=If(n.href),n=kt(i).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=If(n.href);var a=kt(i).hoistableStyles,o=a.get(e);if(o||(i=i.ownerDocument||i,o={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},a.set(e,o),(a=i.querySelector(Lf(e)))&&!a._p&&(o.instance=a,o.state.loading=5),bf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},bf.set(e,n),a||zf(i,e,n,o.state))),t&&r===null)throw Error(s(528,``));return o}if(t&&r!==null)throw Error(s(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Bf(n),n=kt(i).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(s(444,e))}}function If(e){return`href="`+Jt(e)+`"`}function Lf(e){return`link[rel="stylesheet"][`+e+`]`}function Rf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function zf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Bd(t,`link`,n),At(t),e.head.appendChild(t))}function Bf(e){return`[src="`+Jt(e)+`"]`}function Vf(e){return`script[async]`+e}function Hf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Jt(n.href)+`"]`);if(r)return t.instance=r,At(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),At(r),Bd(r,`style`,i),Uf(r,n.precedence,e),t.instance=r;case`stylesheet`:i=If(n.href);var a=e.querySelector(Lf(i));if(a)return t.state.loading|=4,t.instance=a,At(a),a;r=Rf(n),(i=bf.get(i))&&Wf(r,i),a=(e.ownerDocument||e).createElement(`link`),At(a);var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Bd(a,`link`,r),t.state.loading|=4,Uf(a,n.precedence,e),t.instance=a;case`script`:return a=Bf(n.src),(i=e.querySelector(Vf(a)))?(t.instance=i,At(i),i):(r=n,(i=bf.get(a))&&(r=h({},n),Gf(r,i)),e=e.ownerDocument||e,i=e.createElement(`script`),At(i),Bd(i,`link`,r),e.head.appendChild(i),t.instance=i);case`void`:return null;default:throw Error(s(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Uf(r,n.precedence,e));return t.instance}function Uf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Wf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Gf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Kf=null;function qf(e,t,n){if(Kf===null){var r=new Map,i=Kf=new Map;i.set(n,r)}else i=Kf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[wt]||a[_t]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Jf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Yf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Xf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Zf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=If(r.href),a=t.querySelector(Lf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=ep.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,At(a);return}a=t.ownerDocument||t,r=Rf(r),(i=bf.get(i))&&Wf(r,i),a=a.createElement(`link`),At(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Bd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=ep.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Qf=0;function $f(e,t){return e.stylesheets&&e.count===0&&np(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&np(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Qf===0&&(Qf=62500*Ud());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&np(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Qf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function ep(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)np(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tp=null;function np(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tp=new Map,t.forEach(rp,e),tp=null,ep.call(e))}function rp(e,t){if(!(t.state.loading&4)){var n=tp.get(e);if(n)var r=n.get(null);else{n=new Map,tp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=ep.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var ip={$$typeof:C,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function ap(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ot(0),this.hiddenUpdates=ot(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function op(e,t,n,r,i,a,o,s,c,l,u,d){return e=new ap(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=vi(3,null,null,t),e.current=a,a.stateNode=e,t=va(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ga(a),e}function sp(e){return e?(e=gi,e):gi}function cp(e,t,n,r,i,a){i=sp(i),r.context===null?r.context=i:r.pendingContext=i,r=qa(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ja(e,r,t),n!==null&&(yu(n,e,t),I(n,e,t))}function lp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function up(e,t){lp(e,t),(e=e.alternate)&&lp(e,t)}function dp(e){if(e.tag===13||e.tag===31){var t=pi(e,67108864);t!==null&&yu(t,e,67108864),up(e,67108864)}}function fp(e){if(e.tag===13||e.tag===31){var t=_u();t=ft(t);var n=pi(e,t);n!==null&&yu(n,e,t),up(e,t)}}var pp=!0;function mp(e,t,n,r){var i=T.T;T.T=null;var a=E.p;try{E.p=2,gp(e,t,n,r)}finally{E.p=a,T.T=i}}function hp(e,t,n,r){var i=T.T;T.T=null;var a=E.p;try{E.p=8,gp(e,t,n,r)}finally{E.p=a,T.T=i}}function gp(e,t,n,r){if(pp){var i=_p(r);if(i===null)kd(e,t,r,vp,n),kp(e,r);else if(jp(i,e,t,n,r))r.stopPropagation();else if(kp(e,r),t&4&&-1<Op.indexOf(e)){for(;i!==null;){var a=Dt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=nt(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ye(o);s.entanglements[1]|=c,o&=~c}cd(a),!(W&6)&&(au=Le()+500,ld(0,!1))}}break;case 31:case 13:s=pi(a,2),s!==null&&yu(s,a,2),wu(),up(a,2)}if(a=_p(r),a===null&&kd(e,t,r,vp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else kd(e,t,r,null,n)}}function _p(e){return e=fn(e),yp(e)}var vp=null;function yp(e){if(vp=null,e=Et(e),e!==null){var t=l(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=u(t),e!==null)return e;e=null}else if(n===31){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return vp=e,null}function bp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Re()){case ze:return 2;case Be:return 8;case Ve:case He:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var xp=!1,Sp=null,Cp=null,wp=null,Tp=new Map,Ep=new Map,Dp=[],Op=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function kp(e,t){switch(e){case`focusin`:case`focusout`:Sp=null;break;case`dragenter`:case`dragleave`:Cp=null;break;case`mouseover`:case`mouseout`:wp=null;break;case`pointerover`:case`pointerout`:Tp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Ep.delete(t.pointerId)}}function Ap(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Dt(t),t!==null&&dp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function jp(e,t,n,r,i){switch(t){case`focusin`:return Sp=Ap(Sp,e,t,n,r,i),!0;case`dragenter`:return Cp=Ap(Cp,e,t,n,r,i),!0;case`mouseover`:return wp=Ap(wp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Tp.set(a,Ap(Tp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Ep.set(a,Ap(Ep.get(a)||null,e,t,n,r,i)),!0}return!1}function Mp(e){var t=Et(e.target);if(t!==null){var n=l(t);if(n!==null){if(t=n.tag,t===13){if(t=u(n),t!==null){e.blockedOn=t,ht(e.priority,function(){fp(n)});return}}else if(t===31){if(t=d(n),t!==null){e.blockedOn=t,ht(e.priority,function(){fp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Np(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_p(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dn=r,n.target.dispatchEvent(r),dn=null}else return t=Dt(n),t!==null&&dp(t),e.blockedOn=n,!1;t.shift()}return!0}function Pp(e,t,n){Np(e)&&n.delete(t)}function Fp(){xp=!1,Sp!==null&&Np(Sp)&&(Sp=null),Cp!==null&&Np(Cp)&&(Cp=null),wp!==null&&Np(wp)&&(wp=null),Tp.forEach(Pp),Ep.forEach(Pp)}function Ip(e,n){e.blockedOn===n&&(e.blockedOn=null,xp||(xp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Fp)))}var Lp=null;function Rp(e){Lp!==e&&(Lp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lp===e&&(Lp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(yp(r||n)===null)continue;break}var a=Dt(n);a!==null&&(e.splice(t,3),t-=3,Es(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function zp(e){function t(t){return Ip(t,e)}Sp!==null&&Ip(Sp,e),Cp!==null&&Ip(Cp,e),wp!==null&&Ip(wp,e),Tp.forEach(t),Ep.forEach(t);for(var n=0;n<Dp.length;n++){var r=Dp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dp.length&&(n=Dp[0],n.blockedOn===null);)Mp(n),n.blockedOn===null&&Dp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[vt]||null;if(typeof a==`function`)o||Rp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[vt]||null)s=o.formAction;else if(yp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Rp(n)}}}function Bp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Vp(e){this._internalRoot=e}Hp.prototype.render=Vp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current;cp(n,_u(),e,t,null,null)},Hp.prototype.unmount=Vp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cp(e.current,2,null,e,null,null),wu(),t[yt]=null}};function Hp(e){this._internalRoot=e}Hp.prototype.unstable_scheduleHydration=function(e){if(e){var t=mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dp.length&&t!==0&&t<Dp[n].priority;n++);Dp.splice(n,0,e),n===0&&Mp(e)}};var Up=r.version;if(Up!==`19.2.0`)throw Error(s(527,Up,`19.2.0`));E.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(s(188)):(e=Object.keys(e).join(`,`),Error(s(268,e)));return e=p(t),e=e===null?null:m(e),e=e===null?null:e.stateNode,e};var Wp={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:T,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Gp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gp.isDisabled&&Gp.supportsFiber)try{Ke=Gp.inject(Wp),qe=Gp}catch{}}e.createRoot=function(e,t){if(!c(e))throw Error(s(299));var n=!1,r=``,i=Ys,a=Xs,o=Zs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=op(e,1,!1,null,null,n,r,null,i,a,o,Bp),e[yt]=t.current,Dd(e),new Vp(t)}})),c=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=s()}))(),l=n(),u=()=>void 0,d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},f=function(e,t){if(!e)throw p(t)},p=function(e){return Error(`Firebase Database (`+d.SDK_VERSION+`) INTERNAL ASSERT FAILED: `+e)},m=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},h=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(m(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):h(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new _;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},_=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},v=function(e){let t=m(e);return g.encodeByteArray(t,!0)},y=function(e){return v(e).replace(/\./g,``)},b=function(e){try{return g.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function x(e){return S(void 0,e)}function S(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!C(n)||(e[n]=S(e[n],t[n]));return e}function C(e){return e!==`__proto__`}function w(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var ee=()=>w().__FIREBASE_DEFAULTS__,te=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ne=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&b(e[1]);return t&&JSON.parse(t)},re=()=>{try{return u()||ee()||te()||ne()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ie=e=>re()?.emulatorHosts?.[e],ae=e=>{let t=ie(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},oe=()=>re()?.config,se=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function ce(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function le(e){return(await fetch(e,{credentials:`include`})).ok}function ue(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[y(JSON.stringify(n)),y(JSON.stringify(o)),``].join(`.`)}var T={};function E(){let e={prod:[],emulator:[]};for(let t of Object.keys(T))T[t]?e.emulator.push(t):e.prod.push(t);return e}function de(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var fe=!1;function pe(e,t){if(typeof window>`u`||typeof document>`u`||!ce(window.location.host)||T[e]===t||T[e]||fe)return;T[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=E().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{fe=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=de(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function me(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function he(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function ge(){let e=re()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function _e(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function ve(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function ye(){return d.NODE_CLIENT===!0||d.NODE_ADMIN===!0}function be(){return!ge()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function xe(){try{return typeof indexedDB==`object`}catch{return!1}}function Se(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}function Ce(){return!(typeof navigator>`u`||!navigator.cookieEnabled)}var we=`FirebaseError`,Te=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=we,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ee.prototype.create)}},Ee=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?De(i,n):`Error`;return new Te(r,`${this.serviceName}: ${a} (${r}).`,n)}};function De(e,t){return e.replace(Oe,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Oe=/\{\$([^}]+)}/g;function ke(e){return JSON.parse(e)}function Ae(e){return JSON.stringify(e)}var je=function(e){let t={},n={},r={},i=``;try{let a=e.split(`.`);t=ke(b(a[0])||``),n=ke(b(a[1])||``),i=a[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},Me=function(e){let t=je(e).claims;return!!t&&typeof t==`object`&&t.hasOwnProperty(`iat`)},Ne=function(e){let t=je(e).claims;return typeof t==`object`&&t.admin===!0};function Pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fe(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ie(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Le(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Re(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(ze(n)&&ze(a)){if(!Re(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function ze(e){return typeof e==`object`&&!!e}function Be(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}var Ve=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||=0;let n=this.W_;if(typeof e==`string`)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=(t<<1|t>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],a=this.chain_[2],o=this.chain_[3],s=this.chain_[4],c,l;for(let e=0;e<80;e++){e<40?e<20?(c=o^i&(a^o),l=1518500249):(c=i^a^o,l=1859775393):e<60?(c=i&a|o&(i|a),l=2400959708):(c=i^a^o,l=3395469782);let t=(r<<5|r>>>27)+c+s+l+n[e]&4294967295;s=o,o=a,a=(i<<30|i>>>2)&4294967295,i=r,r=t}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+s&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;for(;r<t;){if(a===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e==`string`){for(;r<t;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}};function He(e,t){return`${e} failed: ${t} argument `}var Ue=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let t=i-55296;r++,f(r<e.length,`Surrogate pair missing trail surrogate.`);let n=e.charCodeAt(r)-56320;i=65536+(t<<10)+n}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},We=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Ge=1e3,Ke=2,qe=14400*1e3,Je=.5;function Ye(e,t=Ge,n=Ke){let r=t*n**+e,i=Math.round(Je*r*(Math.random()-.5)*2);return Math.min(qe,r+i)}function Xe(e){return e&&e._delegate?e._delegate:e}var Ze=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Qe=`[DEFAULT]`,$e=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new se;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(tt(e))try{this.getOrInitializeService({instanceIdentifier:Qe})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Qe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qe){return this.instances.has(e)}getOptions(e=Qe){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:et(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Qe){return this.component?this.component.multipleInstances?e:Qe:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function et(e){return e===Qe?void 0:e}function tt(e){return e.instantiationMode===`EAGER`}var nt=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $e(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},rt=[],D;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(D||={});var it={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},at=D.INFO,ot={[D.DEBUG]:`log`,[D.VERBOSE]:`log`,[D.INFO]:`info`,[D.WARN]:`warn`,[D.ERROR]:`error`},st=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=ot[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},ct=class{constructor(e){this.name=e,this._logLevel=at,this._logHandler=st,this._userLogHandler=null,rt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in D))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?it[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...e),this._logHandler(this,D.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...e),this._logHandler(this,D.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,D.INFO,...e),this._logHandler(this,D.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,D.WARN,...e),this._logHandler(this,D.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...e),this._logHandler(this,D.ERROR,...e)}},lt=(e,t)=>t.some(t=>e instanceof t),ut,dt;function ft(){return ut||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function pt(){return dt||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var mt=new WeakMap,ht=new WeakMap,gt=new WeakMap,_t=new WeakMap,vt=new WeakMap;function yt(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Tt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&mt.set(t,e)}).catch(()=>{}),vt.set(t,e),t}function bt(e){if(ht.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});ht.set(e,t)}var xt={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return ht.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||gt.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function St(e){xt=e(xt)}function Ct(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(Et(this),t,...n);return gt.set(r,t.sort?t.sort():[t]),Tt(r)}:pt().includes(e)?function(...t){return e.apply(Et(this),t),Tt(mt.get(this))}:function(...t){return Tt(e.apply(Et(this),t))}}function wt(e){return typeof e==`function`?Ct(e):(e instanceof IDBTransaction&&bt(e),lt(e,ft())?new Proxy(e,xt):e)}function Tt(e){if(e instanceof IDBRequest)return yt(e);if(_t.has(e))return _t.get(e);let t=wt(e);return t!==e&&(_t.set(e,t),vt.set(t,e)),t}var Et=e=>vt.get(e);function Dt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Tt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Tt(o.result),e.oldVersion,e.newVersion,Tt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}function Ot(e,{blocked:t}={}){let n=indexedDB.deleteDatabase(e);return t&&n.addEventListener(`blocked`,e=>t(e.oldVersion,e)),Tt(n).then(()=>void 0)}var kt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],At=[`put`,`add`,`delete`,`clear`],jt=new Map;function Mt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(jt.get(t))return jt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=At.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return jt.set(t,a),a}St(e=>({...e,get:(t,n,r)=>Mt(t,n)||e.get(t,n,r),has:(t,n)=>!!Mt(t,n)||e.has(t,n)}));var Nt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Pt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function Pt(e){return e.getComponent()?.type===`VERSION`}var Ft=`@firebase/app`,It=`0.14.6`,Lt=new ct(`@firebase/app`),Rt=`@firebase/app-compat`,zt=`@firebase/analytics-compat`,Bt=`@firebase/analytics`,Vt=`@firebase/app-check-compat`,O=`@firebase/app-check`,Ht=`@firebase/auth`,Ut=`@firebase/auth-compat`,Wt=`@firebase/database`,Gt=`@firebase/data-connect`,Kt=`@firebase/database-compat`,qt=`@firebase/functions`,Jt=`@firebase/functions-compat`,Yt=`@firebase/installations`,Xt=`@firebase/installations-compat`,Zt=`@firebase/messaging`,Qt=`@firebase/messaging-compat`,$t=`@firebase/performance`,en=`@firebase/performance-compat`,tn=`@firebase/remote-config`,nn=`@firebase/remote-config-compat`,rn=`@firebase/storage`,an=`@firebase/storage-compat`,on=`@firebase/firestore`,sn=`@firebase/ai`,cn=`@firebase/firestore-compat`,ln=`firebase`,un=`12.6.0`,dn=`[DEFAULT]`,fn={[Ft]:`fire-core`,[Rt]:`fire-core-compat`,[Bt]:`fire-analytics`,[zt]:`fire-analytics-compat`,[O]:`fire-app-check`,[Vt]:`fire-app-check-compat`,[Ht]:`fire-auth`,[Ut]:`fire-auth-compat`,[Wt]:`fire-rtdb`,[Gt]:`fire-data-connect`,[Kt]:`fire-rtdb-compat`,[qt]:`fire-fn`,[Jt]:`fire-fn-compat`,[Yt]:`fire-iid`,[Xt]:`fire-iid-compat`,[Zt]:`fire-fcm`,[Qt]:`fire-fcm-compat`,[$t]:`fire-perf`,[en]:`fire-perf-compat`,[tn]:`fire-rc`,[nn]:`fire-rc-compat`,[rn]:`fire-gcs`,[an]:`fire-gcs-compat`,[on]:`fire-fst`,[cn]:`fire-fst-compat`,[sn]:`fire-vertex`,"fire-js":`fire-js`,[ln]:`fire-js-all`},pn=new Map,mn=new Map,hn=new Map;function gn(e,t){try{e.container.addComponent(t)}catch(n){Lt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _n(e){let t=e.name;if(hn.has(t))return Lt.debug(`There were multiple attempts to register component ${t}.`),!1;hn.set(t,e);for(let t of pn.values())gn(t,e);for(let t of mn.values())gn(t,e);return!0}function vn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yn(e){return e==null?!1:e.settings!==void 0}var bn=new Ee(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),xn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ze(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create(`app-deleted`,{appName:this._name})}},Sn=un;function Cn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:dn,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw bn.create(`bad-app-name`,{appName:String(i)});if(n||=oe(),!n)throw bn.create(`no-options`);let a=pn.get(i);if(a){if(Re(n,a.options)&&Re(r,a.config))return a;throw bn.create(`duplicate-app`,{appName:i})}let o=new nt(i);for(let e of hn.values())o.addComponent(e);let s=new xn(n,r,o);return pn.set(i,s),s}function wn(e=dn){let t=pn.get(e);if(!t&&e===`[DEFAULT]`&&oe())return Cn();if(!t)throw bn.create(`no-app`,{appName:e});return t}function Tn(e,t,n){let r=fn[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Lt.warn(e.join(` `));return}_n(new Ze(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var En=`firebase-heartbeat-database`,Dn=1,On=`firebase-heartbeat-store`,kn=null;function An(){return kn||=Dt(En,Dn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(On)}catch(e){console.warn(e)}}}}).catch(e=>{throw bn.create(`idb-open`,{originalErrorMessage:e.message})}),kn}async function jn(e){try{let t=(await An()).transaction(On),n=await t.objectStore(On).get(Nn(e));return await t.done,n}catch(e){if(e instanceof Te)Lt.warn(e.message);else{let t=bn.create(`idb-get`,{originalErrorMessage:e?.message});Lt.warn(t.message)}}}async function Mn(e,t){try{let n=(await An()).transaction(On,`readwrite`);await n.objectStore(On).put(t,Nn(e)),await n.done}catch(e){if(e instanceof Te)Lt.warn(e.message);else{let t=bn.create(`idb-set`,{originalErrorMessage:e?.message});Lt.warn(t.message)}}}function Nn(e){return`${e.name}!${e.options.appId}`}var Pn=1024,Fn=30,In=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new zn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Ln();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Fn){let e=Vn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Lt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Ln(),{heartbeatsToSend:t,unsentEntries:n}=Rn(this._heartbeatsCache.heartbeats),r=y(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Lt.warn(e),``}}};function Ln(){return new Date().toISOString().substring(0,10)}function Rn(e,t=Pn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Bn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var zn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xe()?Se().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await jn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Mn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Mn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Bn(e){return y(JSON.stringify({version:2,heartbeats:e})).length}function Vn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Hn(e){_n(new Ze(`platform-logger`,e=>new Nt(e),`PRIVATE`)),_n(new Ze(`heartbeat`,e=>new In(e),`PRIVATE`)),Tn(Ft,It,e),Tn(Ft,It,`esm2020`),Tn(`fire-js`,``)}Hn(``),Tn(`firebase`,`12.6.0`,`app`);var Un=`@firebase/installations`,Wn=`0.6.19`,Gn=1e4,Kn=`w:${Wn}`,qn=`FIS_v2`,Jn=`https://firebaseinstallations.googleapis.com/v1`,Yn=3600*1e3,Xn=new Ee(`installations`,`Installations`,{"missing-app-config-values":`Missing App configuration value: "{$valueName}"`,"not-registered":`Firebase Installation is not registered.`,"installation-not-found":`Firebase Installation not found.`,"request-failed":`{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"`,"app-offline":`Could not process request. Application offline.`,"delete-pending-registration":`Can't delete installation while there is a pending registration request.`});function Zn(e){return e instanceof Te&&e.code.includes(`request-failed`)}function Qn({projectId:e}){return`${Jn}/projects/${e}/installations`}function $n(e){return{token:e.token,requestStatus:2,expiresIn:ir(e.expiresIn),creationTime:Date.now()}}async function er(e,t){let n=(await t.json()).error;return Xn.create(`request-failed`,{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function tr({apiKey:e}){return new Headers({"Content-Type":`application/json`,Accept:`application/json`,"x-goog-api-key":e})}function nr(e,{refreshToken:t}){let n=tr(e);return n.append(`Authorization`,ar(t)),n}async function rr(e){let t=await e();return t.status>=500&&t.status<600?e():t}function ir(e){return Number(e.replace(`s`,`000`))}function ar(e){return`${qn} ${e}`}async function or({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let r=Qn(e),i=tr(e),a=t.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&i.append(`x-firebase-client`,e)}let o={fid:n,authVersion:qn,appId:e.appId,sdkVersion:Kn},s={method:`POST`,headers:i,body:JSON.stringify(o)},c=await rr(()=>fetch(r,s));if(c.ok){let e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:$n(e.authToken)}}else throw await er(`Create Installation`,c)}function sr(e){return new Promise(t=>{setTimeout(t,e)})}function cr(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,`-`).replace(/\//g,`_`)}var lr=/^[cdef][\w-]{21}$/,ur=``;function dr(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let t=fr(e);return lr.test(t)?t:ur}catch{return ur}}function fr(e){return cr(e).substr(0,22)}function pr(e){return`${e.appName}!${e.appId}`}var mr=new Map;function hr(e,t){let n=pr(e);gr(n,t),_r(n,t)}function gr(e,t){let n=mr.get(e);if(n)for(let e of n)e(t)}function _r(e,t){let n=yr();n&&n.postMessage({key:e,fid:t}),br()}var vr=null;function yr(){return!vr&&`BroadcastChannel`in self&&(vr=new BroadcastChannel(`[Firebase] FID Change`),vr.onmessage=e=>{gr(e.data.key,e.data.fid)}),vr}function br(){mr.size===0&&vr&&(vr.close(),vr=null)}var xr=`firebase-installations-database`,Sr=1,Cr=`firebase-installations-store`,wr=null;function Tr(){return wr||=Dt(xr,Sr,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Cr)}}}),wr}async function Er(e,t){let n=pr(e),r=(await Tr()).transaction(Cr,`readwrite`),i=r.objectStore(Cr),a=await i.get(n);return await i.put(t,n),await r.done,(!a||a.fid!==t.fid)&&hr(e,t.fid),t}async function Dr(e){let t=pr(e),n=(await Tr()).transaction(Cr,`readwrite`);await n.objectStore(Cr).delete(t),await n.done}async function Or(e,t){let n=pr(e),r=(await Tr()).transaction(Cr,`readwrite`),i=r.objectStore(Cr),a=await i.get(n),o=t(a);return o===void 0?await i.delete(n):await i.put(o,n),await r.done,o&&(!a||a.fid!==o.fid)&&hr(e,o.fid),o}async function kr(e){let t,n=await Or(e.appConfig,n=>{let r=jr(e,Ar(n));return t=r.registrationPromise,r.installationEntry});return n.fid===ur?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function Ar(e){return Fr(e||{fid:dr(),registrationStatus:0})}function jr(e,t){if(t.registrationStatus===0){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Xn.create(`app-offline`))};let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:Mr(e,n)}}else if(t.registrationStatus===1)return{installationEntry:t,registrationPromise:Nr(e)};else return{installationEntry:t}}async function Mr(e,t){try{let n=await or(e,t);return Er(e.appConfig,n)}catch(n){throw Zn(n)&&n.customData.serverCode===409?await Dr(e.appConfig):await Er(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function Nr(e){let t=await Pr(e.appConfig);for(;t.registrationStatus===1;)await sr(100),t=await Pr(e.appConfig);if(t.registrationStatus===0){let{installationEntry:t,registrationPromise:n}=await kr(e);return n||t}return t}function Pr(e){return Or(e,e=>{if(!e)throw Xn.create(`installation-not-found`);return Fr(e)})}function Fr(e){return Ir(e)?{fid:e.fid,registrationStatus:0}:e}function Ir(e){return e.registrationStatus===1&&e.registrationTime+Gn<Date.now()}async function Lr({appConfig:e,heartbeatServiceProvider:t},n){let r=Rr(e,n),i=nr(e,n),a=t.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&i.append(`x-firebase-client`,e)}let o={installation:{sdkVersion:Kn,appId:e.appId}},s={method:`POST`,headers:i,body:JSON.stringify(o)},c=await rr(()=>fetch(r,s));if(c.ok)return $n(await c.json());throw await er(`Generate Auth Token`,c)}function Rr(e,{fid:t}){return`${Qn(e)}/${t}/authTokens:generate`}async function zr(e,t=!1){let n,r=await Or(e.appConfig,r=>{if(!Ur(r))throw Xn.create(`not-registered`);let i=r.authToken;if(!t&&Wr(i))return r;if(i.requestStatus===1)return n=Br(e,t),r;{if(!navigator.onLine)throw Xn.create(`app-offline`);let t=Kr(r);return n=Hr(e,t),t}});return n?await n:r.authToken}async function Br(e,t){let n=await Vr(e.appConfig);for(;n.authToken.requestStatus===1;)await sr(100),n=await Vr(e.appConfig);let r=n.authToken;return r.requestStatus===0?zr(e,t):r}function Vr(e){return Or(e,e=>{if(!Ur(e))throw Xn.create(`not-registered`);let t=e.authToken;return qr(t)?{...e,authToken:{requestStatus:0}}:e})}async function Hr(e,t){try{let n=await Lr(e,t),r={...t,authToken:n};return await Er(e.appConfig,r),n}catch(n){if(Zn(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Dr(e.appConfig);else{let n={...t,authToken:{requestStatus:0}};await Er(e.appConfig,n)}throw n}}function Ur(e){return e!==void 0&&e.registrationStatus===2}function Wr(e){return e.requestStatus===2&&!Gr(e)}function Gr(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Yn}function Kr(e){let t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function qr(e){return e.requestStatus===1&&e.requestTime+Gn<Date.now()}async function Jr(e){let t=e,{installationEntry:n,registrationPromise:r}=await kr(t);return r?r.catch(console.error):zr(t).catch(console.error),n.fid}async function Yr(e,t=!1){let n=e;return await Xr(n),(await zr(n,t)).token}async function Xr(e){let{registrationPromise:t}=await kr(e);t&&await t}function Zr(e){if(!e||!e.options)throw Qr(`App Configuration`);if(!e.name)throw Qr(`App Name`);for(let t of[`projectId`,`apiKey`,`appId`])if(!e.options[t])throw Qr(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Qr(e){return Xn.create(`missing-app-config-values`,{valueName:e})}var $r=`installations`,ei=`installations-internal`,ti=e=>{let t=e.getProvider(`app`).getImmediate();return{app:t,appConfig:Zr(t),heartbeatServiceProvider:vn(t,`heartbeat`),_delete:()=>Promise.resolve()}},ni=e=>{let t=vn(e.getProvider(`app`).getImmediate(),$r).getImmediate();return{getId:()=>Jr(t),getToken:e=>Yr(t,e)}};function ri(){_n(new Ze($r,ti,`PUBLIC`)),_n(new Ze(ei,ni,`PRIVATE`))}ri(),Tn(Un,Wn),Tn(Un,Wn,`esm2020`);var ii=`analytics`,ai=`firebase_id`,oi=`origin`,si=60*1e3,ci=`https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig`,li=`https://www.googletagmanager.com/gtag/js`,ui=new ct(`@firebase/analytics`),di=new Ee(`analytics`,`Analytics`,{"already-exists":`A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.`,"already-initialized":`initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.`,"already-initialized-settings":`Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.`,"interop-component-reg-failed":`Firebase Analytics Interop Component failed to instantiate: {$reason}`,"invalid-analytics-context":`Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,"indexeddb-unavailable":`IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,"fetch-throttle":`The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.`,"config-fetch-failed":`Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}`,"no-api-key":`The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.`,"no-app-id":`The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.`,"no-client-id":`The "client_id" field is empty.`,"invalid-gtag-resource":`Trusted Types detected an invalid gtag resource: {$gtagURL}.`});function fi(e){if(!e.startsWith(li)){let t=di.create(`invalid-gtag-resource`,{gtagURL:e});return ui.warn(t.message),``}return e}function pi(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function mi(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function hi(e,t){let n=mi(`firebase-js-sdk-policy`,{createScriptURL:fi}),r=document.createElement(`script`),i=`${li}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function gi(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function _i(e,t,n,r,i,a){let o=r[i];try{if(o)await t[o];else{let e=(await pi(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(e){ui.error(e)}e(`config`,i,a)}async function vi(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);let r=await pi(n);for(let n of e){let e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(i)a.push(i);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e(`event`,r,i||{})}catch(e){ui.error(e)}}function yi(e,t,n,r){async function i(i,...a){try{if(i===`event`){let[r,i]=a;await vi(e,t,n,r,i)}else if(i===`config`){let[i,o]=a;await _i(e,t,n,r,i,o)}else if(i===`consent`){let[t,n]=a;e(`consent`,t,n)}else if(i===`get`){let[t,n,r]=a;e(`get`,t,n,r)}else if(i===`set`){let[t]=a;e(`set`,t)}else e(i,...a)}catch(e){ui.error(e)}}return i}function bi(e,t,n,r,i){let a=function(...e){window[r].push(arguments)};return window[i]&&typeof window[i]==`function`&&(a=window[i]),window[i]=yi(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function xi(e){let t=window.document.getElementsByTagName(`script`);for(let n of Object.values(t))if(n.src&&n.src.includes(li)&&n.src.includes(e))return n;return null}var Si=30,Ci=1e3,wi=new class{constructor(e={},t=Ci){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ti(e){return new Headers({Accept:`application/json`,"x-goog-api-key":e})}async function Ei(e){let{appId:t,apiKey:n}=e,r={method:`GET`,headers:Ti(n)},i=ci.replace(`{app-id}`,t),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let e=``;try{let t=await a.json();t.error?.message&&(e=t.error.message)}catch{}throw di.create(`config-fetch-failed`,{httpStatus:a.status,responseMessage:e})}return a.json()}async function Di(e,t=wi,n){let{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw di.create(`no-app-id`);if(!i){if(a)return{measurementId:a,appId:r};throw di.create(`no-api-key`)}let o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new ji;return setTimeout(async()=>{s.abort()},n===void 0?si:n),Oi({appId:r,apiKey:i,measurementId:a},o,s,t)}async function Oi(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=wi){let{appId:a,measurementId:o}=e;try{await ki(r,t)}catch(e){if(o)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:a,measurementId:o};throw e}try{let t=await Ei(e);return i.deleteThrottleMetadata(a),t}catch(t){let s=t;if(!Ai(s)){if(i.deleteThrottleMetadata(a),o)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${s?.message}]`),{appId:a,measurementId:o};throw t}let c=Number(s?.customData?.httpStatus)===503?Ye(n,i.intervalMillis,Si):Ye(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,l),ui.debug(`Calling attemptFetch again in ${c} millis`),Oi(e,l,r,i)}}function ki(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(a),r(di.create(`fetch-throttle`,{throttleEndTimeMillis:t}))})})}function Ai(e){if(!(e instanceof Te)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var ji=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}},Mi;async function Ni(e,t,n,r,i){if(i&&i.global){e(`event`,n,r);return}else{let i=await t;e(`event`,n,{...r,send_to:i})}}async function Pi(e,t,n,r){if(r&&r.global){let t={};for(let e of Object.keys(n))t[`user_properties.${e}`]=n[e];return e(`set`,t),Promise.resolve()}else e(`config`,await t,{update:!0,user_properties:n})}var Fi;function Ii(e){Fi=e}function Li(e){Mi=e}async function Ri(){if(xe())try{await Se()}catch(e){return ui.warn(di.create(`indexeddb-unavailable`,{errorInfo:e?.toString()}).message),!1}else return ui.warn(di.create(`indexeddb-unavailable`,{errorInfo:`IndexedDB is not available in this environment.`}).message),!1;return!0}async function zi(e,t,n,r,i,a,o){let s=Di(e);s.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>ui.error(e)),t.push(s);let c=Ri().then(e=>{if(e)return r.getId()}),[l,u]=await Promise.all([s,c]);xi(a)||hi(a,l.measurementId),Fi&&(i(`consent`,`default`,Fi),Ii(void 0)),i(`js`,new Date);let d=o?.config??{};return d[oi]=`firebase`,d.update=!0,u!=null&&(d[ai]=u),i(`config`,l.measurementId,d),Mi&&(i(`set`,Mi),Li(void 0)),l.measurementId}var Bi=class{constructor(e){this.app=e}_delete(){return delete Vi[this.app.options.appId],Promise.resolve()}},Vi={},Hi=[],Ui={},Wi=`dataLayer`,k=`gtag`,Gi,Ki,qi=!1;function Ji(){let e=[];if(_e()&&e.push(`This is a browser extension environment.`),Ce()||e.push(`Cookies are not available.`),e.length>0){let t=e.map((e,t)=>`(${t+1}) ${e}`).join(` `),n=di.create(`invalid-analytics-context`,{errorInfo:t});ui.warn(n.message)}}function Yi(e,t,n){Ji();let r=e.options.appId;if(!r)throw di.create(`no-app-id`);if(!e.options.apiKey)if(e.options.measurementId)ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw di.create(`no-api-key`);if(Vi[r]!=null)throw di.create(`already-exists`,{id:r});if(!qi){gi(Wi);let{wrappedGtag:e,gtagCore:t}=bi(Vi,Hi,Ui,Wi,k);Ki=e,Gi=t,qi=!0}return Vi[r]=zi(e,Hi,Ui,t,Gi,Wi,n),new Bi(e)}function Xi(e=wn()){e=Xe(e);let t=vn(e,ii);return t.isInitialized()?t.getImmediate():Zi(e)}function Zi(e,t={}){let n=vn(e,ii);if(n.isInitialized()){let e=n.getImmediate();if(Re(t,n.getOptions()))return e;throw di.create(`already-initialized`)}return n.initialize({options:t})}function Qi(e,t,n){e=Xe(e),Pi(Ki,Vi[e.app.options.appId],t,n).catch(e=>ui.error(e))}function $i(e,t,n,r){e=Xe(e),Ni(Ki,Vi[e.app.options.appId],t,n,r).catch(e=>ui.error(e))}var ea=`@firebase/analytics`,ta=`0.10.19`;function na(){_n(new Ze(ii,(e,{options:t})=>Yi(e.getProvider(`app`).getImmediate(),e.getProvider(`installations-internal`).getImmediate(),t),`PUBLIC`)),_n(new Ze(`analytics-internal`,e,`PRIVATE`)),Tn(ea,ta),Tn(ea,ta,`esm2020`);function e(e){try{let t=e.getProvider(ii).getImmediate();return{logEvent:(e,n,r)=>$i(t,e,n,r),setUserProperties:(e,n)=>Qi(t,e,n)}}catch(e){throw di.create(`interop-component-reg-failed`,{reason:e})}}}na();var ra=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},ia={},aa,oa;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oa=ia.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,aa=ia.Integer=o}).apply(ra===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:ra);var sa=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},ca={},la,ua,da,fa,pa,ma,ha,ga;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof sa==`object`&&sa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(ee)}};function ee(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ie(e){return/^[\s\xa0]*$/.test(e)}function ae(e,t){ne.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(ae,ne),ae.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var oe=`closure_listenable_`+(Math.random()*1e6|0),se=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++se,this.da=this.fa=!1}function le(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ue(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function T(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function E(e){let t={};for(let n in e)t[n]=e[n];return t}let de=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function fe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<de.length;t++)n=de[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function pe(e){this.src=e,this.g={},this.h=0}pe.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=he(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ce(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function me(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(le(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function he(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var ge=`closure_lm_`+(Math.random()*1e6|0),_e={};function ve(e,t,n,r,i){if(r&&r.once)return xe(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ve(e,t[a],n,r,i);return null}return n=Oe(n),e&&e[oe]?e.J(t,n,s(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=Ee(e);if(c||(e[ge]=c=new pe(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=be(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function be(){function e(n){return t.call(e.src,e.listener,n)}let t=Te;return e}function xe(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)xe(e,t[a],n,r,i);return null}return n=Oe(n),e&&e[oe]?e.K(t,n,s(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function Se(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Se(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=Oe(n),e&&e[oe]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=he(t,n,r,i),n>-1&&(le(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=Ee(e))&&(t=e.g[t.toString()],e=-1,t&&(e=he(t,n,r,i)),(n=e>-1?t[e]:null)&&Ce(n))}function Ce(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[oe])me(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(me(n,e),n.h==0&&(n.src=null,t[ge]=null)):le(e)}}}function we(e){return e in _e?_e[e]:_e[e]=`on`+e}function Te(e,t){if(e.da)e=!0;else{t=new ae(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&Ce(e),e=n.call(r,t)}return e}function Ee(e){return e=e[ge],e instanceof pe?e:null}var De=`__closure_events_fn_`+(Math.random()*1e9>>>0);function Oe(e){return typeof e==`function`?e:(e[De]||(e[De]=function(t){return e.handleEvent(t)}),e[De])}function ke(){te.call(this),this.i=new pe(this),this.M=this,this.G=null}d(ke,te),ke.prototype[oe]=!0,ke.prototype.removeEventListener=function(e,t,n,r){Se(this,e,t,n,r)};function Ae(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var i=t;t=new ne(r,e),fe(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=je(a,r,!0,t)&&i;if(a=t.g=e,i=je(a,r,!0,t)&&i,i=je(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=je(a,r,!1,t)&&i}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)le(n[e]);delete e.g[t],e.h--}}this.G=null},ke.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ke.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function je(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&me(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Me(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Ne(e){e.g=Me(()=>{e.g=null,e.i&&(e.i=!1,Ne(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Pe extends te{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(e){te.call(this),this.h=e,this.g={}}d(Fe,te);var Ie=[];function Le(e){ue(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ce(e)},e),e.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),Le(this)},Fe.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Re=o.JSON.stringify,ze=o.JSON.parse,Be=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Ve(){}function He(){}var Ue={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function We(){ne.call(this,`d`)}d(We,ne);function Ge(){ne.call(this,`c`)}d(Ge,ne);var Ke={},qe=null;function Je(){return qe||=new ke}Ke.Ia=`serverreachability`;function Ye(e){ne.call(this,Ke.Ia,e)}d(Ye,ne);function Xe(e){let t=Je();Ae(t,new Ye(t))}Ke.STAT_EVENT=`statevent`;function Ze(e,t){ne.call(this,Ke.STAT_EVENT,e),this.stat=t}d(Ze,ne);function Qe(e){let t=Je();Ae(t,new Ze(t,e))}Ke.Ja=`timingevent`;function $e(e,t){ne.call(this,Ke.Ja,e),this.size=t}d($e,ne);function et(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function nt(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function rt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function D(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+at(e,n)+(r?` `+r:``)})}function it(e,t){e.info(function(){return`TIMEOUT: `+t})}tt.prototype.info=function(){};function at(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Re(a)}catch{return t}}var ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},st={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},ct;function lt(){}d(lt,Ve),lt.prototype.g=function(){return new XMLHttpRequest},ct=new lt;function ut(e){return encodeURIComponent(String(e))}function dt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function ft(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pt}function pt(){this.i=null,this.g=``,this.h=!1}var mt={},ht={};function gt(e,t,n){e.M=1,e.A=Ht(Rt(t)),e.u=n,e.R=!0,_t(e,null)}function _t(e,t){e.F=Date.now(),xt(e),e.B=Rt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),nn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new pt,e.g=Jn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Ie[0]=i.toString()),i=Ie);for(let e=0;e<i.length;e++){let a=ve(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?E(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Xe(),nt(e.i,e.v,e.B,e.l,e.S,e.u)}ft.prototype.ba=function(e){e=e.target;let t=this.O;t&&Tn(e)==3?t.j():this.Y(e)},ft.prototype.Y=function(e){try{if(e==this.g)a:{let s=Tn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||s!=4||c==7||Xe(c==8||l<=0?3:2),Ct(this);var t=this.g.ca();this.X=t;var n=vt(this);if(this.o=t==200,rt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ie(r)){var a=r;break b}}a=null}if(e=a)D(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Et(this,e);else{this.o=!1,this.m=3,Qe(12),Tt(this),wt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=bt(this,n),t==ht){s==4&&(this.m=4,Qe(14),e=!1),D(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==mt){this.m=4,Qe(15),D(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else D(this.i,this.l,t,null),Et(this,t);if(yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Qe(16),e=!1),this.o=this.o&&e,!e)D(this.i,this.l,n,`[Invalid Chunked Response]`),Tt(this),wt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Bn(o),o.P=!0,Qe(11))}}else D(this.i,this.l,n,null),Et(this,n);s==4&&Tt(this),this.o&&!this.K&&(s==4?Un(this.j,this):(this.o=!1,xt(this)))}else Dn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),Tt(this),wt(this)}}}catch{}};function vt(e){if(!yt(e))return e.g.la();let t=En(e.g);if(t===``)return``;let n=``,r=t.length,i=Tn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Tt(e),wt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function yt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function bt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?ht:(n=Number(t.substring(n,r)),isNaN(n)?mt:(r+=1,r+n>t.length?ht:(t=t.slice(r,r+n),e.C=r+n,t)))}ft.prototype.cancel=function(){this.K=!0,Tt(this)};function xt(e){e.T=Date.now()+e.H,St(e,e.H)}function St(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=et(l(e.aa,e),t)}function Ct(e){e.D&&=(o.clearTimeout(e.D),null)}ft.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(it(this.i,this.B),this.M!=2&&(Xe(),Qe(17)),Tt(this),this.m=2,wt(this)):St(this,this.T-e)};function wt(e){e.j.I==0||e.K||Un(e.j,e)}function Tt(e){Ct(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Le(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Et(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||jt(n.h,e))){if(!e.L&&jt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Hn(n),jn(n);else break a;zn(n),Qe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=et(l(n.Va,n),6e3));At(n.h)<=1&&n.ta&&(n.ta=void 0)}else Gn(n,11)}else if((e.L||n.g==e)&&Hn(n),!ie(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Mt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,O(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=qn(r,r.L?r.ba:null,r.W),o.L){Nt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(Ct(s),xt(s)),r.g=o}else Rn(r);n.i.length>0&&Nn(n)}else l[0]!=`stop`&&l[0]!=`close`||Gn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Gn(n,7):An(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Xe(4)}catch{}}var Dt=class{constructor(e,t){this.g=e,this.map=t}};function Ot(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function At(e){return e.h?1:e.g?e.g.size:0}function jt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Mt(e,t){e.g?e.g.add(t):e.h=t}function Nt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Ot.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Pt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Ft=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function It(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Lt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Lt?(this.l=e.l,zt(this,e.j),this.o=e.o,this.g=e.g,Bt(this,e.u),this.h=e.h,Vt(this,rn(e.i)),this.m=e.m):e&&(t=String(e).match(Ft))?(this.l=!1,zt(this,t[1]||``,!0),this.o=Ut(t[2]||``),this.g=Ut(t[3]||``,!0),Bt(this,t[4]),this.h=Ut(t[5]||``,!0),Vt(this,t[6]||``,!0),this.m=Ut(t[7]||``)):(this.l=!1,this.i=new Zt(null,this.l))}Lt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Wt(t,Kt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Wt(t,Kt,!0),`@`),e.push(ut(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Wt(n,n.charAt(0)==`/`?Jt:qt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Wt(n,Xt)),e.join(``)},Lt.prototype.resolve=function(e){let t=Rt(this),n=!!e.j;n?zt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Bt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Vt(t,rn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Rt(e){return new Lt(e)}function zt(e,t,n){e.j=n?Ut(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Vt(e,t,n){t instanceof Zt?(e.i=t,on(e.i,e.l)):(n||(t=Wt(t,Yt)),e.i=new Zt(t,e.l))}function O(e,t,n){e.i.set(t,n)}function Ht(e){return O(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ut(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Wt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Gt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Kt=/[#\/\?@]/g,qt=/[#\?:]/g,Jt=/[#\?]/g,Yt=/[#\?@]/g,Xt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qt(e){e.g||(e.g=new Map,e.h=0,e.i&&It(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Zt.prototype,e.add=function(e,t){Qt(this),this.i=null,e=an(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function $t(e,t){Qt(e),t=an(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function en(e,t){return Qt(e),t=an(e,t),e.g.has(t)}e.forEach=function(e,t){Qt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function tn(e,t){Qt(e);let n=[];if(typeof t==`string`)en(e,t)&&(n=n.concat(e.g.get(an(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Qt(this),this.i=null,e=an(this,e),en(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=tn(this,e),e.length>0?String(e[0]):t):t};function nn(e,t,n){$t(e,t),n.length>0&&(e.i=null,e.g.set(an(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=ut(n);n=tn(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+ut(n[t])),e.push(r)}}return this.i=e.join(`&`)};function rn(e){let t=new Zt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function an(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function on(e,t){t&&!e.j&&(Qt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&($t(this,t),nn(this,n,e))},e)),e.j=t}function sn(e,t){let n=new tt;if(o.Image){let r=new Image;r.onload=u(ln,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(ln,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(ln,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(ln,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function cn(e,t){let n=new tt,r=new AbortController,i=setTimeout(()=>{r.abort(),ln(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?ln(n,`TestPingServer: ok`,!0,t):ln(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),ln(n,`TestPingServer: error`,!1,t)})}function ln(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function un(){this.g=new Be}function dn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(dn,Ve),dn.prototype.g=function(){return new fn(this.i,this.h)};function fn(e,t){ke.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(fn,ke),e=fn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,hn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hn(this)),this.g&&(this.readyState=3,hn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;pn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function pn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?mn(this):hn(this),this.readyState==3&&pn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,mn(this))},e.Na=function(e){this.g&&(this.response=e,mn(this))},e.ga=function(){this.g&&mn(this)};function mn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,hn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function hn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(fn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function gn(e){let t=``;return ue(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function _n(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=gn(n),typeof e==`string`||O(e,t,n))}function vn(e){ke.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(vn,ke);var yn=/^https?$/i,bn=[`POST`,`PUT`];e=vn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ct.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){xn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(bn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){xn(this,e)}};function xn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Sn(e),wn(e)}function Sn(e){e.A||(e.A=!0,Ae(e,`complete`),Ae(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Ae(this,`complete`),Ae(this,`abort`),wn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),vn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Cn(this):this.Xa())},e.Xa=function(){Cn(this)};function Cn(e){if(e.h&&a!==void 0){if(e.v&&Tn(e)==4)setTimeout(e.Ca.bind(e),0);else if(Ae(e,`readystatechange`),Tn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Ft)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!yn.test(t?t.toLowerCase():``)}n=r}if(n)Ae(e,`complete`),Ae(e,`success`);else{e.o=6;try{var i=Tn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,Sn(e)}}finally{wn(e)}}}}function wn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||Ae(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Tn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return Tn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),ze(t)}};function En(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Dn(e){let t={};e=(e.g&&Tn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ie(e[r]))continue;var n=dt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}T(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function On(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kn(e){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=On(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=On(`baseRetryDelayMs`,5e3,e),this.Za=On(`retryDelaySeedMs`,1e4,e),this.Ta=On(`forwardChannelMaxRetries`,2,e),this.va=On(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Ot(e&&e.concurrentRequestLimit),this.Ba=new un,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=kn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Qe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=qn(this,null,this.W),Nn(this)};function An(e){if(Mn(e),e.I==3){var t=e.V++,n=Rt(e.J);if(O(n,`SID`,e.M),O(n,`RID`,t),O(n,`TYPE`,`terminate`),In(e,n),t=new ft(e,e.j,t),t.M=2,t.A=Ht(Rt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Jn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),xt(t)}Kn(e)}function jn(e){e.g&&=(Bn(e),e.g.cancel(),null)}function Mn(e){jn(e),e.v&&=(o.clearTimeout(e.v),null),Hn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Nn(e){if(!kt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function Pn(e,t){return At(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=et(l(e.Ea,e,t),Wn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new ft(this,this.j,e),a=this.o;if(this.U&&(a?(a=E(a),fe(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Ln(this,i,t),n=Rt(this.J),O(n,`RID`,e),O(n,`CVER`,22),this.G&&O(n,`X-HTTP-Session-Id`,this.G),In(this,n),a&&(this.R?t=`headers=`+ut(gn(a))+`&`+t:this.u&&_n(n,this.u,a)),Mt(this.h,i),this.Ra&&O(n,`TYPE`,`init`),this.S?(O(n,`$req`,t),O(n,`SID`,`null`),i.U=!0,gt(i,n,null)):gt(i,n,t),this.I=2}}else this.I==3&&(e?Fn(this,e):this.i.length==0||kt(this.h)||Fn(this))};function Fn(e,t){var n=t?t.l:e.V++;let r=Rt(e.J);O(r,`SID`,e.M),O(r,`RID`,n),O(r,`AID`,e.K),In(e,r),e.u&&e.o&&_n(r,e.u,e.o),n=new ft(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Ln(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Mt(e.h,n),gt(n,r,t)}function In(e,t){e.H&&ue(e.H,function(e,n){O(t,n,e)}),e.l&&ue({},function(e,n){O(t,n,e)})}function Ln(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Re(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Rn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function zn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=et(l(e.Da,e),Wn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Vn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=et(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Qe(10),jn(this),Vn(this))};function Bn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Vn(e){e.g=new ft(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Rt(e.na);O(t,`RID`,`rpc`),O(t,`SID`,e.M),O(t,`AID`,e.K),O(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&O(t,`TO`,e.ia),O(t,`TYPE`,`xmlhttp`),In(e,t),e.u&&e.o&&_n(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Ht(Rt(t)),n.u=null,n.R=!0,_t(n,e)}e.Va=function(){this.C!=null&&(this.C=null,jn(this),zn(this),Qe(19))};function Hn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Un(e,t){var n=null;if(e.g==t){Hn(e),Bn(e),e.g=null;var r=2}else if(jt(e.h,t))n=t.G,Nt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Je(),Ae(r,new $e(r,n)),Nn(e)}else Rn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Pn(e,t)||r==2&&zn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Gn(e,5);break;case 4:Gn(e,10);break;case 3:Gn(e,6);break;default:Gn(e,2)}}}function Wn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Gn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Lt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||zt(r,`https`),Ht(r),t?sn(r.toString(),n):cn(r.toString(),n)}else Qe(2);e.I=0,e.l&&e.l.pa(t),Kn(e),Mn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Qe(2)):(this.j.info(`Failed to ping google.com`),Qe(1))};function Kn(e){if(e.I=0,e.ja=[],e.l){let t=Pt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function qn(e,t,n){var r=n instanceof Lt?Rt(n):new Lt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Bt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Lt(null);r&&zt(e,r),t&&(e.g=t),i&&Bt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&O(r,n,t),O(r,`VER`,e.ka),In(e,r),r}function Jn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new vn(new dn({ab:n})):new vn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yn(){}e=Yn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Xn(){}Xn.prototype.g=function(e,t){return new Zn(e,t)};function Zn(e,t){ke.call(this),this.g=new kn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ie(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ie(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new er(this)}d(Zn,ke),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){An(this.g)},Zn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Re(e),e=n);t.i.push(new Dt(t.Ya++,e)),t.I==3&&Nn(t)},Zn.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,Zn.Z.N.call(this)};function Qn(e){We.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Qn,We);function $n(){Ge.call(this),this.status=1}d($n,Ge);function er(e){this.g=e}d(er,Yn),er.prototype.ra=function(){Ae(this.g,`a`)},er.prototype.qa=function(e){Ae(this.g,new Qn(e))},er.prototype.pa=function(e){Ae(this.g,new $n)},er.prototype.oa=function(){Ae(this.g,`b`)},Xn.prototype.createWebChannel=Xn.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,ga=ca.createWebChannelTransport=function(){return new Xn},ha=ca.getStatEventTarget=function(){return Je()},ma=ca.Event=Ke,pa=ca.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,fa=ca.ErrorCode=ot,st.COMPLETE=`complete`,da=ca.EventType=st,He.EventType=Ue,Ue.OPEN=`a`,Ue.CLOSE=`b`,Ue.ERROR=`c`,Ue.MESSAGE=`d`,ke.prototype.listen=ke.prototype.J,ua=ca.WebChannel=He,ca.FetchXmlHttpFactory=dn,vn.prototype.listenOnce=vn.prototype.K,vn.prototype.getLastError=vn.prototype.Ha,vn.prototype.getLastErrorCode=vn.prototype.ya,vn.prototype.getStatus=vn.prototype.ca,vn.prototype.getResponseJson=vn.prototype.La,vn.prototype.getResponseText=vn.prototype.la,vn.prototype.send=vn.prototype.ea,vn.prototype.setWithCredentials=vn.prototype.Fa,la=ca.XhrIo=vn}).apply(sa===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:sa);var _a=`@firebase/firestore`,va=`4.9.2`,ya=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};ya.UNAUTHENTICATED=new ya(null),ya.GOOGLE_CREDENTIALS=new ya(`google-credentials-uid`),ya.FIRST_PARTY=new ya(`first-party-uid`),ya.MOCK_USER=new ya(`mock-user`);var ba=`12.3.0`,xa=new ct(`@firebase/firestore`);function Sa(){return xa.logLevel}function A(e,...t){if(xa.logLevel<=D.DEBUG){let n=t.map(Ta);xa.debug(`Firestore (${ba}): ${e}`,...n)}}function Ca(e,...t){if(xa.logLevel<=D.ERROR){let n=t.map(Ta);xa.error(`Firestore (${ba}): ${e}`,...n)}}function wa(e,...t){if(xa.logLevel<=D.WARN){let n=t.map(Ta);xa.warn(`Firestore (${ba}): ${e}`,...n)}}function Ta(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function j(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Ea(e,r,n)}function Ea(e,t,n){let r=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Ca(r),Error(r)}function Da(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Ea(t,i,r)}function M(e,t){return e}var N={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},P=class extends Te{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Oa=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},ka=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Aa=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ya.UNAUTHENTICATED)))}shutdown(){}},ja=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},Ma=class{constructor(e){this.t=e,this.currentUser=ya.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Da(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Oa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oa,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{A(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(A(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Oa)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(Da(typeof t.accessToken==`string`,31837,{l:t}),new ka(t.accessToken,this.currentUser)):null:(A(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Da(e===null||typeof e==`string`,2055,{h:e}),new ya(e)}},Na=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=ya.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},Pa=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Na(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ya.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Fa=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},Ia=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Da(this.o===void 0,3512);let n=e=>{e.error!=null&&A(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,A(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{A(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):A(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new Fa(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Da(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new Fa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function La(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var Ra=class{static newId(){let e=``;for(;e.length<20;){let t=La(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function F(e,t){return e<t?-1:e>t?1:0}function za(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return Ha(n)===Ha(i)?F(n,i):Ha(n)?1:-1}return F(e.length,t.length)}var Ba=55296,Va=57343;function Ha(e){let t=e.charCodeAt(0);return t>=Ba&&t<=Va}function Ua(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var Wa=`__name__`,Ga=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&j(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&j(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return F(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):za(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}},Ka=class e extends Ga{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new P(N.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ja=class e extends Ga{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return qa.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wa}static keyField(){return new e([Wa])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new P(N.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new P(N.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new P(N.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new P(N.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},I=class e{constructor(e){this.path=e}static fromPath(t){return new e(Ka.fromString(t))}static fromName(t){return new e(Ka.fromString(t).popFirst(5))}static empty(){return new e(Ka.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ka.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ka.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Ka(t.slice()))}};function Ya(e,t,n){if(!n)throw new P(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Xa(e,t,n,r){if(!0===t&&!0===r)throw new P(N.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Za(e){if(!I.isDocumentKey(e))throw new P(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qa(e){if(I.isDocumentKey(e))throw new P(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $a(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function eo(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:j(12329,{type:typeof e})}function to(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new P(N.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=eo(e);throw new P(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function no(e,t){if(t<=0)throw new P(N.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function ro(e,t){let n={typeString:e};return t&&(n.value=t),n}function io(e,t){if(!$a(e))throw new P(N.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new P(N.INVALID_ARGUMENT,n);return!0}var ao=-62135596800,oo=1e6,so=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*oo))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new P(N.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<ao||e>=253402300800)throw new P(N.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oo}_compareTo(e){return this.seconds===e.seconds?F(this.nanoseconds,e.nanoseconds):F(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(io(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-ao;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};so._jsonSchemaVersion=`firestore/timestamp/1.0`,so._jsonSchema={type:ro(`string`,so._jsonSchemaVersion),seconds:ro(`number`),nanoseconds:ro(`number`)};var L=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new so(0,0))}static max(){return new e(new so(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},co=-1,lo=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};lo.UNKNOWN_ID=-1;function uo(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new po(L.fromTimestamp(r===1e9?new so(n+1,0):new so(n,r)),I.empty(),t)}function fo(e){return new po(e.readTime,e.key,co)}var po=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(L.min(),I.empty(),co)}static max(){return new e(L.max(),I.empty(),co)}};function mo(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=I.comparator(e.documentKey,t.documentKey),n===0?F(e.largestBatchId,t.largestBatchId):n):n}var ho=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,R=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function z(e){if(e.code!==N.FAILED_PRECONDITION||e.message!==ho)throw e;A(`LocalStore`,`Unexpectedly lost primary lease`)}var B=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function go(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function _o(e){return e.name===`IndexedDbTransactionError`}var vo=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};vo.ce=-1;var yo=-1;function bo(e){return e==null}function xo(e){return e===0&&1/e==-1/0}function So(e){return typeof e==`number`&&Number.isInteger(e)&&!xo(e)&&e<=2**53-1&&e>=-(2**53-1)}var Co=``;function wo(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Eo(t)),t=To(e.get(n),t);return Eo(t)}function To(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Co:n+=``;break;default:n+=r}}return n}function Eo(e){return e+Co+``}function Do(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Oo(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ko(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ao=class e{constructor(e,t){this.comparator=e,this.root=t||Mo.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mo.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jo(this.root,e,this.comparator,!0)}},jo=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mo=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};Mo.EMPTY=null,Mo.RED=!0,Mo.BLACK=!1,Mo.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Mo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var V=class e{constructor(e){this.comparator=e,this.data=new Ao(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new No(this.data.getIterator())}getIteratorFrom(e){return new No(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},No=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},Po=class e{constructor(e){this.fields=e,e.sort(Ja.comparator)}static empty(){return new e([])}unionWith(t){let n=new V(Ja.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Fo=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},Io=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Fo(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return F(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Io.EMPTY_BYTE_STRING=new Io(``);var Lo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(e){if(Da(!!e,39018),typeof e==`string`){let t=0,n=Lo.exec(e);if(Da(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zo(e.seconds),nanos:zo(e.nanos)}}function zo(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Bo(e){return typeof e==`string`?Io.fromBase64String(e):Io.fromUint8Array(e)}var Vo=`server_timestamp`,Ho=`__type__`,Uo=`__previous_value__`,Wo=`__local_write_time__`;function Go(e){return(e?.mapValue?.fields||{})[Ho]?.stringValue===Vo}function Ko(e){let t=e.mapValue.fields[Uo];return Go(t)?Ko(t):t}function qo(e){let t=Ro(e.mapValue.fields[Wo].timestampValue);return new so(t.seconds,t.nanos)}var Jo=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},Yo=`(default)`,Xo=class e{constructor(e,t){this.projectId=e,this.database=t||Yo}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Yo}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Zo=`__type__`,Qo=`__max__`,$o={mapValue:{fields:{__type__:{stringValue:Qo}}}},es=`__vector__`,ts=`value`;function ns(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Go(e)?4:ys(e)?9007199254740991:_s(e)?10:11:j(28295,{value:e})}function rs(e,t){if(e===t)return!0;let n=ns(e);if(n!==ns(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qo(e).isEqual(qo(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Ro(e.timestampValue),r=Ro(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bo(e.bytesValue).isEqual(Bo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zo(e.geoPointValue.latitude)===zo(t.geoPointValue.latitude)&&zo(e.geoPointValue.longitude)===zo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return zo(e.integerValue)===zo(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=zo(e.doubleValue),r=zo(t.doubleValue);return n===r?xo(n)===xo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ua(e.arrayValue.values||[],t.arrayValue.values||[],rs);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Do(n)!==Do(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!rs(n[e],r[e])))return!1;return!0}(e,t);default:return j(52216,{left:e})}}function is(e,t){return(e.values||[]).find((e=>rs(e,t)))!==void 0}function as(e,t){if(e===t)return 0;let n=ns(e),r=ns(t);if(n!==r)return F(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return F(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=zo(e.integerValue||e.doubleValue),r=zo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return os(e.timestampValue,t.timestampValue);case 4:return os(qo(e),qo(t));case 5:return za(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Bo(e),r=Bo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=F(n[e],r[e]);if(t!==0)return t}return F(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=F(zo(e.latitude),zo(t.latitude));return n===0?F(zo(e.longitude),zo(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return ss(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[ts]?.arrayValue,a=r[ts]?.arrayValue,o=F(i?.values?.length||0,a?.values?.length||0);return o===0?ss(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===$o.mapValue&&t===$o.mapValue)return 0;if(e===$o.mapValue)return 1;if(t===$o.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=za(r[e],a[e]);if(t!==0)return t;let o=as(n[r[e]],i[a[e]]);if(o!==0)return o}return F(r.length,a.length)}(e.mapValue,t.mapValue);default:throw j(23264,{he:n})}}function os(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return F(e,t);let n=Ro(e),r=Ro(t),i=F(n.seconds,r.seconds);return i===0?F(n.nanos,r.nanos):i}function ss(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=as(n[e],r[e]);if(t)return t}return F(n.length,r.length)}function cs(e){return ls(e)}function ls(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Ro(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Bo(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return I.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=ls(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${ls(e.fields[i])}`;return n+`}`}(e.mapValue):j(61005,{value:e})}function us(e){switch(ns(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Ko(e);return t?16+us(t):16;case 5:return 2*e.stringValue.length;case 6:return Bo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+us(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Oo(e.fields,((e,n)=>{t+=e.length+us(n)})),t}(e.mapValue);default:throw j(13486,{value:e})}}function ds(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function fs(e){return!!e&&`integerValue`in e}function ps(e){return!!e&&`arrayValue`in e}function ms(e){return!!e&&`nullValue`in e}function hs(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function gs(e){return!!e&&`mapValue`in e}function _s(e){return(e?.mapValue?.fields||{})[Zo]?.stringValue===es}function vs(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Oo(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=vs(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vs(e.arrayValue.values[n]);return t}return{...e}}function ys(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Qo}var bs=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vs(t)}setAll(e){let t=Ja.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vs(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());gs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];gs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Oo(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(vs(this.value))}};function xs(e){let t=[];return Oo(e.fields,((e,n)=>{let r=new Ja([e]);if(gs(n)){let e=xs(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new Po(t)}var Ss=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,L.min(),L.min(),L.min(),bs.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,L.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,L.min(),L.min(),bs.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,L.min(),L.min(),bs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(L.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=L.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Cs=class{constructor(e,t){this.position=e,this.inclusive=t}};function ws(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?I.comparator(I.fromName(o.referenceValue),n.key):as(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function Ts(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rs(e.position[n],t.position[n]))return!1;return!0}var Es=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Ds(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Os=class{},ks=class e extends Os{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Ls(t,n,r):n===`array-contains`?new Vs(t,r):n===`in`?new Hs(t,r):n===`not-in`?new Us(t,r):n===`array-contains-any`?new Ws(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Rs(e,n):new zs(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(as(t,this.value)):t!==null&&ns(this.value)===ns(t)&&this.matchesComparison(as(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},As=class e extends Os{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return js(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function js(e){return e.op===`and`}function Ms(e){return Ns(e)&&js(e)}function Ns(e){for(let t of e.filters)if(t instanceof As)return!1;return!0}function Ps(e){if(e instanceof ks)return e.field.canonicalString()+e.op.toString()+cs(e.value);if(Ms(e))return e.filters.map((e=>Ps(e))).join(`,`);{let t=e.filters.map((e=>Ps(e))).join(`,`);return`${e.op}(${t})`}}function Fs(e,t){return e instanceof ks?function(e,t){return t instanceof ks&&e.op===t.op&&e.field.isEqual(t.field)&&rs(e.value,t.value)}(e,t):e instanceof As?function(e,t){return t instanceof As&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Fs(n,t.filters[r])),!0):!1}(e,t):void j(19439)}function Is(e){return e instanceof ks?function(e){return`${e.field.canonicalString()} ${e.op} ${cs(e.value)}`}(e):e instanceof As?function(e){return e.op.toString()+` {`+e.getFilters().map(Is).join(` ,`)+`}`}(e):`Filter`}var Ls=class extends ks{constructor(e,t,n){super(e,t,n),this.key=I.fromName(n.referenceValue)}matches(e){let t=I.comparator(e.key,this.key);return this.matchesComparison(t)}},Rs=class extends ks{constructor(e,t){super(e,`in`,t),this.keys=Bs(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},zs=class extends ks{constructor(e,t){super(e,`not-in`,t),this.keys=Bs(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Bs(e,t){return(t.arrayValue?.values||[]).map((e=>I.fromName(e.referenceValue)))}var Vs=class extends ks{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return ps(t)&&is(t.arrayValue,this.value)}},Hs=class extends ks{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&is(this.value.arrayValue,t)}},Us=class extends ks{constructor(e,t){super(e,`not-in`,t)}matches(e){if(is(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!is(this.value.arrayValue,t)}},Ws=class extends ks{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!ps(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>is(this.value.arrayValue,e)))}},Gs=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Ks(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Gs(e,t,n,r,i,a,o)}function qs(e){let t=M(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Ps(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),bo(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>cs(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>cs(e))).join(`,`)),t.Te=e}return t.Te}function Js(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ds(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Fs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ts(e.startAt,t.startAt)&&Ts(e.endAt,t.endAt)}function Ys(e){return I.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Xs=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Zs(e,t,n,r,i,a,o,s){return new Xs(e,t,n,r,i,a,o,s)}function Qs(e){return new Xs(e)}function $s(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function ec(e){return e.collectionGroup!==null}function tc(e){let t=M(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new V(Ja.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Es(r,n))})),e.has(Ja.keyField().canonicalString())||t.Ie.push(new Es(Ja.keyField(),n))}return t.Ie}function nc(e){let t=M(e);return t.Ee||=rc(t,tc(e)),t.Ee}function rc(e,t){if(e.limitType===`F`)return Ks(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Es(e.field,t)}));let n=e.endAt?new Cs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Cs(e.startAt.position,e.startAt.inclusive):null;return Ks(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ic(e,t){let n=e.filters.concat([t]);return new Xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ac(e,t,n){return new Xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oc(e,t){return Js(nc(e),nc(t))&&e.limitType===t.limitType}function sc(e){return`${qs(nc(e))}|lt:${e.limitType}`}function cc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Is(e))).join(`, `)}]`),bo(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>cs(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>cs(e))).join(`,`)),`Target(${t})`}(nc(e))}; limitType=${e.limitType})`}function lc(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?I.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of tc(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=ws(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tc(e),t)||e.endAt&&!function(e,t,n){let r=ws(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tc(e),t))}(e,t)}function uc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dc(e){return(t,n)=>{let r=!1;for(let i of tc(e)){let e=fc(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function fc(e,t,n){let r=e.field.isKeyField()?I.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?as(r,i):j(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return j(19790,{direction:e.dir})}}var pc=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return ko(this.inner)}size(){return this.innerSize}},mc=new Ao(I.comparator);function hc(){return mc}var gc=new Ao(I.comparator);function _c(...e){let t=gc;for(let n of e)t=t.insert(n.key,n);return t}function vc(e){let t=gc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function yc(){return xc()}function bc(){return xc()}function xc(){return new pc((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Sc=new Ao(I.comparator),Cc=new V(I.comparator);function H(...e){let t=Cc;for(let n of e)t=t.add(n);return t}var wc=new V(F);function Tc(){return wc}function Ec(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:xo(t)?`-0`:t}}function Dc(e){return{integerValue:``+e}}function Oc(e,t){return So(t)?Dc(t):Ec(e,t)}var kc=class{constructor(){this._=void 0}};function Ac(e,t,n){return e instanceof Nc?function(e,t){let n={fields:{[Ho]:{stringValue:Vo},[Wo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Go(t)&&(t=Ko(t)),t&&(n.fields[Uo]=t),{mapValue:n}}(n,t):e instanceof Pc?Fc(e,t):e instanceof Ic?Lc(e,t):function(e,t){let n=Mc(e,t),r=zc(n)+zc(e.Ae);return fs(n)&&fs(e.Ae)?Dc(r):Ec(e.serializer,r)}(e,t)}function jc(e,t,n){return e instanceof Pc?Fc(e,t):e instanceof Ic?Lc(e,t):n}function Mc(e,t){return e instanceof Rc?function(e){return fs(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var Nc=class extends kc{},Pc=class extends kc{constructor(e){super(),this.elements=e}};function Fc(e,t){let n=Bc(t);for(let t of e.elements)n.some((e=>rs(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Ic=class extends kc{constructor(e){super(),this.elements=e}};function Lc(e,t){let n=Bc(t);for(let t of e.elements)n=n.filter((e=>!rs(e,t)));return{arrayValue:{values:n}}}var Rc=class extends kc{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function zc(e){return zo(e.integerValue||e.doubleValue)}function Bc(e){return ps(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Vc=class{constructor(e,t){this.field=e,this.transform=t}};function Hc(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pc&&t instanceof Pc||e instanceof Ic&&t instanceof Ic?Ua(e.elements,t.elements,rs):e instanceof Rc&&t instanceof Rc?rs(e.Ae,t.Ae):e instanceof Nc&&t instanceof Nc}(e.transform,t.transform)}var Uc=class{constructor(e,t){this.version=e,this.transformResults=t}},Wc=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gc(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Kc=class{};function qc(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new rl(e.key,Wc.none()):new Qc(e.key,e.data,Wc.none());{let n=e.data,r=bs.empty(),i=new V(Ja.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new $c(e.key,r,new Po(i.toArray()),Wc.none())}}function Jc(e,t,n){e instanceof Qc?function(e,t,n){let r=e.value.clone(),i=tl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $c?function(e,t,n){if(!Gc(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=tl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(el(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yc(e,t,n,r){return e instanceof Qc?function(e,t,n,r){if(!Gc(e.precondition,t))return n;let i=e.value.clone(),a=nl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $c?function(e,t,n,r){if(!Gc(e.precondition,t))return n;let i=nl(e.fieldTransforms,r,t),a=t.data;return a.setAll(el(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xc(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=Mc(r.transform,e||null);i!=null&&(n===null&&(n=bs.empty()),n.set(r.field,i))}return n||null}function Zc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&Ua(e,t,((e,t)=>Hc(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Qc=class extends Kc{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},$c=class extends Kc{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function el(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function tl(e,t,n){let r=new Map;Da(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,jc(o,s,n[i]))}return r}function nl(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Ac(e,a,t))}return r}var rl=class extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},il=class extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},al=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Jc(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=Yc(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=Yc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=bc();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=qc(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(L.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),H())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,((e,t)=>Zc(e,t)))&&Ua(this.baseMutations,e.baseMutations,((e,t)=>Zc(e,t)))}},ol=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){Da(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Sc}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},sl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},cl=class{constructor(e,t){this.count=e,this.unchangedNames=t}},ll,U;function ul(e){switch(e){case N.OK:return j(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return j(15467,{code:e})}}function dl(e){if(e===void 0)return Ca(`GRPC error has no .code`),N.UNKNOWN;switch(e){case ll.OK:return N.OK;case ll.CANCELLED:return N.CANCELLED;case ll.UNKNOWN:return N.UNKNOWN;case ll.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ll.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ll.INTERNAL:return N.INTERNAL;case ll.UNAVAILABLE:return N.UNAVAILABLE;case ll.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ll.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ll.NOT_FOUND:return N.NOT_FOUND;case ll.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ll.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ll.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ll.ABORTED:return N.ABORTED;case ll.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ll.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ll.DATA_LOSS:return N.DATA_LOSS;default:return j(39323,{code:e})}}(U=ll||={})[U.OK=0]=`OK`,U[U.CANCELLED=1]=`CANCELLED`,U[U.UNKNOWN=2]=`UNKNOWN`,U[U.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,U[U.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,U[U.NOT_FOUND=5]=`NOT_FOUND`,U[U.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,U[U.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,U[U.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,U[U.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,U[U.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,U[U.ABORTED=10]=`ABORTED`,U[U.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,U[U.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,U[U.INTERNAL=13]=`INTERNAL`,U[U.UNAVAILABLE=14]=`UNAVAILABLE`,U[U.DATA_LOSS=15]=`DATA_LOSS`;var fl=null;function pl(){return new TextEncoder}var ml=new aa([4294967295,4294967295],0);function hl(e){let t=pl().encode(e),n=new oa;return n.update(t),new Uint8Array(n.digest())}function gl(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new aa([n,r],0),new aa([i,a],0)]}var _l=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vl(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new vl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new vl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=aa.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(aa.fromNumber(n)));return r.compare(ml)===1&&(r=new aa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=gl(hl(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=gl(hl(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},vl=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},yl=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,bl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(L.min(),i,new Ao(F),hc(),H())}},bl=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,H(),H(),H())}},xl=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},Sl=class{constructor(e,t){this.targetId=e,this.Ce=t}},Cl=class{constructor(e,t,n=Io.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},wl=class{constructor(){this.ve=0,this.Fe=Dl(),this.Me=Io.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=H(),t=H(),n=H();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j(38017,{changeType:i})}})),new bl(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Dl()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,Da(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Tl=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=hc(),this.Je=El(),this.He=El(),this.Ye=new Ao(F)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:j(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(Ys(i))if(n===0){let e=new I(i.path);this.et(t,e,Ss.newNoDocument(e,L.min()))}else Da(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}fl?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Bo(n).toUint8Array()}catch(e){if(e instanceof Fo)return wa(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new _l(a,r,i)}catch(e){return wa(e instanceof vl?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&Ys(i.target)){let t=new I(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ss.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=H();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new yl(e,t,this.Ye,this.je,n);return this.je=hc(),this.Je=El(),this.He=El(),this.Ye=new Ao(F),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new V(F),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new V(F),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||A(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wl),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function El(){return new Ao(I.comparator)}function Dl(){return new Ao(I.comparator)}var Ol=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),kl=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Al=(()=>({and:`AND`,or:`OR`}))(),jl=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ml(e,t){return e.useProto3Json||bo(t)?t:{value:t}}function Nl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Pl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fl(e,t){return Nl(e,t.toTimestamp())}function Il(e){return Da(!!e,49232),L.fromTimestamp(function(e){let t=Ro(e);return new so(t.seconds,t.nanos)}(e))}function Ll(e,t){return Rl(e,t).canonicalString()}function Rl(e,t){let n=function(e){return new Ka([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function zl(e){let t=Ka.fromString(e);return Da(au(t),10190,{key:t.toString()}),t}function Bl(e,t){return Ll(e.databaseId,t.path)}function W(e,t){let n=zl(t);if(n.get(1)!==e.databaseId.projectId)throw new P(N.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new P(N.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new I(Hl(n))}function Vl(e,t){return Ll(e.databaseId,t)}function G(e){let t=zl(e);return t.length===4?Ka.emptyPath():Hl(t)}function K(e){return new Ka([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function Hl(e){return Da(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Ul(e,t,n){return{name:Bl(e,t),fields:n.value.mapValue.fields}}function Wl(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:j(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Da(t===void 0||typeof t==`string`,58123),Io.fromBase64String(t||``)):(Da(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),Io.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Cl(r,i,a,o&&function(e){return new P(e.code===void 0?N.UNKNOWN:dl(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=W(e,r.document.name),a=Il(r.document.updateTime),o=r.document.createTime?Il(r.document.createTime):L.min(),s=new bs({mapValue:{fields:r.document.fields}}),c=Ss.newFoundDocument(i,a,o,s);n=new xl(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=W(e,r.document),a=r.readTime?Il(r.readTime):L.min(),o=Ss.newNoDocument(i,a);n=new xl([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=W(e,r.document);n=new xl([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return j(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new cl(r,i),o=e.targetId;n=new Sl(o,a)}}return n}function Gl(e,t){let n;if(t instanceof Qc)n={update:Ul(e,t.key,t.value)};else if(t instanceof rl)n={delete:Bl(e,t.key)};else if(t instanceof $c)n={update:Ul(e,t.key,t.data),updateMask:iu(t.fieldMask)};else{if(!(t instanceof il))return j(16599,{Vt:t.type});n={verify:Bl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof Nc)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof Pc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ic)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw j(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?j(27497):{exists:t.exists}:{updateTime:Fl(e,t.updateTime)}}(e,t.precondition)),n}function Kl(e,t){return e&&e.length>0?(Da(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?Il(e.updateTime):Il(t);return n.isEqual(L.min())&&(n=Il(t)),new Uc(n,e.transformResults||[])}(e,t)))):[]}function ql(e,t){return{documents:[Vl(e,t.path)]}}function Jl(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=Vl(e,i);let a=function(e){if(e.length!==0)return ru(As.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:tu(e.field),direction:Ql(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Ml(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Yl(e){let t=G(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Da(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Zl(e);return t instanceof As&&Ms(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Es(nu(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,bo(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Cs(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Cs(e.values||[],t)}(n.endAt)),Zs(t,i,o,a,s,`F`,c,l)}function Xl(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return j(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Zl(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?j(30097,{filter:e}):function(e){return As.create(e.compositeFilter.filters.map((e=>Zl(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return j(1026)}}(e.compositeFilter.op))}(e):function(e){return ks.create(nu(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return j(58110);default:return j(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=nu(e.unaryFilter.field);return ks.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=nu(e.unaryFilter.field);return ks.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=nu(e.unaryFilter.field);return ks.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=nu(e.unaryFilter.field);return ks.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return j(61313);default:return j(60726)}}(e)}function Ql(e){return Ol[e]}function $l(e){return kl[e]}function eu(e){return Al[e]}function tu(e){return{fieldPath:e.canonicalString()}}function nu(e){return Ja.fromServerFormat(e.fieldPath)}function ru(e){return e instanceof ks?function(e){if(e.op===`==`){if(hs(e.value))return{unaryFilter:{field:tu(e.field),op:`IS_NAN`}};if(ms(e.value))return{unaryFilter:{field:tu(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(hs(e.value))return{unaryFilter:{field:tu(e.field),op:`IS_NOT_NAN`}};if(ms(e.value))return{unaryFilter:{field:tu(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:tu(e.field),op:$l(e.op),value:e.value}}}(e):e instanceof As?function(e){let t=e.getFilters().map((e=>ru(e)));return t.length===1?t[0]:{compositeFilter:{op:eu(e.op),filters:t}}}(e):j(54877,{filter:e})}function iu(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function au(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var ou=class e{constructor(e,t,n,r,i=L.min(),a=L.min(),o=Io.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},su=class{constructor(e){this.yt=e}};function cu(e){let t=Yl({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?ac(t,t.limit,`L`):t}var lu=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(zo(e.integerValue));else if(`doubleValue`in e){let n=zo(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),xo(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=Ro(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Bo(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?ys(e)?this.Ft(t,2**53-1):_s(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):j(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=ts,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(zo(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),I.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};lu.Kt=new lu;var uu=class{constructor(){this.Cn=new du}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(po.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(po.min())}updateCollectionGroup(e,t,n){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}},du=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new V(Ka.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new V(Ka.comparator)).toArray()}};new Uint8Array;var fu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pu=41943040,mu=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};mu.DEFAULT_COLLECTION_PERCENTILE=10,mu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mu.DEFAULT=new mu(pu,mu.DEFAULT_COLLECTION_PERCENTILE,mu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mu.DISABLED=new mu(-1,0,0);var hu=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},gu=`LruGarbageCollector`,_u=1048576;function vu([e,t],[n,r]){let i=F(e,n);return i===0?F(t,r):i}var yu=class{constructor(e){this.Ir=e,this.buffer=new V(vu),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();vu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},bu=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){A(gu,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){_o(e)?A(gu,`Ignoring IndexedDB error during garbage collection: `,e):await z(e)}await this.Vr(3e5)}))}},xu=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(vo.ce);let n=new yu(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(A(`LruGarbageCollector`,`Garbage collection skipped; disabled`),B.resolve(fu)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(A(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fu):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(A(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Sa()<=D.DEBUG&&A(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Su(e,t){return new xu(e,t)}var Cu=class{constructor(){this.changes=new pc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ss.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):B.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},wu=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Tu=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&Yc(n.mutation,e,Po.empty(),so.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,H()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=H()){let r=yc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=_c();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=yc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,H())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=hc(),a=xc(),o=function(){return xc()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof $c)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Po.empty()):(a.set(t.key,o.mutation.getFieldMask()),Yc(o.mutation,t,o.mutation.getFieldMask(),so.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new wu(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=xc(),r=new Ao(((e,t)=>e-t)),i=H();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Po.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||H()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=bc();c.forEach((e=>{if(!i.has(e)){let r=qc(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return B.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return I.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ec(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):B.resolve(yc()),o=co,s=i;return a.next((t=>B.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?B.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,H()))).next((e=>({batchId:o,changes:vc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new I(t)).next((e=>{let t=_c();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=_c();return this.indexManager.getCollectionParents(e,i).next((o=>B.forEach(o,(o=>{let s=function(e,t){return new Xs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Ss.newInvalidDocument(r)))}));let n=_c();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&Yc(a.mutation,r,Po.empty(),so.now()),lc(t,r)&&(n=n.insert(e,r))})),n}))}},Eu=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return B.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Il(e.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:cu(e.bundledQuery),readTime:Il(e.readTime)}}(t)),B.resolve()}},Du=class{constructor(){this.overlays=new Ao(I.comparator),this.qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){let n=yc();return B.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),B.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),B.resolve()}getOverlaysForCollection(e,t,n){let r=yc(),i=t.length+1,a=new I(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return B.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ao(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=yc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=yc(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return B.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new sl(t,n));let i=this.qr.get(t);i===void 0&&(i=H(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},Ou=class{constructor(){this.sessionToken=Io.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}},ku=class{constructor(){this.Qr=new V(Au.$r),this.Ur=new V(Au.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new Au(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new Au(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new I(new Ka([])),n=new Au(t,e),r=new Au(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new I(new Ka([])),n=new Au(t,e),r=new Au(t,e+1),i=H();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Au(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Au=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return I.comparator(e.key,t.key)||F(e.Yr,t.Yr)}static Kr(e,t){return F(e.Yr,t.Yr)||I.comparator(e.key,t.key)}},ju=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new V(Au.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new al(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new Au(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,t){return B.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?yo:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Au(t,0),r=new Au(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new V(F);return t.forEach((e=>{let t=new Au(e,0),r=new Au(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),B.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;I.isDocumentKey(i)||(i=i.child(``));let a=new Au(new I(i),0),o=new V(F);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),B.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){Da(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return B.forEach(t.mutations,(r=>{let i=new Au(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new Au(t,0),r=this.Zr.firstAfterOrEqual(n);return B.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Mu=class{constructor(e){this.ri=e,this.docs=function(){return new Ao(I.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return B.resolve(n?n.document.mutableCopy():Ss.newInvalidDocument(t))}getEntries(e,t){let n=hc();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ss.newInvalidDocument(e))})),B.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hc(),a=t.path,o=new I(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||mo(fo(o),n)<=0||(r.has(o.key)||lc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,n,r){j(9500)}ii(e,t){return B.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Nu(this)}getSize(e){return B.resolve(this.size)}},Nu=class extends Cu{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),B.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},Pu=class{constructor(e){this.persistence=e,this.si=new pc((e=>qs(e)),Js),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.oi=0,this._i=new ku,this.targetCount=0,this.ai=hu.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),B.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new hu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Pr(t),B.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,B.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),B.waitFor(i).next((()=>r))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return B.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),B.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),B.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return B.resolve(n)}containsKey(e,t){return B.resolve(this._i.containsKey(t))}},Fu=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new vo(0),this.li=!1,this.li=!0,this.hi=new Ou,this.referenceDelegate=e(this),this.Pi=new Pu(this),this.indexManager=new uu,this.remoteDocumentCache=function(e){return new Mu(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new su(t),this.Ii=new Eu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Du,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new ju(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){A(`MemoryPersistence`,`Starting transaction:`,e);let r=new Iu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return B.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},Iu=class extends R{constructor(e){super(),this.currentSequenceNumber=e}},Lu=class e{constructor(e){this.persistence=e,this.Ri=new ku,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),B.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(n=>{let r=I.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,L.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Ru=class e{constructor(e,t){this.persistence=e,this.pi=new pc((e=>wo(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Su(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return B.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?B.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,L.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=us(e.data.value)),t}br(e,t,n){return B.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return B.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},zu=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=H(),i=H();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},Bu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},Vu=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return be()?8:go(me())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new Bu;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Sa()<=D.DEBUG&&A(`QueryEngine`,`SDK will not create cache indexes for query:`,cc(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),B.resolve()):(Sa()<=D.DEBUG&&A(`QueryEngine`,`Query:`,cc(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(Sa()<=D.DEBUG&&A(`QueryEngine`,`The SDK decides to create cache indexes for query:`,cc(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,nc(t))):B.resolve())}ys(e,t){if($s(t))return B.resolve(null);let n=nc(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ac(t,null,`F`),n=nc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=H(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,ac(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return $s(t)||r.isEqual(L.min())?B.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?B.resolve(null):(Sa()<=D.DEBUG&&A(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),cc(t)),this.vs(e,a,t,uo(r,co)).next((e=>e)))}))}Ds(e,t){let n=new V(dc(e));return t.forEach(((t,r)=>{lc(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Sa()<=D.DEBUG&&A(`QueryEngine`,`Using full collection scan to execute query:`,cc(t)),this.ps.getDocumentsMatchingQuery(e,t,po.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Hu=`LocalStore`,Uu=3e8,Wu=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ao(F),this.xs=new pc((e=>qs(e)),Js),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function Gu(e,t,n,r){return new Wu(e,t,n,r)}async function Ku(e,t){let n=M(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=H();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function qu(e,t){let n=M(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=B.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);Da(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=H();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Ju(e){let t=M(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function Yu(e,t){let n=M(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(Io.EMPTY_BYTE_STRING,L.min()).withLastLimboFreeSnapshotVersion(L.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Uu?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=hc(),c=H();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Xu(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(L.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return B.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function Xu(e,t,n){let r=H(),i=H();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=hc();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(L.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):A(Hu,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function Zu(e,t){let n=M(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=yo),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Qu(e,t){let n=M(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,B.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new ou(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function $u(e,t,n){let r=M(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!_o(e))throw e;A(Hu,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function ed(e,t,n){let r=M(e),i=L.min(),a=H();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=M(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):B.resolve(r.Ms.get(i))}(r,e,nc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:L.min(),n?a:H()))).next((e=>(td(r,uc(t),e),{documents:e,Qs:a})))))}function td(e,t,n){let r=e.Os.get(t)||L.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var nd=class{constructor(){this.activeTargetIds=Tc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},rd=class{constructor(){this.Mo=new nd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},id=class{Oo(e){}shutdown(){}},ad=`ConnectivityMonitor`,od=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){A(ad,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){A(ad,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},sd=null;function cd(){return sd===null?sd=function(){return 268435456+Math.round(2147483648*Math.random())}():sd++,`0x`+sd.toString(16)}var ld=`RestConnection`,ud={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},dd=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Yo?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=cd(),o=this.zo(e,t.toUriEncodedString());A(ld,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=ce(c);return this.Jo(e,o,s,n,l).then((t=>(A(ld,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw wa(ld,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+ba}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=ud[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},fd=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},pd=`WebChannelConnection`,md=class extends dd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=cd();return new Promise(((i,o)=>{let s=new la;s.setWithCredentials(!0),s.listenOnce(da.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case fa.NO_ERROR:let t=s.getResponseJson();A(pd,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case fa.TIMEOUT:A(pd,`RPC '${e}' ${a} timed out`),o(new P(N.DEADLINE_EXCEEDED,`Request time out`));break;case fa.HTTP_ERROR:let n=s.getStatus();if(A(pd,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new P(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(N).indexOf(t)>=0?t:N.UNKNOWN}(t.status),t.message)):o(new P(N.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new P(N.UNAVAILABLE,`Connection failed.`));break;default:j(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{A(pd,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);A(pd,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=cd(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=ga(),o=ha(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);A(pd,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new fd({Yo:t=>{f?A(pd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(A(pd,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),A(pd,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,ua.EventType.OPEN,(()=>{f||(A(pd,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,ua.EventType.CLOSE,(()=>{f||(f=!0,A(pd,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,ua.EventType.ERROR,(t=>{f||(f=!0,wa(pd,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new P(N.UNAVAILABLE,`The operation could not be completed`)))})),m(u,ua.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];Da(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){A(pd,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=ll[e];if(t!==void 0)return dl(t)}(t),i=a.message;n===void 0&&(n=N.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new P(n,i)),u.close()}else A(pd,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,ma.STAT_EVENT,(t=>{t.stat===pa.PROXY?A(pd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===pa.NOPROXY&&A(pd,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function hd(){return typeof document<`u`?document:null}function gd(e){return new jl(e,!0)}var _d=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&A(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},vd=`PersistentStream`,yd=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _d(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===N.RESOURCE_EXHAUSTED?(Ca(t.toString()),Ca(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new P(N.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return A(vd,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(A(vd,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},bd=class extends yd{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Wl(this.serializer,e),n=function(e){if(!(`targetChange`in e))return L.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?L.min():t.readTime?Il(t.readTime):L.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=K(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=Ys(r)?{documents:ql(e,r)}:{query:Jl(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Pl(e,t.resumeToken);let r=Ml(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(L.min())>0){n.readTime=Nl(e,t.snapshotVersion.toTimestamp());let r=Ml(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Xl(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=K(this.serializer),t.removeTarget=e,this.q_(t)}},xd=class extends yd{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return Da(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Da(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Da(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Kl(e.writeResults,e.commitTime),n=Il(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=K(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Gl(this.serializer,e)))};this.q_(t)}},Sd=class{},Cd=class extends Sd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new P(N.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Rl(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new P(N.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,Rl(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new P(N.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},wd=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ca(t),this.aa=!1):A(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},q=`RemoteStore`,Td=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{Pd(this)&&(A(q,`Restarting streams for network reachability change.`),await async function(e){let t=M(e);t.Ea.add(4),await Dd(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await Ed(t)}(this))}))})),this.Ra=new wd(n,r)}};async function Ed(e){if(Pd(e))for(let t of e.da)await t(!0)}async function Dd(e){for(let t of e.da)await t(!1)}function Od(e,t){let n=M(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Nd(n)?Md(n):$d(n).O_()&&Ad(n,t))}function kd(e,t){let n=M(e),r=$d(n);n.Ia.delete(t),r.O_()&&jd(n,t),n.Ia.size===0&&(r.O_()?r.L_():Pd(n)&&n.Ra.set(`Unknown`))}function Ad(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(L.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$d(e).Y_(t)}function jd(e,t){e.Va.Ue(t),$d(e).Z_(t)}function Md(e){e.Va=new Tl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),$d(e).start(),e.Ra.ua()}function Nd(e){return Pd(e)&&!$d(e).x_()&&e.Ia.size>0}function Pd(e){return M(e).Ea.size===0}function Fd(e){e.Va=void 0}async function Id(e){e.Ra.set(`Online`)}async function Ld(e){e.Ia.forEach(((t,n)=>{Ad(e,t)}))}async function Rd(e,t){Fd(e),Nd(e)?(e.Ra.ha(t),Md(e)):e.Ra.set(`Unknown`)}async function zd(e,t,n){if(e.Ra.set(`Online`),t instanceof Cl&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){A(q,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await Bd(e,n)}else if(t instanceof xl?e.Va.Ze(t):t instanceof Sl?e.Va.st(t):e.Va.tt(t),!n.isEqual(L.min()))try{let t=await Ju(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(Io.EMPTY_BYTE_STRING,r.snapshotVersion)),jd(e,t),Ad(e,new ou(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){A(q,`Failed to raise snapshot:`,t),await Bd(e,t)}}async function Bd(e,t,n){if(!_o(t))throw t;e.Ea.add(1),await Dd(e),e.Ra.set(`Offline`),n||=()=>Ju(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{A(q,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await Ed(e)}))}function Vd(e,t){return t().catch((n=>Bd(e,n,t)))}async function Hd(e){let t=M(e),n=ef(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:yo;for(;Ud(t);)try{let e=await Zu(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,Wd(t,e)}catch(e){await Bd(t,e)}Gd(t)&&Kd(t)}function Ud(e){return Pd(e)&&e.Ta.length<10}function Wd(e,t){e.Ta.push(t);let n=ef(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Gd(e){return Pd(e)&&!ef(e).x_()&&e.Ta.length>0}function Kd(e){ef(e).start()}async function qd(e){ef(e).ra()}async function Jd(e){let t=ef(e);for(let n of e.Ta)t.ea(n.mutations)}async function Yd(e,t,n){let r=e.Ta.shift(),i=ol.from(r,t,n);await Vd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Hd(e)}async function Xd(e,t){t&&ef(e).X_&&await async function(e,t){if(function(e){return ul(e)&&e!==N.ABORTED}(t.code)){let n=e.Ta.shift();ef(e).B_(),await Vd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Hd(e)}}(e,t),Gd(e)&&Kd(e)}async function Zd(e,t){let n=M(e);n.asyncQueue.verifyOperationInProgress(),A(q,`RemoteStore received new credentials`);let r=Pd(n);n.Ea.add(3),await Dd(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ed(n)}async function Qd(e,t){let n=M(e);t?(n.Ea.delete(2),await Ed(n)):t||(n.Ea.add(2),await Dd(n),n.Ra.set(`Unknown`))}function $d(e){return e.ma||(e.ma=function(e,t,n){let r=M(e);return r.sa(),new bd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Id.bind(null,e),t_:Ld.bind(null,e),r_:Rd.bind(null,e),H_:zd.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Nd(e)?Md(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),Fd(e))}))),e.ma}function ef(e){return e.fa||(e.fa=function(e,t,n){let r=M(e);return r.sa(),new xd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:qd.bind(null,e),r_:Xd.bind(null,e),ta:Jd.bind(null,e),na:Yd.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Hd(e)):(await e.fa.stop(),e.Ta.length>0&&(A(q,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var tf=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(N.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nf(e,t){if(Ca(`AsyncQueue`,`${t}: ${e}`),_o(e))return new P(N.UNAVAILABLE,`${t}: ${e}`);throw e}var rf=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||I.comparator(t.key,n.key):(e,t)=>I.comparator(e.key,t.key),this.keyedMap=_c(),this.sortedSet=new Ao(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},af=class{constructor(){this.ga=new Ao(I.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):j(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},of=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,rf.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},sf=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},cf=class{constructor(){this.queries=lf(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=M(e),r=n.queries;n.queries=lf(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new P(N.ABORTED,`Firestore shutting down`))}};function lf(){return new pc((e=>sc(e)),oc)}async function uf(e,t){let n=M(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new sf,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=nf(e,`Initialization of query '${cc(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&mf(n)}async function df(e,t){let n=M(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ff(e,t){let n=M(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&mf(n)}function pf(e,t,n){let r=M(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function mf(e){e.Ca.forEach((e=>{e.next()}))}var hf,gf;(gf=hf||={}).Ma=`default`,gf.Cache=`cache`;var _f=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new of(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=of.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hf.Cache}},vf=class{constructor(e){this.key=e}},yf=class{constructor(e){this.key=e}},bf=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=H(),this.mutatedKeys=H(),this.eu=dc(e),this.tu=new rf(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new af,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=lc(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new of(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new af,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=H(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new yf(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new vf(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=H();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return of.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},xf=`SyncEngine`,Sf=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Cf=class{constructor(e){this.key=e,this.hu=!1}},wf=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new pc((e=>sc(e)),oc),this.Iu=new Map,this.Eu=new Set,this.du=new Ao(I.comparator),this.Au=new Map,this.Ru=new ku,this.Vu={},this.mu=new Map,this.fu=hu.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function Tf(e,t,n=!0){let r=qf(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Df(r,t,n,!0),i}async function Ef(e,t){await Df(qf(e),t,!0,!1)}async function Df(e,t,n,r){let i=await Qu(e.localStore,nc(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await Of(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&Od(e.remoteStore,i),s}async function Of(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await ed(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Vf(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await ed(e.localStore,t,!0),o=new bf(t,a.Qs),s=o.ru(a.documents),c=bl.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Vf(e,n,l.au);let u=new Sf(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function kf(e,t,n){let r=M(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!oc(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $u(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kd(r.remoteStore,i.targetId),zf(r,i.targetId)})).catch(z)):(zf(r,i.targetId),await $u(r.localStore,i.targetId,!0))}async function Af(e,t){let n=M(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kd(n.remoteStore,r.targetId))}async function jf(e,t,n){let r=Jf(e);try{let e=await function(e,t){let n=M(e),r=so.now(),i=t.reduce(((e,t)=>e.add(t.key)),H()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=hc(),c=H();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=Xc(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new $c(e.key,t,xs(t.value.mapValue),Wc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:vc(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new Ao(F),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wf(r,e.changes),await Hd(r.remoteStore)}catch(e){let t=nf(e,`Failed to persist write`);n.reject(t)}}async function Mf(e,t){let n=M(e);try{let e=await Yu(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(Da(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Da(r.hu,14607):e.removedDocuments.size>0&&(Da(r.hu,42227),r.hu=!1))})),await Wf(n,e,t)}catch(e){await z(e)}}function Nf(e,t,n){let r=M(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=M(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&mf(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Pf(e,t,n){let r=M(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new Ao(I.comparator);e=e.insert(a,Ss.newNoDocument(a,L.min()));let n=H().add(a);await Mf(r,new yl(L.min(),new Map,new Ao(F),e,n)),r.du=r.du.remove(a),r.Au.delete(t),Uf(r)}else await $u(r.localStore,t,!1).then((()=>zf(r,t,n))).catch(z)}async function Ff(e,t){let n=M(e),r=t.batch.batchId;try{let e=await qu(n.localStore,t);Rf(n,r,null),Lf(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await Wf(n,e)}catch(e){await z(e)}}async function If(e,t,n){let r=M(e);try{let e=await function(e,t){let n=M(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Da(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Rf(r,t,n),Lf(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await Wf(r,e)}catch(e){await z(e)}}function Lf(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function Rf(e,t,n){let r=M(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function zf(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||Bf(e,t)}))}function Bf(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(kd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Uf(e))}function Vf(e,t,n){for(let r of n)r instanceof vf?(e.Ru.addReference(r.key,t),Hf(e,r)):r instanceof yf?(A(xf,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Bf(e,r.key)):j(19791,{wu:r})}function Hf(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(A(xf,`New document in limbo: `+n),e.Eu.add(r),Uf(e))}function Uf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new I(Ka.fromString(t)),r=e.fu.next();e.Au.set(r,new Cf(n)),e.du=e.du.insert(n,r),Od(e.remoteStore,new ou(nc(Qs(n.path)),r,`TargetPurposeLimboResolution`,vo.ce))}}async function Wf(e,t,n){let r=M(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=zu.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=M(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>B.forEach(t,(t=>B.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>B.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!_o(e))throw e;A(Hu,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function Gf(e,t){let n=M(e);if(!n.currentUser.isEqual(t)){A(xf,`User change. New user:`,t.toKey());let e=await Ku(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new P(N.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wf(n,e.Ls)}}function Kf(e,t){let n=M(e),r=n.Au.get(t);if(r&&r.hu)return H().add(r.key);{let e=H(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function qf(e){let t=M(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pf.bind(null,t),t.Pu.H_=ff.bind(null,t.eventManager),t.Pu.yu=pf.bind(null,t.eventManager),t}function Jf(e){let t=M(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ff.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=If.bind(null,t),t}var Yf=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Gu(this.persistence,new Vu,e.initialUser,this.serializer)}Cu(e){return new Fu(Lu.mi,this.serializer)}Du(e){return new rd}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Yf.provider={build:()=>new Yf};var Xf=class extends Yf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Da(this.persistence.referenceDelegate instanceof Ru,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new bu(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?mu.DEFAULT:mu.withCacheSize(this.cacheSizeBytes);return new Fu((e=>Ru.mi(e,t)),this.serializer)}},Zf=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gf.bind(null,this.syncEngine),await Qd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cf}()}createDatastore(e){let t=gd(e.databaseInfo.databaseId),n=function(e){return new md(e)}(e.databaseInfo);return function(e,t,n,r){return new Cd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Td(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Nf(this.syncEngine,e,0)),function(){return od.v()?new od:new id}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new wf(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=M(e);A(q,`RemoteStore shutting down.`),t.Ea.add(5),await Dd(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Zf.provider={build:()=>new Zf};var Qf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ca(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},$f=`FirestoreClient`,ep=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ya.UNAUTHENTICATED,this.clientId=Ra.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{A($f,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(A($f,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=nf(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function tp(e,t){e.asyncQueue.verifyOperationInProgress(),A($f,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ku(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function np(e,t){e.asyncQueue.verifyOperationInProgress();let n=await rp(e);A($f,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Zd(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Zd(t.remoteStore,n))),e._onlineComponents=t}async function rp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){A($f,`Using user provided OfflineComponentProvider`);try{await tp(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===N.FAILED_PRECONDITION||e.code===N.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;wa(`Error using user provided cache. Falling back to memory cache: `+n),await tp(e,new Yf)}}else A($f,`Using default OfflineComponentProvider`),await tp(e,new Xf(void 0));return e._offlineComponents}async function ip(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(A($f,`Using user provided OnlineComponentProvider`),await np(e,e._uninitializedComponentsProvider._online)):(A($f,`Using default OnlineComponentProvider`),await np(e,new Zf))),e._onlineComponents}function ap(e){return ip(e).then((e=>e.syncEngine))}async function op(e){let t=await ip(e),n=t.eventManager;return n.onListen=Tf.bind(null,t.syncEngine),n.onUnlisten=kf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ef.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Af.bind(null,t.syncEngine),n}function sp(e,t,n={}){let r=new Oa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Qf({next:s=>{a.Nu(),t.enqueueAndForget((()=>df(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new P(N.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new P(N.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new _f(Qs(n.path),a,{includeMetadataChanges:!0,qa:!0});return uf(e,o)}(await op(e),e.asyncQueue,t,n,r))),r.promise}function cp(e,t,n={}){let r=new Oa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Qf({next:n=>{a.Nu(),t.enqueueAndForget((()=>df(e,o))),n.fromCache&&r.source===`server`?i.reject(new P(N.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new _f(n,a,{includeMetadataChanges:!0,qa:!0});return uf(e,o)}(await op(e),e.asyncQueue,t,n,r))),r.promise}function lp(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var up=new Map,dp=`firestore.googleapis.com`,fp=!0,pp=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new P(N.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=dp,this.ssl=fp}else this.host=e.host,this.ssl=e.ssl??fp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pu;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_u)throw new P(N.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Xa(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lp(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new P(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new P(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new P(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},mp=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new pp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new P(N.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new P(N.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new pp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Aa;switch(e.type){case`firstParty`:return new Pa(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new P(N.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=up.get(e);t&&(A(`ComponentProvider`,`Removing Datastore`),up.delete(e),t.terminate())}(this),Promise.resolve()}};function hp(e,t,n,r={}){e=to(e,mp);let i=ce(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(le(`https://${s}`),pe(`Firestore`,!0)),a.host!==dp&&a.host!==s&&wa(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!Re(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=ya.MOCK_USER;else{t=ue(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new P(N.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new ya(i)}e._authCredentials=new ja(new ka(t,n))}}var gp=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},_p=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(io(n,e._jsonSchema))return new e(t,r||null,new I(Ka.fromString(n.referencePath)))}};_p._jsonSchemaVersion=`firestore/documentReference/1.0`,_p._jsonSchema={type:ro(`string`,_p._jsonSchemaVersion),referencePath:ro(`string`)};var vp=class e extends gp{constructor(e,t,n){super(e,t,Qs(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _p(this.firestore,null,new I(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function yp(e,t,...n){if(e=Xe(e),Ya(`collection`,`path`,t),e instanceof mp){let r=Ka.fromString(t,...n);return Qa(r),new vp(e,null,r)}{if(!(e instanceof _p||e instanceof vp))throw new P(N.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Ka.fromString(t,...n));return Qa(r),new vp(e.firestore,null,r)}}function bp(e,t,...n){if(e=Xe(e),arguments.length===1&&(t=Ra.newId()),Ya(`doc`,`path`,t),e instanceof mp){let r=Ka.fromString(t,...n);return Za(r),new _p(e,null,new I(r))}{if(!(e instanceof _p||e instanceof vp))throw new P(N.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Ka.fromString(t,...n));return Za(r),new _p(e.firestore,e instanceof vp?e.converter:null,new I(r))}}var xp=`AsyncQueue`,Sp=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _d(this,`async_queue_retry`),this._c=()=>{let e=hd();e&&A(xp,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=hd();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=hd();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Oa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;A(xp,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Ca(`INTERNAL UNHANDLED ERROR: `,Cp(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=tf.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&j(47125,{Pc:Cp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Cp(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function wp(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var Tp=class extends mp{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Sp,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sp(e),this._firestoreClient=void 0,await e}}};function Ep(e,t){let n=typeof e==`object`?e:wn(),r=typeof e==`string`?e:t||Yo,i=vn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=ae(`firestore`);e&&hp(i,...e)}return i}function Dp(e){if(e._terminated)throw new P(N.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Op(e),e._firestoreClient}function Op(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new Jo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,lp(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new ep(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var kp=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Io.fromBase64String(t))}catch(e){throw new P(N.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(Io.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(io(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};kp._jsonSchemaVersion=`firestore/bytes/1.0`,kp._jsonSchema={type:ro(`string`,kp._jsonSchemaVersion),bytes:ro(`string`)};var Ap=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(N.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new Ja(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},jp=class{constructor(e){this._methodName=e}},Mp=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(N.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new P(N.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return F(this._lat,e._lat)||F(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(io(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};Mp._jsonSchemaVersion=`firestore/geoPoint/1.0`,Mp._jsonSchema={type:ro(`string`,Mp._jsonSchemaVersion),latitude:ro(`number`),longitude:ro(`number`)};var Np=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(io(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new P(N.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};Np._jsonSchemaVersion=`firestore/vectorValue/1.0`,Np._jsonSchema={type:ro(`string`,Np._jsonSchemaVersion),vectorValues:ro(`object`)};var Pp=/^__.*__$/,Fp=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new Qc(e,this.data,t,this.fieldTransforms):new $c(e,this.data,this.fieldMask,t,this.fieldTransforms)}},Ip=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $c(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Lp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ac:e})}}var Rp=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return em(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(Lp(this.Ac)&&Pp.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},zp=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||gd(e)}Cc(e,t,n,r=!1){return new Rp({Ac:e,methodName:t,Dc:n,path:Ja.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bp(e){let t=e._freezeSettings(),n=gd(e._databaseId);return new zp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vp(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Xp(`Data must be an object, but it was:`,o,r);let s=Jp(r,o),c,l;if(a.merge)c=new Po(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=Zp(t,r,n);if(!o.contains(i))throw new P(N.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);tm(e,i)||e.push(i)}c=new Po(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Fp(new bs(s),c,l)}var Hp=class e extends jp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},Up=class e extends jp{_toFieldTransform(e){return new Vc(e.path,new Nc)}isEqual(t){return t instanceof e}};function Wp(e,t,n,r){let i=e.Cc(1,t,n);Xp(`Data must be an object, but it was:`,i,r);let a=[],o=bs.empty();return Oo(r,((e,r)=>{let s=$p(t,e,n);r=Xe(r);let c=i.yc(s);if(r instanceof Hp)a.push(s);else{let e=qp(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new Ip(o,new Po(a),i.fieldTransforms)}function Gp(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[Zp(t,r,n)],c=[i];if(a.length%2!=0)throw new P(N.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Zp(t,a[e])),c.push(a[e+1]);let l=[],u=bs.empty();for(let e=s.length-1;e>=0;--e)if(!tm(l,s[e])){let t=s[e],n=c[e];n=Xe(n);let r=o.yc(t);if(n instanceof Hp)l.push(t);else{let e=qp(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new Ip(u,new Po(l),o.fieldTransforms)}function Kp(e,t,n,r=!1){return qp(n,e.Cc(r?4:3,t))}function qp(e,t){if(Yp(e=Xe(e)))return Xp(`Unsupported field value:`,t,e),Jp(e,t);if(e instanceof jp)return function(e,t){if(!Lp(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=qp(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Xe(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Oc(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=so.fromDate(e);return{timestampValue:Nl(t.serializer,n)}}if(e instanceof so){let n=new so(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Nl(t.serializer,n)}}if(e instanceof Mp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kp)return{bytesValue:Pl(t.serializer,e._byteString)};if(e instanceof _p){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ll(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Np)return function(e,t){return{mapValue:{fields:{[Zo]:{stringValue:es},[ts]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return Ec(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${eo(e)}`)}(e,t)}function Jp(e,t){let n={};return ko(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Oo(e,((e,r)=>{let i=qp(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Yp(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof so||e instanceof Mp||e instanceof kp||e instanceof _p||e instanceof jp||e instanceof Np)}function Xp(e,t,n){if(!Yp(n)||!$a(n)){let r=eo(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function Zp(e,t,n){if((t=Xe(t))instanceof Ap)return t._internalPath;if(typeof t==`string`)return $p(e,t);throw em(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Qp=RegExp(`[~\\*/\\[\\]]`);function $p(e,t,n){if(t.search(Qp)>=0)throw em(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ap(...t.split(`.`))._internalPath}catch{throw em(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function em(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new P(N.INVALID_ARGUMENT,s+e+c)}function tm(e,t){return e.some((e=>e.isEqual(t)))}var nm=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _p(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(im(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rm=class extends nm{data(){return super.data()}};function im(e,t){return typeof t==`string`?$p(e,t):t instanceof Ap?t._internalPath:t._delegate._internalPath}function am(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new P(N.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var om=class{},sm=class extends om{};function cm(e,t,...n){let r=[];t instanceof om&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof dm)).length,n=e.filter((e=>e instanceof lm)).length;if(t>1||t>0&&n>0)throw new P(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var lm=class e extends sm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return vm(e._query,t),new gp(e.firestore,e.converter,ic(e._query,t))}_parse(e){let t=Bp(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new P(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){_m(o,a);let t=[];for(let n of o)t.push(gm(r,e,n));s={arrayValue:{values:t}}}else s=gm(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||_m(o,a),s=Kp(n,t,o,a===`in`||a===`not-in`);return ks.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function um(e,t,n){let r=t,i=im(`where`,e);return lm._create(i,r,n)}var dm=class e extends om{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:As.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)vm(n,e),n=ic(n,e)}(e._query,t),new gp(e.firestore,e.converter,ic(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},fm=class e extends sm{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new P(N.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new P(N.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Es(t,n)}(e._query,this._field,this._direction);return new gp(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new Xs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}};function pm(e,t=`asc`){let n=t,r=im(`orderBy`,e);return fm._create(r,n)}var mm=class e extends sm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new gp(e.firestore,e.converter,ac(e._query,this._limit,this._limitType))}};function hm(e){return no(`limit`,e),mm._create(`limit`,e,`F`)}function gm(e,t,n){if(typeof(n=Xe(n))==`string`){if(n===``)throw new P(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!ec(t)&&n.indexOf(`/`)!==-1)throw new P(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(Ka.fromString(n));if(!I.isDocumentKey(r))throw new P(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ds(e,new I(r))}if(n instanceof _p)return ds(e,n._key);throw new P(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eo(n)}.`)}function _m(e,t){if(!Array.isArray(e)||e.length===0)throw new P(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vm(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new P(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new P(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var ym=class{convertValue(e,t=`none`){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Oo(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[ts].arrayValue?.values?.map((e=>zo(e.doubleValue)));return new Np(t)}convertGeoPoint(e){return new Mp(zo(e.latitude),zo(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Ko(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){let t=Ro(e);return new so(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Ka.fromString(e);Da(au(n),9688,{name:e});let r=new Xo(n.get(1),n.get(3)),i=new I(n.popFirst(5));return r.isEqual(t)||Ca(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function bm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var xm=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Sm=class e extends nm{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Cm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(im(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new P(N.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Sm._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Sm._jsonSchema={type:ro(`string`,Sm._jsonSchemaVersion),bundleSource:ro(`string`,`DocumentSnapshot`),bundleName:ro(`string`),bundle:ro(`string`)};var Cm=class extends Sm{data(e={}){return super.data(e)}},wm=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new xm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Cm(this._firestore,this._userDataWriter,n.key,n,new xm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(N.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Cm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new xm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Cm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Tm(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new P(N.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=Ra.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Tm(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return j(61501,{type:e})}}function Em(e){e=to(e,_p);let t=to(e.firestore,Tp);return sp(Dp(t),e._key).then((n=>Fm(t,e,n)))}wm._jsonSchemaVersion=`firestore/querySnapshot/1.0`,wm._jsonSchema={type:ro(`string`,wm._jsonSchemaVersion),bundleSource:ro(`string`,`QuerySnapshot`),bundleName:ro(`string`),bundle:ro(`string`)};var Dm=class extends ym{constructor(e){super(),this.firestore=e}convertBytes(e){return new kp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _p(this.firestore,null,t)}};function Om(e){e=to(e,gp);let t=to(e.firestore,Tp),n=Dp(t),r=new Dm(t);return am(e._query),cp(n,e._query).then((n=>new wm(t,r,e,n)))}function km(e,t,n){e=to(e,_p);let r=to(e.firestore,Tp),i=bm(e.converter,t,n);return Pm(r,[Vp(Bp(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,Wc.none())])}function Am(e,t,n,...r){e=to(e,_p);let i=to(e.firestore,Tp),a=Bp(i),o;return o=typeof(t=Xe(t))==`string`||t instanceof Ap?Gp(a,`updateDoc`,e._key,t,n,r):Wp(a,`updateDoc`,e._key,t),Pm(i,[o.toMutation(e._key,Wc.exists(!0))])}function jm(e){return Pm(to(e.firestore,Tp),[new rl(e._key,Wc.none())])}function Mm(e,t){let n=to(e.firestore,Tp),r=bp(e),i=bm(e.converter,t);return Pm(n,[Vp(Bp(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,Wc.exists(!1))]).then((()=>r))}function Nm(e,...t){e=Xe(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||wp(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wp(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof _p)o=to(e.firestore,Tp),s=Qs(e._key.path),a={next:n=>{t[r]&&t[r](Fm(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=to(e,gp);o=to(n.firestore,Tp),s=n._query;let i=new Dm(o);a={next:e=>{t[r]&&t[r](new wm(o,i,n,e))},error:t[r+1],complete:t[r+2]},am(e._query)}return function(e,t,n,r){let i=new Qf(r),a=new _f(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>uf(await op(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>df(await op(e),a)))}}(Dp(o),s,i,a)}function Pm(e,t){return function(e,t){let n=new Oa;return e.asyncQueue.enqueueAndForget((async()=>jf(await ap(e),t,n))),n.promise}(Dp(e),t)}function Fm(e,t,n){let r=n.docs.get(t._key);return new Sm(e,new Dm(e),t._key,r,new xm(n.hasPendingWrites,n.fromCache),t.converter)}function Im(){return new Up(`serverTimestamp`)}(function(e,t=!0){(function(e){ba=e})(Sn),_n(new Ze(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Tp(new Ma(e.getProvider(`auth-internal`)),new Ia(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new P(N.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Xo(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),Tn(_a,va,e),Tn(_a,va,`esm2020`)})();var Lm=`@firebase/database`,Rm=`1.1.0`,zm=``;function Bm(e){zm=e}var Vm=class{constructor(e){this.domStorage_=e,this.prefix_=`firebase:`}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ae(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ke(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}},Hm=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Pe(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}},Um=function(e){try{if(typeof window<`u`&&window[e]!==void 0){let t=window[e];return t.setItem(`firebase:sentinel`,`cache`),t.removeItem(`firebase:sentinel`),new Vm(t)}}catch{}return new Hm},Wm=Um(`localStorage`),Gm=Um(`sessionStorage`),Km=new ct(`@firebase/database`),qm=(function(){let e=1;return function(){return e++}})(),Jm=function(e){let t=Ue(e),n=new Ve;n.update(t);let r=n.digest();return g.encodeByteArray(r)},Ym=function(...e){let t=``;for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r==`object`&&typeof r.length==`number`?t+=Ym.apply(null,r):typeof r==`object`?t+=Ae(r):t+=r,t+=` `}return t},Xm=null,Zm=!0,Qm=function(e,t){f(!t||e===!0||e===!1,`Can't turn on custom loggers persistently.`),e===!0?(Km.logLevel=D.VERBOSE,Xm=Km.log.bind(Km),t&&Gm.set(`logging_enabled`,!0)):typeof e==`function`?Xm=e:(Xm=null,Gm.remove(`logging_enabled`))},$m=function(...e){if(Zm===!0&&(Zm=!1,Xm===null&&Gm.get(`logging_enabled`)===!0&&Qm(!0)),Xm){let t=Ym.apply(null,e);Xm(t)}},eh=function(e){return function(...t){$m(e,...t)}},th=function(...e){let t=`FIREBASE INTERNAL ERROR: `+Ym(...e);Km.error(t)},nh=function(...e){let t=`FIREBASE FATAL ERROR: ${Ym(...e)}`;throw Km.error(t),Error(t)},rh=function(...e){let t=`FIREBASE WARNING: `+Ym(...e);Km.warn(t)},ih=function(){typeof window<`u`&&window.location&&window.location.protocol&&window.location.protocol.indexOf(`https:`)!==-1&&rh(`Insecure Firebase access from a secure page. Please use https in calls to new Firebase().`)},ah=function(e){return typeof e==`number`&&(e!==e||e===1/0||e===-1/0)},oh=function(e){if(ye()||document.readyState===`complete`)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,10);return}t||(t=!0,e())};document.addEventListener?(document.addEventListener(`DOMContentLoaded`,n,!1),window.addEventListener(`load`,n,!1)):document.attachEvent&&(document.attachEvent(`onreadystatechange`,()=>{document.readyState===`complete`&&n()}),window.attachEvent(`onload`,n))}},sh=`[MIN_NAME]`,ch=`[MAX_NAME]`,lh=function(e,t){if(e===t)return 0;if(e===sh||t===ch)return-1;if(t===sh||e===ch)return 1;{let n=Sh(e),r=Sh(t);return n===null?r===null&&e<t?-1:1:r===null?-1:n-r===0?e.length-t.length:n-r}},uh=function(e,t){return e===t?0:e<t?-1:1},dh=function(e,t){if(t&&e in t)return t[e];throw Error(`Missing required key (`+e+`) in object: `+Ae(t))},fh=function(e){if(typeof e!=`object`||!e)return Ae(e);let t=[];for(let n in e)t.push(n);t.sort();let n=`{`;for(let r=0;r<t.length;r++)r!==0&&(n+=`,`),n+=Ae(t[r]),n+=`:`,n+=fh(e[t[r]]);return n+=`}`,n},ph=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function mh(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var hh=function(e){f(!ah(e),`Invalid JSON number`);let t=1023,n,r,i,a,o;e===0?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,e=Math.abs(e),e>=2**(1-t)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=a+t,i=Math.round(e*2**(52-a)-2**52)):(r=0,i=Math.round(e/2**(1-t-52))));let s=[];for(o=52;o;--o)s.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();let c=s.join(``),l=``;for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);e.length===1&&(e=`0`+e),l+=e}return l.toLowerCase()},gh=function(){return!!(typeof window==`object`&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_h=function(){return typeof Windows==`object`&&typeof Windows.UI==`object`};function vh(e,t){let n=`Unknown Error`;e===`too_big`?n=`The data requested exceeds the maximum size that can be accessed with a single request.`:e===`permission_denied`?n=`Client doesn't have permission to access the desired data.`:e===`unavailable`&&(n=`The service is unavailable`);let r=Error(e+` at `+t._path.toString()+`: `+n);return r.code=e.toUpperCase(),r}var yh=RegExp(`^-?(0*)\\d{1,10}$`),bh=-2147483648,xh=2147483647,Sh=function(e){if(yh.test(e)){let t=Number(e);if(t>=bh&&t<=xh)return t}return null},Ch=function(e){try{e()}catch(e){setTimeout(()=>{throw rh(`Exception was thrown by user callback.`,e.stack||``),e},0)}},wh=function(){return(typeof window==`object`&&window.navigator&&window.navigator.userAgent||``).search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Th=function(e,t){let n=setTimeout(e,t);return typeof n==`number`&&typeof Deno<`u`&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n==`object`&&n.unref&&n.unref(),n},Eh=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){rh(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}},Dh=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&e.code===`auth/token-not-initialized`?($m(`Got auth/token-not-initialized error.  Treating as null token.`),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e=`Provided authentication credentials for the app named "`+this.appName_+`" are invalid. This usually indicates your app was not initialized correctly. `;`credential`in this.firebaseOptions_?e+=`Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:`serviceAccount`in this.firebaseOptions_?e+=`Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:e+=`Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.`,rh(e)}},Oh=class{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}};Oh.OWNER=`owner`;var kh=`5`,Ah=`v`,jh=`s`,Mh=`r`,Nh=`f`,Ph=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fh=`ls`,Ih=`p`,Lh=`ac`,Rh=`websocket`,zh=`long_polling`,Bh=class{constructor(e,t,n,r,i=!1,a=``,o=!1,s=!1,c=null){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=s,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(`.`)+1),this.internalHost=Wm.get(`host:`+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)===`s-`}isCustomHost(){return this._domain!==`firebaseio.com`&&this._domain!==`firebaseio-demo.com`}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wm.set(`host:`+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+=`<`+this.persistenceKey+`>`),e}toURLString(){let e=this.secure?`https://`:`http://`,t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:``;return`${e}${this.host}/${t}`}};function Vh(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Hh(e,t,n){f(typeof t==`string`,`typeof type must == string`),f(typeof n==`object`,`typeof params must == object`);let r;if(t===Rh)r=(e.secure?`wss://`:`ws://`)+e.internalHost+`/.ws?`;else if(t===zh)r=(e.secure?`https://`:`http://`)+e.internalHost+`/.lp?`;else throw Error(`Unknown connection type: `+t);Vh(e)&&(n.ns=e.namespace);let i=[];return mh(n,(e,t)=>{i.push(e+`=`+t)}),r+i.join(`&`)}var Uh=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Pe(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return x(this.counters_)}},Wh={},Gh={};function Kh(e){let t=e.toString();return Wh[t]||(Wh[t]=new Uh),Wh[t]}function qh(e,t){let n=e.toString();return Gh[n]||(Gh[n]=t()),Gh[n]}var Jh=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ch(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&=(this.onClose(),null);break}this.currentResponseNum++}}},Yh=`start`,Xh=`close`,Zh=`pLPCommand`,Qh=`pRTLPCB`,$h=`id`,eg=`pw`,tg=`ser`,ng=`cb`,rg=`dframe`,ig=1870,ag=30,og=ig-ag,sg=25e3,cg=3e4,lg=class e{constructor(e,t,n,r,i,a,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eh(e),this.stats_=Kh(t),this.urlFn=e=>(this.appCheckToken&&(e[Lh]=this.appCheckToken),Hh(t,zh,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Jh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_(`Timed out trying to connect.`),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cg)),oh(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ug((...e)=>{let[t,n,r,i,a]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null),this.everConnected_=!0,t===Yh)this.id=n,this.password=r;else if(t===Xh)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error(`Unrecognized command received: `+t)},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[Yh]=`t`,e[tg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(e[ng]=this.scriptTagHolder.uniqueCallbackIdentifier),e[Ah]=kh,this.transportSessionId&&(e[jh]=this.transportSessionId),this.lastSessionId&&(e[Fh]=this.lastSessionId),this.applicationId&&(e[Ih]=this.applicationId),this.appCheckToken&&(e[Lh]=this.appCheckToken),typeof location<`u`&&location.hostname&&Ph.test(location.hostname)&&(e[Mh]=Nh);let t=this.urlFn(e);this.log_(`Connecting via long-poll to `+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return ye()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<`u`&&document.createElement!=null&&!gh()&&!_h()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&=(this.scriptTagHolder.close(),null),this.myDisconnFrame&&=(document.body.removeChild(this.myDisconnFrame),null),this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null)}onClosed_(){this.isClosed_||(this.log_(`Longpoll is closing itself`),this.shutdown_(),this.onDisconnect_&&=(this.onDisconnect_(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`Longpoll is being closed.`),this.shutdown_())}send(e){let t=Ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=ph(v(t),og);for(let e=0;e<n.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ye())return;this.myDisconnFrame=document.createElement(`iframe`);let n={};n[rg]=`t`,n[$h]=e,n[eg]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=`none`,document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ae(e).length;this.bytesReceived+=t,this.stats_.incrementCounter(`bytes_received`,t)}},ug=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ye())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=qm(),window[Zh+this.uniqueCallbackIdentifier]=t,window[Qh+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r=``;this.myIFrame.src&&this.myIFrame.src.substr(0,11)===`javascript:`&&(r=`<script>document.domain="`+document.domain+`";<\/script>`);let i=`<html><body>`+r+`</body></html>`;try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){$m(`frame writing exception`),e.stack&&$m(e.stack),$m(e)}}}static createIFrame_(){let e=document.createElement(`iframe`);if(e.style.display=`none`,document.body){document.body.appendChild(e);try{e.contentWindow.document||$m(`No IE domain setting required`)}catch{e.src=`javascript:void((function(){document.open();document.domain='`+document.domain+`';document.close();})())`}}else throw`Document body has not initialized. Wait to initialize Firebase until after the document is ready.`;return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent=``,setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},0));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[$h]=this.myID,e[eg]=this.myPW,e[tg]=this.currentSerial;let t=this.urlFn(e),n=``,r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ag+n.length<=ig;){let e=this.pendingSegs.shift();n=n+`&seg`+r+`=`+e.seg+`&ts`+r+`=`+e.ts+`&d`+r+`=`+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(sg));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){ye()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement(`script`);n.type=`text/javascript`,n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;(!e||e===`loaded`||e===`complete`)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{$m(`Long-poll script failed to load: `+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},1)}},dg=16384,fg=45e3,pg=null;typeof MozWebSocket<`u`?pg=MozWebSocket:typeof WebSocket<`u`&&(pg=WebSocket);var mg=class e{constructor(t,n,r,i,a,o,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eh(this.connId),this.stats_=Kh(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r,i){let a={};return a[Ah]=kh,!ye()&&typeof location<`u`&&location.hostname&&Ph.test(location.hostname)&&(a[Mh]=Nh),t&&(a[jh]=t),n&&(a[Fh]=n),r&&(a[Lh]=r),i&&(a[Ih]=i),Hh(e,Rh,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_(`Websocket connecting to `+this.connURL),this.everConnected_=!1,Wm.set(`previous_websocket_failure`,!0);try{let e;if(ye()){let t=this.nodeAdmin?`AdminNode`:`Node`;e={headers:{"User-Agent":`Firebase/${kh}/${zm}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||``}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers[`X-Firebase-AppCheck`]=this.appCheckToken);let n={},r=this.connURL.indexOf(`wss://`)===0?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new pg(this.connURL,[],e)}catch(e){this.log_(`Error instantiating WebSocket.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_();return}this.mySock.onopen=()=>{this.log_(`Websocket connected.`),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_(`Websocket connection was disconnected.`),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_(`WebSocket error.  Closing connection.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<`u`&&navigator.userAgent){let e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&pg!==null&&!e.forceDisallow_}static previouslyFailed(){return Wm.isInMemoryStorage||Wm.get(`previous_websocket_failure`)===!0}markConnectionHealthy(){Wm.remove(`previous_websocket_failure`)}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join(``);this.frames=null;let t=ke(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(f(this.frames===null,`We already have a frame buffer`),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter(`bytes_received`,t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);e!==null&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=Ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=ph(t,dg);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&=(clearInterval(this.keepaliveTimer),null),this.mySock&&=(this.mySock.close(),null)}onClosed_(){this.isClosed_||(this.log_(`WebSocket is closing itself`),this.shutdown_(),this.onDisconnect&&=(this.onDisconnect(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`WebSocket is being closed`),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_(`0`),this.resetKeepAlive()},Math.floor(fg))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_(`Exception thrown from WebSocket.send():`,e.message||e.data,`Closing connection.`),setTimeout(this.onClosed_.bind(this),0)}}};mg.responsesRequiredToBeHealthy=2,mg.healthyTimeout=3e4;var hg=class e{static get ALL_TRANSPORTS(){return[lg,mg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(t){let n=mg&&mg.isAvailable(),r=n&&!mg.previouslyFailed();if(t.webSocketOnly&&(n||rh(`wss:// URL used, but browser isn't known to support websockets.  Trying anyway.`),r=!0),r)this.transports_=[mg];else{let t=this.transports_=[];for(let n of e.ALL_TRANSPORTS)n&&n.isAvailable()&&t.push(n);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error(`No transports available`)}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}};hg.globalTransportInitialized_=!1;var gg=6e4,_g=5e3,vg=10*1024,yg=100*1024,bg=`t`,xg=`d`,Sg=`s`,Cg=`r`,wg=`e`,Tg=`o`,Eg=`a`,Dg=`n`,Og=`p`,kg=`h`,Ag=class{constructor(e,t,n,r,i,a,o,s,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eh(`c:`+this.id+`:`),this.transportManager_=new hg(t),this.log_(`Connection created`),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},0);let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Th(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yg?(this.log_(`Connection exceeded healthy timeout but has received `+this.conn_.bytesReceived+` bytes.  Marking connection healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>vg?this.log_(`Connection exceeded healthy timeout but has sent `+this.conn_.bytesSent+` bytes.  Leaving connection alive.`):(this.log_(`Closing unhealthy connection after timeout.`),this.close()))},Math.floor(r)))}nextTransportId_(){return`c:`+this.id+`:`+ this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_(`Secondary connection lost.`),this.onSecondaryConnectionLost_()):this.log_(`closing an old connection`)}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_(`message on old connection`))}}sendRequest(e){let t={t:`d`,d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(`cleaning up and promoting a connection: `+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(bg in e){let t=e[bg];t===Eg?this.upgradeIfSecondaryHealthy_():t===Cg?(this.log_(`Got a reset on secondary, closing it`),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Tg&&(this.log_(`got pong on secondary.`),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=dh(`t`,e),n=dh(`d`,e);if(t===`c`)this.onSecondaryControl_(n);else if(t===`d`)this.pendingDataMessages.push(n);else throw Error(`Unknown protocol layer: `+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_(`Secondary connection is healthy.`),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(`sending ping on secondary.`),this.secondaryConn_.send({t:`c`,d:{t:Og,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_(`sending client ack on secondary`),this.secondaryConn_.send({t:`c`,d:{t:Eg,d:{}}}),this.log_(`Ending transmission on primary`),this.conn_.send({t:`c`,d:{t:Dg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=dh(`t`,e),n=dh(`d`,e);t===`c`?this.onControl_(n):t===`d`&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=dh(bg,e);if(xg in e){let n=e[xg];if(t===kg){let e={...n};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if(t===Dg){this.log_(`recvd end transmission on primary`),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Sg?this.onConnectionShutdown_(n):t===Cg?this.onReset_(n):t===wg?th(`Server Error: `+n):t===Tg?(this.log_(`got pong on primary.`),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):th(`Unknown control packet command: `+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),kh!==n&&rh(`Protocol version mismatch detected`),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Th(()=>{this.secondaryConn_&&(this.log_(`Timed out trying to upgrade.`),this.secondaryConn_.close())},Math.floor(gg))}onReset_(e){this.log_(`Reset packet received.  New host: `+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_(`Realtime connection established.`),this.conn_=e,this.state_=1,this.onReady_&&=(this.onReady_(t,this.sessionId),null),this.primaryResponsesRequired_===0?(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0):Th(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_g))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_(`sending ping on primary.`),this.sendData_({t:`c`,d:{t:Og,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_(`Realtime connection failed.`),this.repoInfo_.isCacheableHost()&&(Wm.remove(`host:`+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_(`Realtime connection lost.`),this.close()}onConnectionShutdown_(e){this.log_(`Connection shutdown command received. Shutting down...`),this.onKill_&&=(this.onKill_(e),null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw`Connection is not connected`;this.tx_.send(e)}close(){this.state_!==2&&(this.log_(`Closing realtime connection.`),this.state_=2,this.closeConnections_(),this.onDisconnect_&&=(this.onDisconnect_(),null))}closeConnections_(){this.log_(`Shutting down all connections`),this.conn_&&=(this.conn_.close(),null),this.secondaryConn_&&=(this.secondaryConn_.close(),null),this.healthyTimeout_&&=(clearTimeout(this.healthyTimeout_),null)}},jg=class{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}},Mg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},f(Array.isArray(e)&&e.length>0,`Requires a non-empty array`)}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context)){r.splice(e,1);return}}validateEventType_(e){f(this.allowedEvents_.find(t=>t===e),`Unknown event: `+e)}},Ng=class e extends Mg{static getInstance(){return new e}constructor(){super([`online`]),this.online_=!0,typeof window<`u`&&window.addEventListener!==void 0&&!he()&&(window.addEventListener(`online`,()=>{this.online_||(this.online_=!0,this.trigger(`online`,!0))},!1),window.addEventListener(`offline`,()=>{this.online_&&(this.online_=!1,this.trigger(`online`,!1))},!1))}getInitialEvent(e){return f(e===`online`,`Unknown event type: `+e),[this.online_]}currentlyOnline(){return this.online_}},Pg=32,Fg=768,Ig=class{constructor(e,t){if(t===void 0){this.pieces_=e.split(`/`);let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e=``;for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==``&&(e+=`/`+this.pieces_[t]);return e||`/`}};function Lg(){return new Ig(``)}function J(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Rg(e){return e.pieces_.length-e.pieceNum_}function zg(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ig(e.pieces_,t)}function Bg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Vg(e){let t=``;for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==``&&(t+=`/`+encodeURIComponent(String(e.pieces_[n])));return t||`/`}function Hg(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Ug(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ig(t,0)}function Wg(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof Ig)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split(`/`);for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Ig(n,0)}function Y(e){return e.pieceNum_>=e.pieces_.length}function Gg(e,t){let n=J(e),r=J(t);if(n===null)return t;if(n===r)return Gg(zg(e),zg(t));throw Error(`INTERNAL ERROR: innerPath (`+t+`) is not within outerPath (`+e+`)`)}function Kg(e,t){let n=Hg(e,0),r=Hg(t,0);for(let e=0;e<n.length&&e<r.length;e++){let t=lh(n[e],r[e]);if(t!==0)return t}return n.length===r.length?0:n.length<r.length?-1:1}function qg(e,t){if(Rg(e)!==Rg(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Jg(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Rg(e)>Rg(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Yg=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Hg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=We(this.parts_[e]);Qg(this)}};function Xg(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=We(t),Qg(e)}function Zg(e){let t=e.parts_.pop();e.byteLength_-=We(t),e.parts_.length>0&&--e.byteLength_}function Qg(e){if(e.byteLength_>Fg)throw Error(e.errorPrefix_+`has a key path longer than 768 bytes (`+e.byteLength_+`).`);if(e.parts_.length>Pg)throw Error(e.errorPrefix_+`path specified exceeds the maximum depth that can be written (32) or object contains a cycle `+$g(e))}function $g(e){return e.parts_.length===0?``:`in property '`+e.parts_.join(`.`)+`'`}var e_=class e extends Mg{static getInstance(){return new e}constructor(){super([`visible`]);let e,t;typeof document<`u`&&document.addEventListener!==void 0&&(document.hidden===void 0?document.mozHidden===void 0?document.msHidden===void 0?document.webkitHidden!==void 0&&(t=`webkitvisibilitychange`,e=`webkitHidden`):(t=`msvisibilitychange`,e=`msHidden`):(t=`mozvisibilitychange`,e=`mozHidden`):(t=`visibilitychange`,e=`hidden`)),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger(`visible`,t))},!1)}getInitialEvent(e){return f(e===`visible`,`Unknown event type: `+e),[this.visible_]}},t_=1e3,n_=300*1e3,r_=30*1e3,i_=1.3,a_=3e4,o_=`server_kill`,s_=3,c_=class e extends jg{constructor(t,n,r,i,a,o,s,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=eh(`p:`+this.id+`:`),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=t_,this.maxReconnectDelay_=n_,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!ye())throw Error(`Auth override specified in options, but not supported on non Node.js platforms`);e_.getInstance().on(`visible`,this.onVisible_,this),t.host.indexOf(`fblocal`)===-1&&Ng.getInstance().on(`online`,this.onOnline_,this)}sendRequest(e,t,n){let r=++this.requestNumber_,i={r,a:e,b:t};this.log_(Ae(i)),f(this.connected_,`sendRequest call when we're not connected not allowed.`),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();let t=new se,n={action:`g`,request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{let n=e.d;e.s===`ok`?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();let i=e._queryIdentifier,a=e._path.toString();this.log_(`Listen called for `+a+` `+i),this.listens.has(a)||this.listens.set(a,new Map),f(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`listen() called for non-default but complete query`),f(!this.listens.get(a).has(i),`listen() called twice for same path/queryId.`);let o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest(`g`,t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){let n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_(`Listen on `+r+` for `+i);let a={p:r};t.tag&&(a.q=n._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(`q`,a,a=>{let o=a.d,s=a.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_(`listen response`,a),s!==`ok`&&this.removeListen_(r,i),t.onComplete&&t.onComplete(s,o))})}static warnOnListenWarnings_(e,t){if(e&&typeof e==`object`&&Pe(e,`w`)){let n=Fe(e,`w`);Array.isArray(n)&&~n.indexOf(`no_index`)&&rh(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${`".indexOn": "`+t._queryParams.getIndex().toString()+`"`} at ${t._path.toString()} to your security rules for better performance.`)}}refreshAuthToken(e){this.authToken_=e,this.log_(`Auth token refreshed`),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(`unauth`,{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ne(e))&&(this.log_(`Admin auth credential detected.  Reducing max reconnect time.`),this.maxReconnectDelay_=r_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_(`App check token refreshed`),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest(`unappeck`,{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=Me(e)?`auth`:`gauth`,n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_==`object`&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,r=t.d||`error`;this.authToken_===e&&(n===`ok`?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest(`appcheck`,{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||`error`;t===`ok`?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),r=e._queryIdentifier;this.log_(`Unlisten called for `+n+` `+r),f(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`unlisten() called for non-default but complete query`),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_(`Unlisten on `+e+` for `+t);let i={p:e};r&&(i.q=n,i.t=r),this.sendRequest(`n`,i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`o`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`o`,data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`om`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`om`,data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`oc`,e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:`oc`,data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){let i={p:t,d:n};this.log_(`onDisconnect `+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},0)})}put(e,t,n,r){this.putInternal(`p`,e,t,n,r)}merge(e,t,n,r){this.putInternal(`m`,e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();let a={p:t,d:n};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_(`Buffering put: `+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+` response`,n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_(`reportStats`,t),this.sendRequest(`s`,t,e=>{if(e.s!==`ok`){let t=e.d;this.log_(`reportStats`,`Error sending stats: `+t)}})}}onDataMessage_(e){if(`r`in e){this.log_(`from server: `+Ae(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if(`error`in e)throw`A server-side error has occurred: `+e.error;else `a`in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_(`handleServerMessage`,e,t),e===`d`?this.onDataUpdate_(t.p,t.d,!1,t.t):e===`m`?this.onDataUpdate_(t.p,t.d,!0,t.t):e===`c`?this.onListenRevoked_(t.p,t.q):e===`ac`?this.onAuthRevoked_(t.s,t.d):e===`apc`?this.onAppCheckRevoked_(t.s,t.d):e===`sd`?this.onSecurityDebugPacket_(t):th(`Unrecognized action received from server: `+Ae(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_(`connection ready`),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){f(!this.realtime_,`Scheduling a connect when we're already connected/ing?`),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(`Window became visible.  Reducing delay.`),this.reconnectDelay_=t_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_(`Browser went online.`),this.reconnectDelay_=t_,this.realtime_||this.scheduleConnect_(0)):(this.log_(`Browser went offline.  Killing connection.`),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_(`data client disconnected`),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&=(new Date().getTime()-this.lastConnectionEstablishedTime_>a_&&(this.reconnectDelay_=t_),null):(this.log_(`Window isn't visible.  Delaying reconnect.`),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_(`Trying to reconnect in `+t+`ms`),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*i_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_(`Making a connection attempt`),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+`:`+ e.nextConnectionId_++,a=this.lastSessionId,o=!1,s=null,c=function(){s?s.close():(o=!0,r())};this.realtime_={close:c,sendRequest:function(e){f(s,`sendRequest call when we're not connected not allowed.`),s.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[e,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?$m(`getToken() completed but was canceled`):($m(`getToken() completed. Creating connection.`),this.authToken_=e&&e.accessToken,this.appCheckToken_=c&&c.token,s=new Ag(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{rh(e+` (`+this.repoInfo_.toString()+`)`),this.interrupt(o_)},a))}catch(e){this.log_(`Failed to get token: `+e),o||(this.repoInfo_.nodeAdmin&&rh(e),c())}}}interrupt(e){$m(`Interrupting connection for reason: `+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&=(clearTimeout(this.establishConnectionTimer_),null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$m(`Resuming connection for reason: `+e),delete this.interruptReasons_[e],Ie(this.interruptReasons_)&&(this.reconnectDelay_=t_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&`h`in t.request&&t.queued&&(t.onComplete&&t.onComplete(`disconnect`),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>fh(e)).join(`$`):`default`;let r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete(`permission_denied`)}removeListen_(e,t){let n=new Ig(e).toString(),r;if(this.listens.has(n)){let e=this.listens.get(n);r=e.get(t),e.delete(t),e.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){$m(`Auth token revoked: `+e+`/`+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=s_&&(this.reconnectDelay_=r_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){$m(`App check token revoked: `+e+`/`+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=s_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):`msg`in e&&console.log(`FIREBASE: `+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t=`js`;ye()&&(t=this.repoInfo_.nodeAdmin?`admin_node`:`node`),e[`sdk.`+t+`.`+zm.replace(/\./g,`-`)]=1,he()?e[`framework.cordova`]=1:ve()&&(e[`framework.reactnative`]=1),this.reportStats(e)}shouldReconnect_(){let e=Ng.getInstance().currentlyOnline();return Ie(this.interruptReasons_)&&e}};c_.nextPersistentConnectionId_=0,c_.nextConnectionId_=0;var X=class e{constructor(e,t){this.name=e,this.node=t}static Wrap(t,n){return new e(t,n)}},l_=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new X(sh,e),r=new X(sh,t);return this.compare(n,r)!==0}minPost(){return X.MIN}},u_,d_=class extends l_{static get __EMPTY_NODE(){return u_}static set __EMPTY_NODE(e){u_=e}compare(e,t){return lh(e.name,t.name)}isDefinedOn(e){throw p(`KeyIndex.isDefinedOn not expected to be called.`)}indexedValueChanged(e,t){return!1}minPost(){return X.MIN}maxPost(){return new X(ch,u_)}makePost(e,t){return f(typeof e==`string`,`KeyIndex indexValue must always be a string.`),new X(e,u_)}toString(){return`.key`}},f_=new d_,p_=class{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},m_=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??g_.EMPTY_NODE,this.right=a??g_.EMPTY_NODE}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return g_.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return g_.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){return 2**this.check_()<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error(`Red node has red child(`+this.key+`,`+this.value+`)`);if(this.right.isRed_())throw Error(`Right child of (`+this.key+`,`+this.value+`) is red`);let e=this.left.check_();if(e!==this.right.check_())throw Error(`Black depths differ`);return e+(this.isRed_()?0:1)}};m_.RED=!0,m_.BLACK=!1;var h_=class{copy(e,t,n,r,i){return this}insert(e,t,n){return new m_(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},g_=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,m_.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,m_.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw Error(`Attempted to find predecessor key for a nonexistent key.  What gives?`)}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new p_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new p_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new p_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new p_(this.root_,null,this.comparator_,!0,e)}};g_.EMPTY_NODE=new h_;function __(e,t){return lh(e.name,t.name)}function v_(e,t){return lh(e,t)}var y_;function b_(e){y_=e}var x_=function(e){return typeof e==`number`?`number:`+hh(e):`string:`+e},S_=function(e){if(e.isLeafNode()){let t=e.val();f(typeof t==`string`||typeof t==`number`||typeof t==`object`&&Pe(t,`.sv`),`Priority must be a string or number.`)}else f(e===y_||e.isEmpty(),`priority of unexpected type.`);f(e===y_||e.getPriority().isEmpty(),`Priority nodes can't have a priority of their own.`)},C_,w_=class e{static set __childrenNodeConstructor(e){C_=e}static get __childrenNodeConstructor(){return C_}constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,f(this.value_!==void 0&&this.value_!==null,`LeafNode shouldn't be created with null/undefined value.`),S_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Y(t)?this:J(t)===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return t===`.priority`?this.updatePriority(n):n.isEmpty()&&t!==`.priority`?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let r=J(t);return r===null?n:n.isEmpty()&&r!==`.priority`?this:(f(r!==`.priority`||Rg(t)===1,`.priority must be the last token in a path`),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(zg(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e=``;this.priorityNode_.isEmpty()||(e+=`priority:`+x_(this.priorityNode_.val())+`:`);let t=typeof this.value_;e+=t+`:`,t===`number`?e+=hh(this.value_):e+=this.value_,this.lazyHash_=Jm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(f(t.isLeafNode(),`Unknown node type`),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return f(i>=0,`Unknown leaf type: `+n),f(a>=0,`Unknown leaf type: `+r),i===a?r===`object`?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}};w_.VALUE_TYPE_ORDER=[`object`,`boolean`,`number`,`string`];var T_,E_;function D_(e){T_=e}function O_(e){E_=e}var k_=new class extends l_{compare(e,t){let n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return i===0?lh(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return X.MIN}maxPost(){return new X(ch,new w_(`[PRIORITY-POST]`,E_))}makePost(e,t){return new X(t,new w_(`[PRIORITY-POST]`,T_(e)))}toString(){return`.priority`}},A_=Math.log(2),j_=class{constructor(e){let t=e=>parseInt(Math.log(e)/A_,10),n=e=>parseInt(Array(e+1).join(`1`),2);this.count=t(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},M_=function(e,t,n,r){e.sort(t);let i=function(t,r){let a=r-t,o,s;if(a===0)return null;if(a===1)return o=e[t],s=n?n(o):o,new m_(s,o.node,m_.BLACK,null,null);{let c=parseInt(a/2,10)+t,l=i(t,c),u=i(c+1,r);return o=e[c],s=n?n(o):o,new m_(s,o.node,m_.BLACK,l,u)}},a=function(t){let r=null,a=null,o=e.length,s=function(t,r){let a=o-t,s=o;o-=t;let l=i(a+1,s),u=e[a];c(new m_(n?n(u):u,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(a=e,r=e)};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),r=2**(t.count-(e+1));n?s(r,m_.BLACK):(s(r,m_.BLACK),s(r,m_.RED))}return a}(new j_(e.length));return new g_(r||t,a)},N_,P_={},F_=class e{static get Default(){return f(P_&&k_,`ChildrenNode.ts has not been loaded`),N_||=new e({".priority":P_},{".priority":k_}),N_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Fe(this.indexes_,e);if(!t)throw Error(`No index defined for `+e);return t instanceof g_?t:null}hasIndex(e){return Pe(this.indexSet_,e.toString())}addIndex(t,n){f(t!==f_,`KeyIndex always exists and isn't meant to be added to the IndexMap.`);let r=[],i=!1,a=n.getIterator(X.Wrap),o=a.getNext();for(;o;)i||=t.isDefinedOn(o.node),r.push(o),o=a.getNext();let s;s=i?M_(r,t.getCompare()):P_;let c=t.toString(),l={...this.indexSet_};l[c]=t;let u={...this.indexes_};return u[c]=s,new e(u,l)}addToIndexes(t,n){return new e(Le(this.indexes_,(e,r)=>{let i=Fe(this.indexSet_,r);if(f(i,`Missing index implementation for `+r),e===P_)if(i.isDefinedOn(t.node)){let e=[],r=n.getIterator(X.Wrap),a=r.getNext();for(;a;)a.name!==t.name&&e.push(a),a=r.getNext();return e.push(t),M_(e,i.getCompare())}else return P_;else{let r=n.get(t.name),i=e;return r&&(i=i.remove(new X(t.name,r))),i.insert(t,t.node)}}),this.indexSet_)}removeFromIndexes(t,n){return new e(Le(this.indexes_,e=>{if(e===P_)return e;{let r=n.get(t.name);return r?e.remove(new X(t.name,r)):e}}),this.indexSet_)}},I_,Z=class e{static get EMPTY_NODE(){return I_||=new e(new g_(v_),null,F_.Default)}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&S_(this.priorityNode_),this.children_.isEmpty()&&f(!this.priorityNode_||this.priorityNode_.isEmpty(),`An empty node cannot have a priority`)}isLeafNode(){return!1}getPriority(){return this.priorityNode_||I_}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(e===`.priority`)return this.getPriority();{let t=this.children_.get(e);return t===null?I_:t}}getChild(e){let t=J(e);return t===null?this:this.getImmediateChild(t).getChild(zg(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(t,n){if(f(n,`We should always be passing snapshot nodes`),t===`.priority`)return this.updatePriority(n);{let r=new X(t,n),i,a;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));let o=i.isEmpty()?I_:this.priorityNode_;return new e(i,o,a)}}updateChild(e,t){let n=J(e);if(n===null)return t;{f(J(e)!==`.priority`||Rg(e)===1,`.priority must be the last token in a path`);let r=this.getImmediateChild(n).updateChild(zg(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},r=0,i=0,a=!0;if(this.forEachChild(k_,(o,s)=>{n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!t&&a&&i<2*r){let e=[];for(let t in n)e[t]=n[t];return e}else return t&&!this.getPriority().isEmpty()&&(n[`.priority`]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e=``;this.getPriority().isEmpty()||(e+=`priority:`+x_(this.getPriority().val())+`:`),this.forEachChild(k_,(t,n)=>{let r=n.hash();r!==``&&(e+=`:`+t+`:`+r)}),this.lazyHash_=e===``?``:Jm(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let r=this.resolveIndex_(n);if(r){let n=r.getPredecessorKey(new X(e,t));return n?n.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.minKey();return e&&e.name}else return this.children_.minKey()}getFirstChild(e){let t=this.getFirstChildName(e);return t?new X(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.maxKey();return e&&e.name}else return this.children_.maxKey()}getLastChild(e){let t=this.getLastChildName(e);return t?new X(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,X.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,X.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===L_?-1:0}withIndex(t){if(t===f_||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===f_||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){let e=this.getIterator(k_),n=t.getIterator(k_),r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return r===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===f_?null:this.indexMap_.get(e.toString())}};Z.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var L_=new class extends Z{constructor(){super(new g_(v_),Z.EMPTY_NODE,F_.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Z.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(X,{MIN:{value:new X(sh,Z.EMPTY_NODE)},MAX:{value:new X(ch,L_)}}),d_.__EMPTY_NODE=Z.EMPTY_NODE,w_.__childrenNodeConstructor=Z,b_(L_),O_(L_);var R_=!0;function z_(e,t=null){if(e===null)return Z.EMPTY_NODE;if(typeof e==`object`&&`.priority`in e&&(t=e[`.priority`]),f(t===null||typeof t==`string`||typeof t==`number`||typeof t==`object`&&`.sv`in t,`Invalid priority type found: `+typeof t),typeof e==`object`&&`.value`in e&&e[`.value`]!==null&&(e=e[`.value`]),typeof e!=`object`||`.sv`in e)return new w_(e,z_(t));if(!(e instanceof Array)&&R_){let n=[],r=!1;if(mh(e,(e,t)=>{if(e.substring(0,1)!==`.`){let i=z_(t);i.isEmpty()||(r||=!i.getPriority().isEmpty(),n.push(new X(e,i)))}}),n.length===0)return Z.EMPTY_NODE;let i=M_(n,__,e=>e.name,v_);if(r){let e=M_(n,k_.getCompare());return new Z(i,z_(t),new F_({".priority":e},{".priority":k_}))}else return new Z(i,z_(t),F_.Default)}else{let n=Z.EMPTY_NODE;return mh(e,(t,r)=>{if(Pe(e,t)&&t.substring(0,1)!==`.`){let e=z_(r);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(z_(t))}}D_(z_);var B_=class extends l_{constructor(e){super(),this.indexPath_=e,f(!Y(e)&&J(e)!==`.priority`,`Can't create PathIndex with empty path or .priority key`)}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return i===0?lh(e.name,t.name):i}makePost(e,t){let n=z_(e);return new X(t,Z.EMPTY_NODE.updateChild(this.indexPath_,n))}maxPost(){return new X(ch,Z.EMPTY_NODE.updateChild(this.indexPath_,L_))}toString(){return Hg(this.indexPath_,0).join(`/`)}},V_=new class extends l_{compare(e,t){let n=e.node.compareTo(t.node);return n===0?lh(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(e,t){return new X(t,z_(e))}toString(){return`.value`}};function H_(e){return{type:`value`,snapshotNode:e}}function U_(e,t){return{type:`child_added`,snapshotNode:t,childName:e}}function W_(e,t){return{type:`child_removed`,snapshotNode:t,childName:e}}function G_(e,t,n){return{type:`child_changed`,snapshotNode:t,childName:e,oldSnap:n}}function K_(e,t){return{type:`child_moved`,snapshotNode:t,childName:e}}var q_=class{constructor(e){this.index_=e}updateChild(e,t,n,r,i,a){f(e.isIndexed(this.index_),`A node must be indexed if only a child is updated`);let o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()||(a!=null&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(W_(t,o)):f(e.isLeafNode(),`A child remove without an old child only makes sense on a leaf node`):o.isEmpty()?a.trackChildChange(U_(t,n)):a.trackChildChange(G_(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(k_,(e,r)=>{t.hasChild(e)||n.trackChildChange(W_(e,r))}),t.isLeafNode()||t.forEachChild(k_,(t,r)=>{if(e.hasChild(t)){let i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(G_(t,r,i))}else n.trackChildChange(U_(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Z.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}},J_=class e{constructor(t){this.indexedFilter_=new q_(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,a){return this.matches(new X(t,n))||(n=Z.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Z.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Z.EMPTY_NODE);let i=this;return t.forEachChild(k_,(e,t)=>{i.matches(new X(e,t))||(r=r.updateImmediateChild(e,Z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}},Y_=class{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new J_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,a){return this.rangedFilter_.matches(new X(t,n))||(n=Z.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=Z.EMPTY_NODE.withIndex(this.index_);let e;e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t))if(this.withinDirectionalEnd(t))r=r.updateImmediateChild(t.name,t.node),n++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(Z.EMPTY_NODE);let e;e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let a;if(this.reverse_){let e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();let o=e;f(o.numChildren()===this.limit_,``);let s=new X(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(o.hasChild(t)){let e=o.getImmediateChild(t),u=r.getChildAfterChild(this.index_,c,this.reverse_);for(;u!=null&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);let d=u==null?1:a(u,s);if(l&&!n.isEmpty()&&d>=0)return i?.trackChildChange(G_(t,n,e)),o.updateImmediateChild(t,n);{i?.trackChildChange(W_(t,e));let n=o.updateImmediateChild(t,Z.EMPTY_NODE);return u!=null&&this.rangedFilter_.matches(u)?(i?.trackChildChange(U_(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}else if(n.isEmpty())return e;else if(l)return a(c,s)>=0?(i!=null&&(i.trackChildChange(W_(c.name,c.node)),i.trackChildChange(U_(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,Z.EMPTY_NODE)):e;else return e}},X_=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_=``,this.indexStartValue_=null,this.indexStartName_=``,this.indexEndValue_=null,this.indexEndName_=``,this.index_=k_}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===``?this.startSet_:this.viewFrom_===`l`}getIndexStartValue(){return f(this.startSet_,`Only valid if start has been set`),this.indexStartValue_}getIndexStartName(){return f(this.startSet_,`Only valid if start has been set`),this.startNameSet_?this.indexStartName_:sh}hasEnd(){return this.endSet_}getIndexEndValue(){return f(this.endSet_,`Only valid if end has been set`),this.indexEndValue_}getIndexEndName(){return f(this.endSet_,`Only valid if end has been set`),this.endNameSet_?this.indexEndName_:ch}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==``}getLimit(){return f(this.limitSet_,`Only valid if limit has been set`),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===k_}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Z_(e){return e.loadsAllData()?new q_(e.getIndex()):e.hasLimit()?new Y_(e):new J_(e)}function Q_(e){let t={};if(e.isDefault())return t;let n;if(e.index_===k_?n=`$priority`:e.index_===V_?n=`$value`:e.index_===f_?n=`$key`:(f(e.index_ instanceof B_,`Unrecognized index type!`),n=e.index_.toString()),t.orderBy=Ae(n),e.startSet_){let n=e.startAfterSet_?`startAfter`:`startAt`;t[n]=Ae(e.indexStartValue_),e.startNameSet_&&(t[n]+=`,`+Ae(e.indexStartName_))}if(e.endSet_){let n=e.endBeforeSet_?`endBefore`:`endAt`;t[n]=Ae(e.indexEndValue_),e.endNameSet_&&(t[n]+=`,`+Ae(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function $_(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===``&&(n=e.isViewFromLeft()?`l`:`r`),t.vf=n}return e.index_!==k_&&(t.i=e.index_.toString()),t}var ev=class e extends jg{reportStats(e){throw Error(`Method not implemented.`)}static getListenId_(e,t){return t===void 0?(f(e._queryParams.isDefault(),`should have a tag if it's not a default query.`),e._path.toString()):`tag$`+t}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=eh(`p:rest:`),this.listens_={}}listen(t,n,r,i){let a=t._path.toString();this.log_(`Listen called for `+a+` `+t._queryIdentifier);let o=e.getListenId_(t,r),s={};this.listens_[o]=s;let c=Q_(t._queryParams);this.restRequest_(a+`.json`,c,(e,t)=>{let n=t;if(e===404&&(n=null,e=null),e===null&&this.onDataUpdate_(a,n,!1,r),Fe(this.listens_,o)===s){let t;t=e?e===401?`permission_denied`:`rest_error:`+e:`ok`,i(t,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(e){let t=Q_(e._queryParams),n=e._path.toString(),r=new se;return this.restRequest_(n+`.json`,t,(e,t)=>{let i=t;e===404&&(i=null,e=null),e===null?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format=`export`,Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);let a=(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host+e+`?ns=`+this.repoInfo_.namespace+Be(t);this.log_(`Sending REST request for `+a);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&o.readyState===4){this.log_(`REST Response for `+a+` received. status:`,o.status,`response:`,o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=ke(o.responseText)}catch{rh(`Failed to parse JSON response for `+a+`: `+o.responseText)}n(null,e)}else o.status!==401&&o.status!==404&&rh(`Got unsuccessful REST response for `+a+` Status: `+o.status),n(o.status);n=null}},o.open(`GET`,a,!0),o.send()})}},tv=class{constructor(){this.rootNode_=Z.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function nv(){return{value:null,children:new Map}}function rv(e,t,n){if(Y(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=J(t);e.children.has(r)||e.children.set(r,nv());let i=e.children.get(r);t=zg(t),rv(i,t,n)}}function iv(e,t){if(Y(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;{let n=e.value;return e.value=null,n.forEachChild(k_,(t,n)=>{rv(e,new Ig(t),n)}),iv(e,t)}}else if(e.children.size>0){let n=J(t);return t=zg(t),e.children.has(n)&&iv(e.children.get(n),t)&&e.children.delete(n),e.children.size===0}else return!0}function av(e,t,n){e.value===null?ov(e,(e,r)=>{av(r,new Ig(t.toString()+`/`+e),n)}):n(t,e.value)}function ov(e,t){e.children.forEach((e,n)=>{t(n,e)})}var sv=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t={...e};return this.last_&&mh(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}},cv=10*1e3,lv=30*1e3,uv=300*1e3,dv=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sv(e);let n=cv+(lv-cv)*Math.random();Th(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;mh(e,(e,r)=>{r>0&&Pe(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Th(this.reportStats_.bind(this),Math.floor(Math.random()*2*uv))}},fv;(function(e){e[e.OVERWRITE=0]=`OVERWRITE`,e[e.MERGE=1]=`MERGE`,e[e.ACK_USER_WRITE=2]=`ACK_USER_WRITE`,e[e.LISTEN_COMPLETE=3]=`LISTEN_COMPLETE`})(fv||={});function pv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function hv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var gv=class e{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=fv.ACK_USER_WRITE,this.source=pv()}operationForChild(t){if(Y(this.path)){if(this.affectedTree.value!=null)return f(this.affectedTree.children.isEmpty(),`affectedTree should not have overlapping affected paths.`),this;{let n=this.affectedTree.subtree(new Ig(t));return new e(Lg(),n,this.revert)}}else return f(J(this.path)===t,`operationForChild called for unrelated child.`),new e(zg(this.path),this.affectedTree,this.revert)}},_v=class e{constructor(e,t){this.source=e,this.path=t,this.type=fv.LISTEN_COMPLETE}operationForChild(t){return Y(this.path)?new e(this.source,Lg()):new e(this.source,zg(this.path))}},vv=class e{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=fv.OVERWRITE}operationForChild(t){return Y(this.path)?new e(this.source,Lg(),this.snap.getImmediateChild(t)):new e(this.source,zg(this.path),this.snap)}},yv=class e{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=fv.MERGE}operationForChild(t){if(Y(this.path)){let n=this.children.subtree(new Ig(t));return n.isEmpty()?null:n.value?new vv(this.source,Lg(),n.value):new e(this.source,Lg(),n)}else return f(J(this.path)===t,`Can't get a merge for a child not on the path of the operation`),new e(this.source,zg(this.path),this.children)}toString(){return`Operation(`+this.path+`: `+this.source.toString()+` merge: `+this.children.toString()+`)`}},bv=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Y(e))return this.isFullyInitialized()&&!this.filtered_;let t=J(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}},xv=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Sv(e,t,n,r){let i=[],a=[];return t.forEach(t=>{t.type===`child_changed`&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push(K_(t.childName,t.snapshotNode))}),Cv(e,i,`child_removed`,t,r,n),Cv(e,i,`child_added`,t,r,n),Cv(e,i,`child_moved`,a,r,n),Cv(e,i,`child_changed`,t,r,n),Cv(e,i,`value`,t,r,n),i}function Cv(e,t,n,r,i,a){let o=r.filter(e=>e.type===n);o.sort((t,n)=>Tv(e,t,n)),o.forEach(n=>{let r=wv(e,n,a);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function wv(e,t,n){return t.type===`value`||t.type===`child_removed`||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Tv(e,t,n){if(t.childName==null||n.childName==null)throw p(`Should only compare child_ events.`);let r=new X(t.childName,t.snapshotNode),i=new X(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Ev(e,t){return{eventCache:e,serverCache:t}}function Dv(e,t,n,r){return Ev(new bv(t,n,r),e.serverCache)}function Ov(e,t,n,r){return Ev(e.eventCache,new bv(t,n,r))}function kv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Av(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var jv,Mv=()=>(jv||=new g_(uh),jv),Nv=class e{static fromObject(t){let n=new e(null);return mh(t,(e,t)=>{n=n.set(new Ig(e),t)}),n}constructor(e,t=Mv()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Lg(),value:this.value};if(Y(e))return null;{let n=J(e),r=this.children.get(n);if(r!==null){let i=r.findRootMostMatchingPathAndValue(zg(e),t);return i==null?null:{path:Wg(new Ig(n),i.path),value:i.value}}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(t){if(Y(t))return this;{let n=J(t),r=this.children.get(n);return r===null?new e(null):r.subtree(zg(t))}}set(t,n){if(Y(t))return new e(n,this.children);{let r=J(t),i=(this.children.get(r)||new e(null)).set(zg(t),n),a=this.children.insert(r,i);return new e(this.value,a)}}remove(t){if(Y(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=J(t),r=this.children.get(n);if(r){let i=r.remove(zg(t)),a;return a=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),this.value===null&&a.isEmpty()?new e(null):new e(this.value,a)}else return this}}get(e){if(Y(e))return this.value;{let t=J(e),n=this.children.get(t);return n?n.get(zg(e)):null}}setTree(t,n){if(Y(t))return n;{let r=J(t),i=(this.children.get(r)||new e(null)).setTree(zg(t),n),a;return a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,a)}}fold(e){return this.fold_(Lg(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(Wg(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Lg(),t)}findOnPath_(e,t,n){let r=this.value?n(t,this.value):!1;if(r)return r;if(Y(e))return null;{let r=J(e),i=this.children.get(r);return i?i.findOnPath_(zg(e),Wg(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Lg(),t)}foreachOnPath_(t,n,r){if(Y(t))return this;{this.value&&r(n,this.value);let i=J(t),a=this.children.get(i);return a?a.foreachOnPath_(zg(t),Wg(n,i),r):new e(null)}}foreach(e){this.foreach_(Lg(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(Wg(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}},Pv=class e{constructor(e){this.writeTree_=e}static empty(){return new e(new Nv(null))}};function Fv(e,t,n){if(Y(t))return new Pv(new Nv(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,a=r.value,o=Gg(i,t);return a=a.updateChild(o,n),new Pv(e.writeTree_.set(i,a))}else{let r=new Nv(n);return new Pv(e.writeTree_.setTree(t,r))}}}function Iv(e,t,n){let r=e;return mh(n,(e,n)=>{r=Fv(r,Wg(t,e),n)}),r}function Lv(e,t){return Y(t)?Pv.empty():new Pv(e.writeTree_.setTree(t,new Nv(null)))}function Rv(e,t){return zv(e,t)!=null}function zv(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n==null?null:e.writeTree_.get(n.path).getChild(Gg(n.path,t))}function Bv(e){let t=[],n=e.writeTree_.value;return n==null?e.writeTree_.children.inorderTraversal((e,n)=>{n.value!=null&&t.push(new X(e,n.value))}):n.isLeafNode()||n.forEachChild(k_,(e,n)=>{t.push(new X(e,n))}),t}function Vv(e,t){if(Y(t))return e;{let n=zv(e,t);return n==null?new Pv(e.writeTree_.subtree(t)):new Pv(new Nv(n))}}function Hv(e){return e.writeTree_.isEmpty()}function Uv(e,t){return Wv(Lg(),e.writeTree_,t)}function Wv(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{t===`.priority`?(f(i.value!==null,`Priority writes must always be leaf nodes`),r=i.value):n=Wv(Wg(e,t),i,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Wg(e,`.priority`),r)),n}}function Gv(e,t){return py(t,e)}function Kv(e,t,n,r,i){f(r>e.lastWriteId,`Stacking an older write on top of newer ones`),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Fv(e.visibleWrites,t,n)),e.lastWriteId=r}function qv(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function Jv(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);f(n>=0,`removeWrite called with nonexistent writeId.`);let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,a=!1,o=e.allWrites.length-1;for(;i&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&Yv(t,r.path)?i=!1:Jg(r.path,t.path)&&(a=!0)),o--}if(i){if(a)return Xv(e),!0;if(r.snap)e.visibleWrites=Lv(e.visibleWrites,r.path);else{let t=r.children;mh(t,t=>{e.visibleWrites=Lv(e.visibleWrites,Wg(r.path,t))})}return!0}else return!1}function Yv(e,t){if(e.snap)return Jg(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Jg(Wg(e.path,n),t))return!0;return!1}function Xv(e){e.visibleWrites=Qv(e.allWrites,Zv,Lg()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Zv(e){return e.visible}function Qv(e,t,n){let r=Pv.empty();for(let i=0;i<e.length;++i){let a=e[i];if(t(a)){let e=a.path,t;if(a.snap)Jg(n,e)?(t=Gg(n,e),r=Fv(r,t,a.snap)):Jg(e,n)&&(t=Gg(e,n),r=Fv(r,Lg(),a.snap.getChild(t)));else if(a.children){if(Jg(n,e))t=Gg(n,e),r=Iv(r,t,a.children);else if(Jg(e,n))if(t=Gg(e,n),Y(t))r=Iv(r,Lg(),a.children);else{let e=Fe(a.children,J(t));if(e){let n=e.getChild(zg(t));r=Fv(r,Lg(),n)}}}else throw p(`WriteRecord should have .snap or .children`)}}return r}function $v(e,t,n,r,i){if(!r&&!i){let r=zv(e.visibleWrites,t);if(r!=null)return r;{let r=Vv(e.visibleWrites,t);return Hv(r)?n:n==null&&!Rv(r,Lg())?null:Uv(r,n||Z.EMPTY_NODE)}}else{let a=Vv(e.visibleWrites,t);return!i&&Hv(a)?n:!i&&n==null&&!Rv(a,Lg())?null:Uv(Qv(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Jg(e.path,t)||Jg(t,e.path))},t),n||Z.EMPTY_NODE)}}function ey(e,t,n){let r=Z.EMPTY_NODE,i=zv(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(k_,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){let i=Vv(e.visibleWrites,t);return n.forEachChild(k_,(e,t)=>{let n=Uv(Vv(i,new Ig(e)),t);r=r.updateImmediateChild(e,n)}),Bv(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}else return Bv(Vv(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}function ty(e,t,n,r,i){f(r||i,`Either existingEventSnap or existingServerSnap must exist`);let a=Wg(t,n);if(Rv(e.visibleWrites,a))return null;{let t=Vv(e.visibleWrites,a);return Hv(t)?i.getChild(n):Uv(t,i.getChild(n))}}function ny(e,t,n,r){let i=Wg(t,n);return zv(e.visibleWrites,i)??(r.isCompleteForChild(n)?Uv(Vv(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null)}function ry(e,t){return zv(e.visibleWrites,t)}function iy(e,t,n,r,i,a,o){let s,c=Vv(e.visibleWrites,t),l=zv(c,Lg());if(l!=null)s=l;else if(n!=null)s=Uv(c,n);else return[];if(s=s.withIndex(o),!s.isEmpty()&&!s.isLeafNode()){let e=[],t=o.getCompare(),n=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),c=n.getNext();for(;c&&e.length<i;)t(c,r)!==0&&e.push(c),c=n.getNext();return e}else return[]}function ay(){return{visibleWrites:Pv.empty(),allWrites:[],lastWriteId:-1}}function oy(e,t,n,r){return $v(e.writeTree,e.treePath,t,n,r)}function sy(e,t){return ey(e.writeTree,e.treePath,t)}function cy(e,t,n,r){return ty(e.writeTree,e.treePath,t,n,r)}function ly(e,t){return ry(e.writeTree,Wg(e.treePath,t))}function uy(e,t,n,r,i,a){return iy(e.writeTree,e.treePath,t,n,r,i,a)}function dy(e,t,n){return ny(e.writeTree,e.treePath,t,n)}function fy(e,t){return py(Wg(e.treePath,t),e.writeTree)}function py(e,t){return{treePath:e,writeTree:t}}var my=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;f(t===`child_added`||t===`child_changed`||t===`child_removed`,`Only child changes supported for tracking`),f(n!==`.priority`,`Only non-priority child changes can be tracked.`);let r=this.changeMap.get(n);if(r){let i=r.type;if(t===`child_added`&&i===`child_removed`)this.changeMap.set(n,G_(n,e.snapshotNode,r.snapshotNode));else if(t===`child_removed`&&i===`child_added`)this.changeMap.delete(n);else if(t===`child_removed`&&i===`child_changed`)this.changeMap.set(n,W_(n,r.oldSnap));else if(t===`child_changed`&&i===`child_added`)this.changeMap.set(n,U_(n,e.snapshotNode));else if(t===`child_changed`&&i===`child_changed`)this.changeMap.set(n,G_(n,e.snapshotNode,r.oldSnap));else throw p(`Illegal combination of changes: `+e+` occurred after `+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}},hy=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},gy=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=this.optCompleteServerCache_==null?this.viewCache_.serverCache:new bv(this.optCompleteServerCache_,!0,!1);return dy(this.writes_,e,t)}}getChildAfterChild(e,t,n){let r=this.optCompleteServerCache_==null?Av(this.viewCache_):this.optCompleteServerCache_,i=uy(this.writes_,r,t,1,n,e);return i.length===0?null:i[0]}};function _y(e){return{filter:e}}function vy(e,t){f(t.eventCache.getNode().isIndexed(e.filter.getIndex()),`Event snap not indexed`),f(t.serverCache.getNode().isIndexed(e.filter.getIndex()),`Server snap not indexed`)}function yy(e,t,n,r,i){let a=new my,o,s;if(n.type===fv.OVERWRITE){let c=n;c.source.fromUser?o=Cy(e,t,c.path,c.snap,r,i,a):(f(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered()&&!Y(c.path),o=Sy(e,t,c.path,c.snap,r,i,s,a))}else if(n.type===fv.MERGE){let c=n;c.source.fromUser?o=Ty(e,t,c.path,c.children,r,i,a):(f(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered(),o=Dy(e,t,c.path,c.children,r,i,s,a))}else if(n.type===fv.ACK_USER_WRITE){let s=n;o=s.revert?Ay(e,t,s.path,r,i,a):Oy(e,t,s.path,s.affectedTree,r,i,a)}else if(n.type===fv.LISTEN_COMPLETE)o=ky(e,t,n.path,r,a);else throw p(`Unknown operation type: `+n.type);let c=a.getChanges();return by(t,o,c),{viewCache:o,changes:c}}function by(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=kv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(H_(kv(t)))}}function xy(e,t,n,r,i,a){let o=t.eventCache;if(ly(r,n)!=null)return t;{let s,c;if(Y(n))if(f(t.serverCache.isFullyInitialized(),`If change path is empty, we must have complete server data`),t.serverCache.isFiltered()){let n=Av(t),i=sy(r,n instanceof Z?n:Z.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),i,a)}else{let n=oy(r,Av(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{let l=J(n);if(l===`.priority`){f(Rg(n)===1,`Can't have a priority with additional path components`);let i=o.getNode();c=t.serverCache.getNode();let a=cy(r,n,i,c);s=a==null?o.getNode():e.filter.updatePriority(i,a)}else{let u=zg(n),d;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();let e=cy(r,n,o.getNode(),c);d=e==null?o.getNode().getImmediateChild(l):o.getNode().getImmediateChild(l).updateChild(u,e)}else d=dy(r,l,t.serverCache);s=d==null?o.getNode():e.filter.updateChild(o.getNode(),l,d,u,i,a)}}return Dv(t,s,o.isFullyInitialized()||Y(n),e.filter.filtersNodes())}}function Sy(e,t,n,r,i,a,o,s){let c=t.serverCache,l,u=o?e.filter:e.filter.getIndexedFilter();if(Y(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),e,null)}else{let e=J(n);if(!c.isCompleteForPath(n)&&Rg(n)>1)return t;let i=zg(n),a=c.getNode().getImmediateChild(e).updateChild(i,r);l=e===`.priority`?u.updatePriority(c.getNode(),a):u.updateChild(c.getNode(),e,a,i,hy,null)}let d=Ov(t,l,c.isFullyInitialized()||Y(n),u.filtersNodes());return xy(e,d,n,i,new gy(i,d,a),s)}function Cy(e,t,n,r,i,a,o){let s=t.eventCache,c,l,u=new gy(i,t,a);if(Y(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=Dv(t,l,!0,e.filter.filtersNodes());else{let i=J(n);if(i===`.priority`)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Dv(t,l,s.isFullyInitialized(),s.isFiltered());else{let a=zg(n),l=s.getNode().getImmediateChild(i),d;if(Y(a))d=r;else{let e=u.getCompleteChild(i);d=e==null?Z.EMPTY_NODE:Bg(a)===`.priority`&&e.getChild(Ug(a)).isEmpty()?e:e.updateChild(a,r)}c=l.equals(d)?t:Dv(t,e.filter.updateChild(s.getNode(),i,d,a,u,o),s.isFullyInitialized(),e.filter.filtersNodes())}}return c}function wy(e,t){return e.eventCache.isCompleteForChild(t)}function Ty(e,t,n,r,i,a,o){let s=t;return r.foreach((r,c)=>{let l=Wg(n,r);wy(t,J(l))&&(s=Cy(e,s,l,c,i,a,o))}),r.foreach((r,c)=>{let l=Wg(n,r);wy(t,J(l))||(s=Cy(e,s,l,c,i,a,o))}),s}function Ey(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function Dy(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;l=Y(n)?r:new Nv(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){let l=Ey(e,t.serverCache.getNode().getImmediateChild(n),r);c=Sy(e,c,new Ig(n),l,i,a,o,s)}}),l.children.inorderTraversal((n,r)=>{let l=!t.serverCache.isCompleteForChild(n)&&r.value===null;if(!u.hasChild(n)&&!l){let l=Ey(e,t.serverCache.getNode().getImmediateChild(n),r);c=Sy(e,c,new Ig(n),l,i,a,o,s)}}),c}function Oy(e,t,n,r,i,a,o){if(ly(i,n)!=null)return t;let s=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(Y(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Sy(e,t,n,c.getNode().getChild(n),i,a,s,o);if(Y(n)){let r=new Nv(null);return c.getNode().forEachChild(f_,(e,t)=>{r=r.set(new Ig(e),t)}),Dy(e,t,n,r,i,a,s,o)}else return t}else{let l=new Nv(null);return r.foreach((e,t)=>{let r=Wg(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))}),Dy(e,t,n,l,i,a,s,o)}}function ky(e,t,n,r,i){let a=t.serverCache;return xy(e,Ov(t,a.getNode(),a.isFullyInitialized()||Y(n),a.isFiltered()),n,r,hy,i)}function Ay(e,t,n,r,i,a){let o;if(ly(r,n)!=null)return t;{let s=new gy(r,t,i),c=t.eventCache.getNode(),l;if(Y(n)||J(n)===`.priority`){let n;if(t.serverCache.isFullyInitialized())n=oy(r,Av(t));else{let e=t.serverCache.getNode();f(e instanceof Z,`serverChildren would be complete if leaf node`),n=sy(r,e)}n=n,l=e.filter.updateFullNode(c,n,a)}else{let i=J(n),u=dy(r,i,t.serverCache);u==null&&t.serverCache.isCompleteForChild(i)&&(u=c.getImmediateChild(i)),l=u==null?t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,Z.EMPTY_NODE,zg(n),s,a):c:e.filter.updateChild(c,i,u,zg(n),s,a),l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=oy(r,Av(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,a)))}return o=t.serverCache.isFullyInitialized()||ly(r,Lg())!=null,Dv(t,l,o,e.filter.filtersNodes())}}var jy=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new q_(n.getIndex()),i=Z_(n);this.processor_=_y(i);let a=t.serverCache,o=t.eventCache,s=r.updateFullNode(Z.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(Z.EMPTY_NODE,o.getNode(),null),l=new bv(s,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Ev(new bv(c,o.isFullyInitialized(),i.filtersNodes()),l),this.eventGenerator_=new xv(this.query_)}get query(){return this.query_}};function My(e){return e.viewCache_.serverCache.getNode()}function Ny(e,t){let n=Av(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Y(t)&&!n.getImmediateChild(J(t)).isEmpty())?n.getChild(t):null}function Py(e){return e.eventRegistrations_.length===0}function Fy(e,t){e.eventRegistrations_.push(t)}function Iy(e,t,n){let r=[];if(n){f(t==null,`A cancel should cancel all event registrations.`);let i=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){let i=e.eventRegistrations_[r];if(!i.matches(t))n.push(i);else if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Ly(e,t,n,r){t.type===fv.MERGE&&t.source.queryId!==null&&(f(Av(e.viewCache_),`We should always have a full cache before handling merges`),f(kv(e.viewCache_),`Missing event cache, even though we have a server cache`));let i=e.viewCache_,a=yy(e.processor_,i,t,n,r);return vy(e.processor_,a.viewCache),f(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),`Once a server snap is complete, it should never go back`),e.viewCache_=a.viewCache,zy(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Ry(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(k_,(e,t)=>{r.push(U_(e,t))}),n.isFullyInitialized()&&r.push(H_(n.getNode())),zy(e,r,n.getNode(),t)}function zy(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return Sv(e.eventGenerator_,t,n,i)}var By,Vy=class{constructor(){this.views=new Map}};function Hy(e){f(!By,`__referenceConstructor has already been defined`),By=e}function Uy(){return f(By,`Reference.ts has not been loaded`),By}function Wy(e){return e.views.size===0}function Gy(e,t,n,r){let i=t.source.queryId;if(i!==null){let a=e.views.get(i);return f(a!=null,`SyncTree gave us an op for an invalid query.`),Ly(a,t,n,r)}else{let i=[];for(let a of e.views.values())i=i.concat(Ly(a,t,n,r));return i}}function Ky(e,t,n,r,i){let a=t._queryIdentifier,o=e.views.get(a);if(!o){let e=oy(n,i?r:null),a=!1;return e?a=!0:r instanceof Z?(e=sy(n,r),a=!1):(e=Z.EMPTY_NODE,a=!1),new jy(t,Ev(new bv(e,a,!1),new bv(r,i,!1)))}return o}function qy(e,t,n,r,i,a){let o=Ky(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),Fy(o,n),Ry(o,n)}function Jy(e,t,n,r){let i=t._queryIdentifier,a=[],o=[],s=$y(e);if(i===`default`)for(let[t,i]of e.views.entries())o=o.concat(Iy(i,n,r)),Py(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||a.push(i.query));else{let t=e.views.get(i);t&&(o=o.concat(Iy(t,n,r)),Py(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||a.push(t.query)))}return s&&!$y(e)&&a.push(new(Uy())(t._repo,t._path)),{removed:a,events:o}}function Yy(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Xy(e,t){let n=null;for(let r of e.views.values())n||=Ny(r,t);return n}function Zy(e,t){if(t._queryParams.loadsAllData())return eb(e);{let n=t._queryIdentifier;return e.views.get(n)}}function Qy(e,t){return Zy(e,t)!=null}function $y(e){return eb(e)!=null}function eb(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var tb;function nb(e){f(!tb,`__referenceConstructor has already been defined`),tb=e}function rb(){return f(tb,`Reference.ts has not been loaded`),tb}var ib=1,ab=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nv(null),this.pendingWriteTree_=ay(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function ob(e,t,n,r,i){return Kv(e.pendingWriteTree_,t,n,r,i),i?_b(e,new vv(pv(),t,n)):[]}function sb(e,t,n=!1){let r=qv(e.pendingWriteTree_,t);if(Jv(e.pendingWriteTree_,t)){let t=new Nv(null);return r.snap==null?mh(r.children,e=>{t=t.set(new Ig(e),!0)}):t=t.set(Lg(),!0),_b(e,new gv(r.path,t,n))}else return[]}function cb(e,t,n){return _b(e,new vv(mv(),t,n))}function lb(e,t,n){let r=Nv.fromObject(n);return _b(e,new yv(mv(),t,r))}function ub(e,t){return _b(e,new _v(mv(),t))}function db(e,t,n){let r=Cb(e,n);if(r){let n=wb(r),i=n.path,a=n.queryId,o=Gg(i,t);return Tb(e,i,new _v(hv(a),o))}else return[]}function fb(e,t,n,r,i=!1){let a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&(t._queryIdentifier===`default`||Qy(o,t))){let c=Jy(o,t,n,r);Wy(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));let l=c.removed;if(s=c.events,!i){let n=l.findIndex(e=>e._queryParams.loadsAllData())!==-1,i=e.syncPointTree_.findOnPath(a,(e,t)=>$y(t));if(n&&!i){let t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){let n=Eb(t);for(let t=0;t<n.length;++t){let r=n[t],i=r.query,a=bb(e,r);e.listenProvider_.startListening(Db(i),xb(e,i),a.hashFn,a.onComplete)}}}!i&&l.length>0&&!r&&(n?e.listenProvider_.stopListening(Db(t),null):l.forEach(t=>{let n=e.queryToTagMap.get(Sb(t));e.listenProvider_.stopListening(Db(t),n)}))}Ob(e,l)}return s}function pb(e,t,n,r){let i=Cb(e,r);if(i!=null){let r=wb(i),a=r.path,o=r.queryId,s=Gg(a,t);return Tb(e,a,new vv(hv(o),s,n))}else return[]}function mb(e,t,n,r){let i=Cb(e,r);if(i){let r=wb(i),a=r.path,o=r.queryId,s=Gg(a,t),c=Nv.fromObject(n);return Tb(e,a,new yv(hv(o),s,c))}else return[]}function hb(e,t,n,r=!1){let i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=Gg(e,i);a||=Xy(t,n),o||=$y(t)});let s=e.syncPointTree_.get(i);s?(o||=$y(s),a||=Xy(s,Lg())):(s=new Vy,e.syncPointTree_=e.syncPointTree_.set(i,s));let c;a==null?(c=!1,a=Z.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{let n=Xy(t,Lg());n&&(a=a.updateImmediateChild(e,n))})):c=!0;let l=Qy(s,t);if(!l&&!t._queryParams.loadsAllData()){let n=Sb(t);f(!e.queryToTagMap.has(n),`View does not exist, but we have a tag`);let r=kb();e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Gv(e.pendingWriteTree_,i),d=qy(s,t,n,u,a,c);if(!l&&!o&&!r){let n=Zy(s,t);d=d.concat(Ab(e,t,n))}return d}function gb(e,t,n){let r=e.pendingWriteTree_;return $v(r,t,e.syncPointTree_.findOnPath(t,(e,n)=>{let r=Xy(n,Gg(e,t));if(r)return r}),n,!0)}function _b(e,t){return vb(t,e.syncPointTree_,null,Gv(e.pendingWriteTree_,Lg()))}function vb(e,t,n,r){if(Y(e.path))return yb(e,t,n,r);{let i=t.get(Lg());n==null&&i!=null&&(n=Xy(i,Lg()));let a=[],o=J(e.path),s=e.operationForChild(o),c=t.children.get(o);if(c&&s){let e=n?n.getImmediateChild(o):null,t=fy(r,o);a=a.concat(vb(s,c,e,t))}return i&&(a=a.concat(Gy(i,e,r,n))),a}}function yb(e,t,n,r){let i=t.get(Lg());n==null&&i!=null&&(n=Xy(i,Lg()));let a=[];return t.children.inorderTraversal((t,i)=>{let o=n?n.getImmediateChild(t):null,s=fy(r,t),c=e.operationForChild(t);c&&(a=a.concat(yb(c,i,o,s)))}),i&&(a=a.concat(Gy(i,e,r,n))),a}function bb(e,t){let n=t.query,r=xb(e,n);return{hashFn:()=>(My(t)||Z.EMPTY_NODE).hash(),onComplete:t=>t===`ok`?r?db(e,n._path,r):ub(e,n._path):fb(e,n,null,vh(t,n))}}function xb(e,t){let n=Sb(t);return e.queryToTagMap.get(n)}function Sb(e){return e._path.toString()+`$`+e._queryIdentifier}function Cb(e,t){return e.tagToQueryMap.get(t)}function wb(e){let t=e.indexOf(`$`);return f(t!==-1&&t<e.length-1,`Bad queryKey.`),{queryId:e.substr(t+1),path:new Ig(e.substr(0,t))}}function Tb(e,t,n){let r=e.syncPointTree_.get(t);return f(r,`Missing sync point for query tag that we're tracking`),Gy(r,n,Gv(e.pendingWriteTree_,t),null)}function Eb(e){return e.fold((e,t,n)=>{if(t&&$y(t))return[eb(t)];{let e=[];return t&&(e=Yy(t)),mh(n,(t,n)=>{e=e.concat(n)}),e}})}function Db(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(rb())(e._repo,e._path):e}function Ob(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let t=Sb(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}function kb(){return ib++}function Ab(e,t,n){let r=t._path,i=xb(e,t),a=bb(e,n),o=e.listenProvider_.startListening(Db(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)f(!$y(s.value),`If we're adding a query, it shouldn't be shadowed`);else{let t=s.fold((e,t,n)=>{if(!Y(e)&&t&&$y(t))return[eb(t).query];{let e=[];return t&&(e=e.concat(Yy(t).map(e=>e.query))),mh(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let r=t[n];e.listenProvider_.stopListening(Db(r),xb(e,r))}}return o}var jb=class e{constructor(e){this.node_=e}getImmediateChild(t){return new e(this.node_.getImmediateChild(t))}node(){return this.node_}},Mb=class e{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(t){let n=Wg(this.path_,t);return new e(this.syncTree_,n)}node(){return gb(this.syncTree_,this.path_)}},Nb=function(e){return e||={},e.timestamp=e.timestamp||new Date().getTime(),e},Pb=function(e,t,n){if(!e||typeof e!=`object`)return e;if(f(`.sv`in e,`Unexpected leaf node or priority contents`),typeof e[`.sv`]==`string`)return Fb(e[`.sv`],t,n);if(typeof e[`.sv`]==`object`)return Ib(e[`.sv`],t);f(!1,`Unexpected server value: `+JSON.stringify(e,null,2))},Fb=function(e,t,n){switch(e){case`timestamp`:return n.timestamp;default:f(!1,`Unexpected server value: `+e)}},Ib=function(e,t,n){e.hasOwnProperty(`increment`)||f(!1,`Unexpected server value: `+JSON.stringify(e,null,2));let r=e.increment;typeof r!=`number`&&f(!1,`Unexpected increment value: `+r);let i=t.node();if(f(i!=null,`Expected ChildrenNode.EMPTY_NODE for nulls`),!i.isLeafNode())return r;let a=i.getValue();return typeof a==`number`?a+r:r},Lb=function(e,t,n,r){return zb(t,new Mb(n,e),r)},Rb=function(e,t,n){return zb(e,new jb(t),n)};function zb(e,t,n){let r=Pb(e.getPriority().val(),t.getImmediateChild(`.priority`),n),i;if(e.isLeafNode()){let i=e,a=Pb(i.getValue(),t,n);return a!==i.getValue()||r!==i.getPriority().val()?new w_(a,z_(r)):e}else{let a=e;return i=a,r!==a.getPriority().val()&&(i=i.updatePriority(new w_(r))),a.forEachChild(k_,(e,r)=>{let a=zb(r,t.getImmediateChild(e),n);a!==r&&(i=i.updateImmediateChild(e,a))}),i}}var Bb=class{constructor(e=``,t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function Vb(e,t){let n=t instanceof Ig?t:new Ig(t),r=e,i=J(n);for(;i!==null;){let e=Fe(r.node.children,i)||{children:{},childCount:0};r=new Bb(i,r,e),n=zg(n),i=J(n)}return r}function Hb(e){return e.node.value}function Ub(e,t){e.node.value=t,Xb(e)}function Wb(e){return e.node.childCount>0}function Gb(e){return Hb(e)===void 0&&!Wb(e)}function Kb(e,t){mh(e.node.children,(n,r)=>{t(new Bb(n,e,r))})}function qb(e,t,n,r){n&&!r&&t(e),Kb(e,e=>{qb(e,t,!0,r)}),n&&r&&t(e)}function Jb(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Yb(e){return new Ig(e.parent===null?e.name:Yb(e.parent)+`/`+e.name)}function Xb(e){e.parent!==null&&Zb(e.parent,e.name,e)}function Zb(e,t,n){let r=Gb(n),i=Pe(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Xb(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Xb(e))}var Qb=/[\[\].#$\/\u0000-\u001F\u007F]/,$b=/[\[\].#$\u0000-\u001F\u007F]/,ex=10*1024*1024,tx=function(e){return typeof e==`string`&&e.length!==0&&!Qb.test(e)},nx=function(e){return typeof e==`string`&&e.length!==0&&!$b.test(e)},rx=function(e){return e&&=e.replace(/^\/*\.info(\/|$)/,`/`),nx(e)},ix=function(e){return e===null||typeof e==`string`||typeof e==`number`&&!ah(e)||e&&typeof e==`object`&&Pe(e,`.sv`)},ax=function(e,t,n,r){r&&t===void 0||ox(He(e,`value`),t,n)},ox=function(e,t,n){let r=n instanceof Ig?new Yg(n,e):n;if(t===void 0)throw Error(e+`contains undefined `+$g(r));if(typeof t==`function`)throw Error(e+`contains a function `+$g(r)+` with contents = `+t.toString());if(ah(t))throw Error(e+`contains `+t.toString()+` `+$g(r));if(typeof t==`string`&&t.length>ex/3&&We(t)>ex)throw Error(e+`contains a string greater than 10485760 utf8 bytes `+$g(r)+` ('`+t.substring(0,50)+`...')`);if(t&&typeof t==`object`){let n=!1,i=!1;if(mh(t,(t,a)=>{if(t===`.value`)n=!0;else if(t!==`.priority`&&t!==`.sv`&&(i=!0,!tx(t)))throw Error(e+` contains an invalid key (`+t+`) `+$g(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xg(r,t),ox(e,a,r),Zg(r)}),n&&i)throw Error(e+` contains ".value" child `+$g(r)+` in addition to actual children.`)}},sx=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let i=Hg(r);for(let t=0;t<i.length;t++)if(!(i[t]===`.priority`&&t===i.length-1)&&!tx(i[t]))throw Error(e+`contains an invalid key (`+i[t]+`) in path `+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}t.sort(Kg);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Jg(i,r))throw Error(e+`contains a path `+i.toString()+` that is ancestor of another path `+r.toString());i=r}},cx=function(e,t,n,r){if(r&&t===void 0)return;let i=He(e,`values`);if(!(t&&typeof t==`object`)||Array.isArray(t))throw Error(i+` must be an object containing the children to replace.`);let a=[];mh(t,(e,t)=>{let r=new Ig(e);if(ox(i,t,Wg(n,r)),Bg(r)===`.priority`&&!ix(t))throw Error(i+`contains an invalid value for '`+r.toString()+`', which must be a valid Firebase priority (a string, finite number, server value, or null).`);a.push(r)}),sx(i,a)},lx=function(e,t,n){if(!(n&&t===void 0)){if(ah(t))throw Error(He(e,`priority`)+`is `+t.toString()+`, but must be a valid Firebase priority (a string, finite number, server value, or null).`);if(!ix(t))throw Error(He(e,`priority`)+`must be a valid Firebase priority (a string, finite number, server value, or null).`)}},ux=function(e,t,n,r){if(!(r&&n===void 0)&&!nx(n))throw Error(He(e,t)+`was an invalid path = "`+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},dx=function(e,t,n,r){n&&=n.replace(/^\/*\.info(\/|$)/,`/`),ux(e,t,n,r)},fx=function(e,t){if(J(t)===`.info`)throw Error(e+` failed = Can't modify data under /.info/`)},px=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!=`string`||t.repoInfo.host.length===0||!tx(t.repoInfo.namespace)&&t.repoInfo.host.split(`:`)[0]!==`localhost`||n.length!==0&&!rx(n))throw Error(He(e,`url`)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},mx=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function hx(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],a=i.getPath();n!==null&&!qg(a,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function gx(e,t,n){hx(e,n),vx(e,e=>qg(e,t))}function _x(e,t,n){hx(e,n),vx(e,e=>Jg(e,t)||Jg(t,e))}function vx(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let a=i.path;t(a)?(yx(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function yx(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Xm&&$m(`event: `+n.toString()),Ch(r)}}}var bx=`repo_interrupt`,xx=25,Sx=class{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nv(),this.transactionQueueTree_=new Bb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host}};function Cx(e,t,n){if(e.stats_=Kh(e.repoInfo_),e.forceRestClient_||wh())e.server_=new ev(e.repoInfo_,(t,n,r,i)=>{Ex(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Dx(e,!0),0);else{if(n!=null){if(typeof n!=`object`)throw Error(`Only objects are supported for option databaseAuthVariableOverride`);try{Ae(n)}catch(e){throw Error(`Invalid authOverride provided: `+e)}}e.persistentConnection_=new c_(e.repoInfo_,t,(t,n,r,i)=>{Ex(e,t,n,r,i)},t=>{Dx(e,t)},t=>{Ox(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=qh(e.repoInfo_,()=>new dv(e.stats_,e.server_)),e.infoData_=new tv,e.infoSyncTree_=new ab({startListening:(t,n,r,i)=>{let a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=cb(e.infoSyncTree_,t._path,o),setTimeout(()=>{i(`ok`)},0)),a},stopListening:()=>{}}),kx(e,`connected`,!1),e.serverSyncTree_=new ab({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{let a=i(n,r);_x(e.eventQueue_,t._path,a)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function wx(e){let t=e.infoData_.getNode(new Ig(`.info/serverTimeOffset`)).val()||0;return new Date().getTime()+t}function Tx(e){return Nb({timestamp:wx(e)})}function Ex(e,t,n,r,i){e.dataUpdateCount++;let a=new Ig(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){let t=Le(n,e=>z_(e));o=mb(e.serverSyncTree_,a,t,i)}else{let t=z_(n);o=pb(e.serverSyncTree_,a,t,i)}else if(r){let t=Le(n,e=>z_(e));o=lb(e.serverSyncTree_,a,t)}else{let t=z_(n);o=cb(e.serverSyncTree_,a,t)}let s=a;o.length>0&&(s=Gx(e,a)),_x(e.eventQueue_,s,o)}function Dx(e,t){kx(e,`connected`,t),t===!1&&Mx(e)}function Ox(e,t){mh(t,(t,n)=>{kx(e,t,n)})}function kx(e,t,n){let r=new Ig(`/.info/`+t),i=z_(n);e.infoData_.updateSnapshot(r,i);let a=cb(e.infoSyncTree_,r,i);_x(e.eventQueue_,r,a)}function Ax(e){return e.nextWriteId_++}function jx(e,t,n,r,i){Bx(e,`set`,{path:t.toString(),value:n,priority:r});let a=Tx(e),o=z_(n,r),s=Rb(o,gb(e.serverSyncTree_,t),a),c=Ax(e),l=ob(e.serverSyncTree_,t,s,c,!0);hx(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(n,r)=>{let a=n===`ok`;a||rh(`set at `+t+` failed: `+n);let o=sb(e.serverSyncTree_,c,!a);_x(e.eventQueue_,t,o),Vx(e,i,n,r)});let u=Zx(e,t);Gx(e,u),_x(e.eventQueue_,u,[])}function Mx(e){Bx(e,`onDisconnectEvents`);let t=Tx(e),n=nv();av(e.onDisconnect_,Lg(),(r,i)=>{rv(n,r,Lb(r,i,e.serverSyncTree_,t))});let r=[];av(n,Lg(),(t,n)=>{r=r.concat(cb(e.serverSyncTree_,t,n)),Gx(e,Zx(e,t))}),e.onDisconnect_=nv(),_x(e.eventQueue_,Lg(),r)}function Nx(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{r===`ok`&&iv(e.onDisconnect_,t),Vx(e,n,r,i)})}function Px(e,t,n,r){let i=z_(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,a)=>{n===`ok`&&rv(e.onDisconnect_,t,i),Vx(e,r,n,a)})}function Fx(e,t,n,r,i){let a=z_(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(n,r)=>{n===`ok`&&rv(e.onDisconnect_,t,a),Vx(e,i,n,r)})}function Ix(e,t,n,r){if(Ie(n)){$m(`onDisconnect().update() called with empty data.  Don't do anything.`),Vx(e,r,`ok`,void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(i,a)=>{i===`ok`&&mh(n,(n,r)=>{let i=z_(r);rv(e.onDisconnect_,Wg(t,n),i)}),Vx(e,r,i,a)})}function Lx(e,t,n){let r;r=J(t._path)===`.info`?hb(e.infoSyncTree_,t,n):hb(e.serverSyncTree_,t,n),gx(e.eventQueue_,t._path,r)}function Rx(e,t,n){let r;r=J(t._path)===`.info`?fb(e.infoSyncTree_,t,n):fb(e.serverSyncTree_,t,n),gx(e.eventQueue_,t._path,r)}function zx(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bx)}function Bx(e,...t){let n=``;e.persistentConnection_&&(n=e.persistentConnection_.id+`:`),$m(n,...t)}function Vx(e,t,n,r){t&&Ch(()=>{if(n===`ok`)t(null);else{let e=(n||`error`).toUpperCase(),i=e;r&&(i+=`: `+r);let a=Error(i);a.code=e,t(a)}})}function Hx(e,t,n){return gb(e.serverSyncTree_,t,n)||Z.EMPTY_NODE}function Ux(e,t=e.transactionQueueTree_){if(t||Xx(e,t),Hb(t)){let n=Jx(e,t);f(n.length>0,`Sending zero length transaction queue`),n.every(e=>e.status===0)&&Wx(e,Yb(t),n)}else Wb(t)&&Kb(t,t=>{Ux(e,t)})}function Wx(e,t,n){let r=Hx(e,t,n.map(e=>e.currentWriteId)),i=r,a=r.hash();for(let e=0;e<n.length;e++){let r=n[e];f(r.status===0,`tryToSendTransactionQueue_: items in queue should all be run.`),r.status=1,r.retryCount++;let a=Gg(t,r.path);i=i.updateChild(a,r.currentOutputSnapshotRaw)}let o=i.val(!0),s=t;e.server_.put(s.toString(),o,r=>{Bx(e,`transaction put response`,{path:s.toString(),status:r});let i=[];if(r===`ok`){let r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(sb(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Xx(e,Vb(e.transactionQueueTree_,t)),Ux(e,e.transactionQueueTree_),_x(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Ch(r[e])}else{if(r===`datastale`)for(let e=0;e<n.length;e++)n[e].status===3?n[e].status=4:n[e].status=0;else{rh(`transaction at `+s.toString()+` failed: `+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Gx(e,t)}},a)}function Gx(e,t){let n=qx(e,t),r=Yb(n);return Kx(e,Jx(e,n),r),r}function Kx(e,t,n){if(t.length===0)return;let r=[],i=[],a=t.filter(e=>e.status===0).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let s=t[o],c=Gg(n,s.path),l=!1,u;if(f(c!==null,`rerunTransactionsUnderNode_: relativePath should not be null.`),s.status===4)l=!0,u=s.abortReason,i=i.concat(sb(e.serverSyncTree_,s.currentWriteId,!0));else if(s.status===0)if(s.retryCount>=xx)l=!0,u=`maxretry`,i=i.concat(sb(e.serverSyncTree_,s.currentWriteId,!0));else{let n=Hx(e,s.path,a);s.currentInputSnapshot=n;let r=t[o].update(n.val());if(r!==void 0){ox(`transaction failed: Data returned `,r,s.path);let t=z_(r);typeof r==`object`&&r&&Pe(r,`.priority`)||(t=t.updatePriority(n.getPriority()));let o=s.currentWriteId,c=Tx(e),l=Rb(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=l,s.currentWriteId=Ax(e),a.splice(a.indexOf(o),1),i=i.concat(ob(e.serverSyncTree_,s.path,l,s.currentWriteId,s.applyLocally)),i=i.concat(sb(e.serverSyncTree_,o,!0))}else l=!0,u=`nodata`,i=i.concat(sb(e.serverSyncTree_,s.currentWriteId,!0))}_x(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,(function(e){setTimeout(e,0)})(t[o].unwatcher),t[o].onComplete&&(u===`nodata`?r.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):r.push(()=>t[o].onComplete(Error(u),!1,null))))}Xx(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)Ch(r[e]);Ux(e,e.transactionQueueTree_)}function qx(e,t){let n,r=e.transactionQueueTree_;for(n=J(t);n!==null&&Hb(r)===void 0;)r=Vb(r,n),t=zg(t),n=J(t);return r}function Jx(e,t){let n=[];return Yx(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Yx(e,t,n){let r=Hb(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);Kb(t,t=>{Yx(e,t,n)})}function Xx(e,t){let n=Hb(t);if(n){let e=0;for(let t=0;t<n.length;t++)n[t].status!==2&&(n[e]=n[t],e++);n.length=e,Ub(t,n.length>0?n:void 0)}Kb(t,t=>{Xx(e,t)})}function Zx(e,t){let n=Yb(qx(e,t)),r=Vb(e.transactionQueueTree_,t);return Jb(r,t=>{Qx(e,t)}),Qx(e,r),qb(r,t=>{Qx(e,t)}),n}function Qx(e,t){let n=Hb(t);if(n){let r=[],i=[],a=-1;for(let t=0;t<n.length;t++)n[t].status===3||(n[t].status===1?(f(a===t-1,`All SENT items should be at beginning of queue.`),a=t,n[t].status=3,n[t].abortReason=`set`):(f(n[t].status===0,`Unexpected transaction status in abort`),n[t].unwatcher(),i=i.concat(sb(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,Error(`set`),!1,null))));a===-1?Ub(t,void 0):n.length=a+1,_x(e.eventQueue_,Yb(t),i);for(let e=0;e<r.length;e++)Ch(r[e])}}function $x(e){let t=``,n=e.split(`/`);for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g,` `))}catch{}t+=`/`+r}return t}function eS(e){let t={};e.charAt(0)===`?`&&(e=e.substring(1));for(let n of e.split(`&`)){if(n.length===0)continue;let r=n.split(`=`);r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rh(`Invalid query segment '${n}' in query '${e}'`)}return t}var tS=function(e,t){let n=nS(e),r=n.namespace;n.domain===`firebase.com`&&nh(n.host+` is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead`),(!r||r===`undefined`)&&n.domain!==`localhost`&&nh(`Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com`),n.secure||ih();let i=n.scheme===`ws`||n.scheme===`wss`;return{repoInfo:new Bh(n.host,n.secure,r,i,t,``,r!==n.subdomain),path:new Ig(n.pathString)}},nS=function(e){let t=``,n=``,r=``,i=``,a=``,o=!0,s=`https`,c=443;if(typeof e==`string`){let l=e.indexOf(`//`);l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf(`/`);u===-1&&(u=e.length);let d=e.indexOf(`?`);d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=$x(e.substring(u,d)));let f=eS(e.substring(Math.min(e.length,d)));l=t.indexOf(`:`),l>=0?(o=s===`https`||s===`wss`,c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()===`localhost`)n=`localhost`;else if(p.split(`.`).length<=2)n=p;else{let e=t.indexOf(`.`);r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=r}`ns`in f&&(a=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},rS=`-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`;(function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,a=Array(8);for(i=7;i>=0;i--)a[i]=rS.charAt(n%64),n=Math.floor(n/64);f(n===0,`Cannot push at time == 0`);let o=a.join(``);if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=rS.charAt(t[i]);return f(o.length===20,`nextPushId: Length should be 20.`),o}})();var iS=class{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType===`value`?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+`:`+this.eventType+`:`+Ae(this.snapshot.exportVal())}},aS=class{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return`cancel`}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+`:cancel`}},oS=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return f(this.hasCancelCallback,`Raising a cancel event on a listener with no cancel callback`),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}},sS=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new se;return Nx(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){fx(`OnDisconnect.remove`,this._path);let e=new se;return Px(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){fx(`OnDisconnect.set`,this._path),ax(`OnDisconnect.set`,e,this._path,!1);let t=new se;return Px(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){fx(`OnDisconnect.setWithPriority`,this._path),ax(`OnDisconnect.setWithPriority`,e,this._path,!1),lx(`OnDisconnect.setWithPriority`,t,!1);let n=new se;return Fx(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){fx(`OnDisconnect.update`,this._path),cx(`OnDisconnect.update`,e,this._path,!1);let t=new se;return Ix(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}},cS=class e{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Y(this._path)?null:Bg(this._path)}get ref(){return new lS(this._repo,this._path)}get _queryIdentifier(){let e=fh($_(this._queryParams));return e===`{}`?`default`:e}get _queryObject(){return $_(this._queryParams)}isEqual(t){if(t=Xe(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=qg(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Vg(this._path)}},lS=class e extends cS{constructor(e,t){super(e,t,new X_,!1)}get parent(){let t=Ug(this._path);return t===null?null:new e(this._repo,t)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},uS=class e{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Ig(t),r=fS(this.ref,t);return new e(this._node.getChild(n),r,k_)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>t(new e(r,fS(this.ref,n),k_)))}hasChild(e){let t=new Ig(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function dS(e,t){return e=Xe(e),e._checkNotDeleted(`ref`),t===void 0?e._root:fS(e._root,t)}function fS(e,t){return e=Xe(e),J(e._path)===null?dx(`child`,`path`,t,!1):ux(`child`,`path`,t,!1),new lS(e._repo,Wg(e._path,t))}function pS(e){return e=Xe(e),new sS(e._repo,e._path)}function mS(e,t){e=Xe(e),fx(`set`,e._path),ax(`set`,t,e._path,!1);let n=new se;return jx(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}var hS=class e{constructor(e){this.callbackContext=e}respondsTo(e){return e===`value`}createEvent(e,t){let n=t._queryParams.getIndex();return new iS(`value`,this,new uS(e.snapshotNode,new lS(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aS(this,e,t):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},gS=class e{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e===`children_added`?`child_added`:e;return t=t===`children_removed`?`child_removed`:t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aS(this,e,t):null}createEvent(e,t){f(e.childName!=null,`Child events should have a childName.`);let n=fS(new lS(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new iS(e.type,this,new uS(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function _S(e,t,n,r,i){let a;if(typeof r==`object`&&(a=void 0,i=r),typeof r==`function`&&(a=r),i&&i.onlyOnce){let t=n,r=(n,r)=>{Rx(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}let o=new oS(n,a||void 0),s=t===`value`?new hS(o):new gS(t,o);return Lx(e._repo,e,s),()=>Rx(e._repo,e,s)}function vS(e,t,n,r){return _S(e,`value`,t,n,r)}Hy(lS),nb(lS);var yS=`FIREBASE_DATABASE_EMULATOR_HOST`,bS={},xS=!1;function SS(e,t,n,r){let i=t.lastIndexOf(`:`);e.repoInfo_=new Bh(t,ce(t.substring(0,i)),e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function CS(e,t,n,r,i){let a=r||e.options.databaseURL;a===void 0&&(e.options.projectId||nh(`Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp().`),$m(`Using default host for project `,e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=tS(a,i),s=o.repoInfo,c,l;typeof process<`u`&&(l={}[yS]),l?(c=!0,a=`http://${l}?ns=${s.namespace}`,o=tS(a,i),s=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Oh(Oh.OWNER):new Dh(e.name,e.options,t);return px(`Invalid Firebase Database URL`,o),Y(o.path)||nh(`Database URL must point to the root of a Firebase Database (not including a child path).`),new ES(TS(s,e,u,new Eh(e,n)),e)}function wS(e,t){let n=bS[t];(!n||n[e.key]!==e)&&nh(`Database ${t}(${e.repoInfo_}) has already been deleted.`),zx(e),delete n[e.key]}function TS(e,t,n,r){let i=bS[t.name];i||(i={},bS[t.name]=i);let a=i[e.toURLString()];return a&&nh(`Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.`),a=new Sx(e,xS,n,r),i[e.toURLString()]=a,a}var ES=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type=`database`,this._instanceStarted=!1}get _repo(){return this._instanceStarted||=(Cx(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),!0),this._repoInternal}get _root(){return this._rootInternal||=new lS(this._repo,Lg()),this._rootInternal}_delete(){return this._rootInternal!==null&&(wS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&nh(`Cannot call `+e+` on a deleted database.`)}};function DS(e=wn(),t){let n=vn(e,`database`).getImmediate({identifier:t});if(!n._instanceStarted){let e=ae(`database`);e&&OS(n,...e)}return n}function OS(e,t,n,r={}){e=Xe(e),e._checkNotDeleted(`useEmulator`);let i=`${t}:${n}`,a=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Re(r,a.repoInfo_.emulatorOptions))return;nh(`connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.`)}let o;a.repoInfo_.nodeAdmin?(r.mockUserToken&&nh(`mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".`),o=new Oh(Oh.OWNER)):r.mockUserToken&&(o=new Oh(typeof r.mockUserToken==`string`?r.mockUserToken:ue(r.mockUserToken,e.app.options.projectId))),ce(t)&&(le(t),pe(`Database`,!0)),SS(a,i,r,o)}function kS(e){Bm(Sn),_n(new Ze(`database`,(e,{instanceIdentifier:t})=>CS(e.getProvider(`app`).getImmediate(),e.getProvider(`auth-internal`),e.getProvider(`app-check-internal`),t),`PUBLIC`).setMultipleInstances(!0)),Tn(Lm,Rm,e),Tn(Lm,Rm,`esm2020`)}var AS={".sv":`timestamp`};function jS(){return AS}c_.prototype.simpleListen=function(e,t){this.sendRequest(`q`,{p:e},t)},c_.prototype.echo=function(e,t){this.sendRequest(`echo`,{d:e},t)},kS();var MS={apiKey:`AIzaSyCNqbJUNeTCRbELxx9m-KGWmGP7-kIyscQ`,authDomain:`permumdota.firebaseapp.com`,projectId:`permumdota`,storageBucket:`permumdota.firebasestorage.app`,messagingSenderId:`408163118002`,appId:`1:408163118002:web:80eab5438011edeea352ab`,measurementId:`G-EMS2YKEMLG`,databaseURL:`https://permumdota-default-rtdb.asia-southeast1.firebasedatabase.app`},NS=Cn(MS);try{Xi(NS)}catch(e){console.warn(`Firebase Analytics failed to initialize (likely Safari Private Mode):`,e.message)}var PS=Ep(NS),FS=DS(NS);console.log(`[Firebase] Initialized successfully`),console.log(`[Firebase] Database URL:`,MS.databaseURL),console.log(`[Firebase] Project ID:`,MS.projectId);var IS=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),LS=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),RS=e=>{let t=LS(e);return t.charAt(0).toUpperCase()+t.slice(1)},zS=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),BS=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},VS={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},HS=(0,l.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,l.createElement)(`svg`,{ref:c,...VS,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:zS(`lucide`,i),...!a&&!BS(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Q=(e,t)=>{let n=(0,l.forwardRef)(({className:n,...r},i)=>(0,l.createElement)(HS,{ref:i,iconNode:t,className:zS(`lucide-${IS(RS(e))}`,`lucide-${e}`,n),...r}));return n.displayName=RS(e),n},US=Q(`angry`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M16 16s-1.5-2-4-2-4 2-4 2`,key:`epbg0q`}],[`path`,{d:`M7.5 8 10 9`,key:`olxxln`}],[`path`,{d:`m14 9 2.5-1`,key:`1j6cij`}],[`path`,{d:`M9 10h.01`,key:`qbtxuw`}],[`path`,{d:`M15 10h.01`,key:`1qmjsl`}]]),WS=Q(`award`,[[`path`,{d:`m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526`,key:`1yiouv`}],[`circle`,{cx:`12`,cy:`8`,r:`6`,key:`1vp47v`}]]),GS=Q(`bell`,[[`path`,{d:`M10.268 21a2 2 0 0 0 3.464 0`,key:`vwvbt9`}],[`path`,{d:`M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326`,key:`11g9vi`}]]),KS=Q(`book-open`,[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]]),qS=Q(`brain`,[[`path`,{d:`M12 18V5`,key:`adv99a`}],[`path`,{d:`M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4`,key:`1e3is1`}],[`path`,{d:`M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5`,key:`1gqd8o`}],[`path`,{d:`M17.997 5.125a4 4 0 0 1 2.526 5.77`,key:`iwvgf7`}],[`path`,{d:`M18 18a4 4 0 0 0 2-7.464`,key:`efp6ie`}],[`path`,{d:`M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517`,key:`1gq6am`}],[`path`,{d:`M6 18a4 4 0 0 1-2-7.464`,key:`k1g0md`}],[`path`,{d:`M6.003 5.125a4 4 0 0 0-2.526 5.77`,key:`q97ue3`}]]),JS=Q(`calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),YS=Q(`chart-column`,[[`path`,{d:`M3 3v16a2 2 0 0 0 2 2h16`,key:`c24i48`}],[`path`,{d:`M18 17V9`,key:`2bz60n`}],[`path`,{d:`M13 17V5`,key:`1frdt8`}],[`path`,{d:`M8 17v-3`,key:`17ska0`}]]),XS=Q(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),ZS=Q(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),QS=Q(`chevron-up`,[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]]),$S=Q(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),eC=Q(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),tC=Q(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),nC=Q(`external-link`,[[`path`,{d:`M15 3h6v6`,key:`1q9fwt`}],[`path`,{d:`M10 14 21 3`,key:`gplh6r`}],[`path`,{d:`M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6`,key:`a6xqqp`}]]),rC=Q(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),iC=Q(`flag`,[[`path`,{d:`M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528`,key:`1jaruq`}]]),aC=Q(`flame`,[[`path`,{d:`M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4`,key:`1slcih`}]]),oC=Q(`gamepad-2`,[[`line`,{x1:`6`,x2:`10`,y1:`11`,y2:`11`,key:`1gktln`}],[`line`,{x1:`8`,x2:`8`,y1:`9`,y2:`13`,key:`qnk9ow`}],[`line`,{x1:`15`,x2:`15.01`,y1:`12`,y2:`12`,key:`krot7o`}],[`line`,{x1:`18`,x2:`18.01`,y1:`10`,y2:`10`,key:`1lcuu1`}],[`path`,{d:`M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z`,key:`mfqc10`}]]),sC=Q(`ghost`,[[`path`,{d:`M9 10h.01`,key:`qbtxuw`}],[`path`,{d:`M15 10h.01`,key:`1qmjsl`}],[`path`,{d:`M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z`,key:`uwwb07`}]]),cC=Q(`heart`,[[`path`,{d:`M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5`,key:`mvr1a0`}]]),lC=Q(`house`,[[`path`,{d:`M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8`,key:`5wwlr5`}],[`path`,{d:`M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`,key:`r6nss1`}]]),uC=Q(`image`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,ry:`2`,key:`1m3agn`}],[`circle`,{cx:`9`,cy:`9`,r:`2`,key:`af1f0g`}],[`path`,{d:`m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21`,key:`1xmnt7`}]]),dC=Q(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),fC=Q(`map`,[[`path`,{d:`M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z`,key:`169xi5`}],[`path`,{d:`M15 5.764v15`,key:`1pn4in`}],[`path`,{d:`M9 3.236v15`,key:`1uimfh`}]]),pC=Q(`menu`,[[`path`,{d:`M4 5h16`,key:`1tepv9`}],[`path`,{d:`M4 12h16`,key:`1lakjw`}],[`path`,{d:`M4 19h16`,key:`1djgab`}]]),mC=Q(`message-circle`,[[`path`,{d:`M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719`,key:`1sd12s`}]]),hC=Q(`mic-off`,[[`path`,{d:`M12 19v3`,key:`npa21l`}],[`path`,{d:`M15 9.34V5a3 3 0 0 0-5.68-1.33`,key:`1gzdoj`}],[`path`,{d:`M16.95 16.95A7 7 0 0 1 5 12v-2`,key:`cqa7eg`}],[`path`,{d:`M18.89 13.23A7 7 0 0 0 19 12v-2`,key:`16hl24`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}],[`path`,{d:`M9 9v3a3 3 0 0 0 5.12 2.12`,key:`r2i35w`}]]),gC=Q(`mic`,[[`path`,{d:`M12 19v3`,key:`npa21l`}],[`path`,{d:`M19 10v2a7 7 0 0 1-14 0v-2`,key:`1vc78b`}],[`rect`,{x:`9`,y:`2`,width:`6`,height:`13`,rx:`3`,key:`s6n7sd`}]]),_C=Q(`monitor-up`,[[`path`,{d:`m9 10 3-3 3 3`,key:`11gsxs`}],[`path`,{d:`M12 13V7`,key:`h0r20n`}],[`rect`,{width:`20`,height:`14`,x:`2`,y:`3`,rx:`2`,key:`48i651`}],[`path`,{d:`M12 17v4`,key:`1riwvh`}],[`path`,{d:`M8 21h8`,key:`1ev6f3`}]]),vC=Q(`party-popper`,[[`path`,{d:`M5.8 11.3 2 22l10.7-3.79`,key:`gwxi1d`}],[`path`,{d:`M4 3h.01`,key:`1vcuye`}],[`path`,{d:`M22 8h.01`,key:`1mrtc2`}],[`path`,{d:`M15 2h.01`,key:`1cjtqr`}],[`path`,{d:`M22 20h.01`,key:`1mrys2`}],[`path`,{d:`m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10`,key:`hbicv8`}],[`path`,{d:`m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17`,key:`1i94pl`}],[`path`,{d:`m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7`,key:`1cofks`}],[`path`,{d:`M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z`,key:`4kbmks`}]]),yC=Q(`pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),bC=Q(`phone`,[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]]),xC=Q(`plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),SC=Q(`reply`,[[`path`,{d:`M20 18v-2a4 4 0 0 0-4-4H4`,key:`5vmcpk`}],[`path`,{d:`m9 17-5-5 5-5`,key:`nvlc11`}]]),CC=Q(`rotate-ccw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),wC=Q(`save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),TC=Q(`send`,[[`path`,{d:`M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z`,key:`1ffxy3`}],[`path`,{d:`m21.854 2.147-10.94 10.939`,key:`12cjpa`}]]),EC=Q(`shield`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}]]),DC=Q(`skull`,[[`path`,{d:`m12.5 17-.5-1-.5 1h1z`,key:`3me087`}],[`path`,{d:`M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z`,key:`1o5pge`}],[`circle`,{cx:`15`,cy:`12`,r:`1`,key:`1tmaij`}],[`circle`,{cx:`9`,cy:`12`,r:`1`,key:`1vctgf`}]]),OC=Q(`smile`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 14s1.5 2 4 2 4-2 4-2`,key:`1y1vjs`}],[`line`,{x1:`9`,x2:`9.01`,y1:`9`,y2:`9`,key:`yxxnd0`}],[`line`,{x1:`15`,x2:`15.01`,y1:`9`,y2:`9`,key:`1p4y9e`}]]),kC=Q(`sword`,[[`path`,{d:`m11 19-6-6`,key:`s7kpr`}],[`path`,{d:`m5 21-2-2`,key:`1kw20b`}],[`path`,{d:`m8 16-4 4`,key:`1oqv8h`}],[`path`,{d:`M9.5 17.5 21 6V3h-3L6.5 14.5`,key:`pkxemp`}]]),AC=Q(`swords`,[[`polyline`,{points:`14.5 17.5 3 6 3 3 6 3 17.5 14.5`,key:`1hfsw2`}],[`line`,{x1:`13`,x2:`19`,y1:`19`,y2:`13`,key:`1vrmhu`}],[`line`,{x1:`16`,x2:`20`,y1:`16`,y2:`20`,key:`1bron3`}],[`line`,{x1:`19`,x2:`21`,y1:`21`,y2:`19`,key:`13pww6`}],[`polyline`,{points:`14.5 6.5 18 3 21 3 21 6 17.5 9.5`,key:`hbey2j`}],[`line`,{x1:`5`,x2:`9`,y1:`14`,y2:`18`,key:`1hf58s`}],[`line`,{x1:`7`,x2:`4`,y1:`17`,y2:`20`,key:`pidxm4`}],[`line`,{x1:`3`,x2:`5`,y1:`19`,y2:`21`,key:`1pehsh`}]]),jC=Q(`target`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`6`,key:`1vlfrh`}],[`circle`,{cx:`12`,cy:`12`,r:`2`,key:`1c9p78`}]]),MC=Q(`thumbs-up`,[[`path`,{d:`M7 10v12`,key:`1qc93n`}],[`path`,{d:`M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z`,key:`emmmcr`}]]),NC=Q(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),PC=Q(`trophy`,[[`path`,{d:`M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978`,key:`1n3hpd`}],[`path`,{d:`M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978`,key:`rfe1zi`}],[`path`,{d:`M18 9h1.5a1 1 0 0 0 0-5H18`,key:`7xy6bh`}],[`path`,{d:`M4 22h16`,key:`57wxv0`}],[`path`,{d:`M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z`,key:`1mhfuq`}],[`path`,{d:`M6 9H4.5a1 1 0 0 1 0-5H6`,key:`tex48p`}]]),FC=Q(`user-plus`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}],[`line`,{x1:`19`,x2:`19`,y1:`8`,y2:`14`,key:`1bvyxn`}],[`line`,{x1:`22`,x2:`16`,y1:`11`,y2:`11`,key:`1shjgl`}]]),IC=Q(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),LC=Q(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),RC=Q(`video`,[[`path`,{d:`m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5`,key:`ftymec`}],[`rect`,{x:`2`,y:`6`,width:`14`,height:`12`,rx:`2`,key:`158x01`}]]),zC=Q(`volume-x`,[[`path`,{d:`M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z`,key:`uqj9uw`}],[`line`,{x1:`22`,x2:`16`,y1:`9`,y2:`15`,key:`1ewh16`}],[`line`,{x1:`16`,x2:`22`,y1:`9`,y2:`15`,key:`5ykzw1`}]]),BC=Q(`vote`,[[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}],[`path`,{d:`M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z`,key:`1ezoue`}],[`path`,{d:`M22 19H2`,key:`nuriw5`}]]),VC=Q(`wifi`,[[`path`,{d:`M12 20h.01`,key:`zekei9`}],[`path`,{d:`M2 8.82a15 15 0 0 1 20 0`,key:`dnpr2z`}],[`path`,{d:`M5 12.859a10 10 0 0 1 14 0`,key:`1x1e6c`}],[`path`,{d:`M8.5 16.429a5 5 0 0 1 7 0`,key:`1bycff`}]]),HC=Q(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),UC=Q(`zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),WC=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),GC=e(((e,t)=>{t.exports=WC()})),KC=o(),$=GC();function qC({userName:e,onProfileUpdate:t,triggerClassName:n}){let[r,i]=(0,l.useState)(!1),[a,o]=(0,l.useState)(!1),[s,c]=(0,l.useState)({mmr:``,role:``,rank:``,phone:``,email:``,location:``,preferredHeroes:``,playstyle:``}),u=[{value:`herald`,label:`Herald`,color:`text-gray-400`,mmr:`0-769`},{value:`guardian`,label:`Guardian`,color:`text-green-400`,mmr:`770-1539`},{value:`crusader`,label:`Crusader`,color:`text-yellow-400`,mmr:`1540-2309`},{value:`archon`,label:`Archon`,color:`text-orange-400`,mmr:`2310-3079`},{value:`legend`,label:`Legend`,color:`text-purple-400`,mmr:`3080-3849`},{value:`ancient`,label:`Ancient`,color:`text-cyan-400`,mmr:`3850-4619`},{value:`divine`,label:`Divine`,color:`text-blue-400`,mmr:`4620-5600`},{value:`immortal`,label:`Immortal`,color:`text-red-400`,mmr:`5600+`}],d=[{value:`carry`,label:`Carry (Position 1)`,icon:kC},{value:`mid`,label:`Mid (Position 2)`,icon:jC},{value:`offlane`,label:`Offlane (Position 3)`,icon:EC},{value:`support`,label:`Support (Position 4)`,icon:jC},{value:`hard-support`,label:`Hard Support (Position 5)`,icon:EC}],f=e=>{let t=parseInt(e);return isNaN(t)?``:t>=5420?`immortal`:t>=4620?`divine`:t>=3850?`ancient`:t>=3080?`legend`:t>=2310?`archon`:t>=1540?`crusader`:t>=770?`guardian`:`herald`},p=e=>{c(t=>({...t,mmr:e,rank:f(e)}))},m=async()=>{try{let t=await Em(bp(PS,`user-profiles`,e));t.exists()&&c(t.data())}catch(e){console.error(`Error loading profile:`,e)}},h=async()=>{if(e){o(!0);try{let n=bp(PS,`user-profiles`,e),r={...s,userName:e,updatedAt:new Date().toISOString()};await km(n,r);let a=bp(PS,`app-data`,`players`),o=await Em(a);if(o.exists()){let t=o.data().list||{},n=t[e]||{};await km(a,{list:{...t,[e]:{...n,...s,lastUpdated:new Date().toISOString()}}},{merge:!0})}t&&t(r),alert(`Profile saved successfully!`),i(!1)}catch(e){console.error(`Error saving profile:`,e),alert(`Error saving profile: `+e.message)}finally{o(!1)}}},g=()=>{m(),i(!0)},_=()=>u.find(e=>e.value===s.rank)||u[0];return r?(0,KC.createPortal)((0,$.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-start justify-center p-4 pt-4 bg-black/70 backdrop-blur-sm overflow-y-auto`,children:(0,$.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-6 max-w-2xl w-full border-2 border-slate-700 shadow-2xl my-8 relative`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,$.jsx)(`h2`,{className:`text-2xl font-bold text-white`,children:`Profile Details`}),(0,$.jsx)(`button`,{onClick:()=>i(!1),className:`p-2 hover:bg-slate-700 rounded-lg transition-colors`,children:(0,$.jsx)(HC,{className:`w-5 h-5 text-slate-400`})})]}),(0,$.jsxs)(`div`,{className:`space-y-6`,children:[(0,$.jsxs)(`div`,{className:`bg-slate-900/50 rounded-lg p-4 border border-slate-700`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold text-white mb-4`,children:`Game Stats`}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-medium text-slate-300 mb-2`,children:`MMR (Match Making Rating)`}),(0,$.jsx)(`input`,{type:`number`,value:s.mmr,onChange:e=>p(e.target.value),placeholder:`Enter your MMR`,className:`w-full px-4 py-2 bg-slate-900 text-white rounded-lg border border-slate-600 focus:border-purple-500 focus:outline-none`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-medium text-slate-300 mb-2`,children:`Rank (Auto-calculated)`}),(0,$.jsx)(`div`,{className:`px-4 py-2 bg-slate-900 rounded-lg border border-slate-600`,children:s.rank?(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`font-bold ${_().color}`,children:_().label}),(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:_().mmr})]}):(0,$.jsx)(`span`,{className:`text-slate-500`,children:`Enter MMR first`})})]})]}),(0,$.jsxs)(`div`,{className:`mt-4`,children:[(0,$.jsx)(`label`,{className:`block text-sm font-medium text-slate-300 mb-2`,children:`Primary Role`}),(0,$.jsxs)(`select`,{value:s.role,onChange:e=>c(t=>({...t,role:e.target.value})),className:`w-full px-4 py-2 bg-slate-900 text-white rounded-lg border border-slate-600 focus:border-purple-500 focus:outline-none`,children:[(0,$.jsx)(`option`,{value:``,children:`Select your main role`}),d.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))]})]}),(0,$.jsxs)(`div`,{className:`mt-4`,children:[(0,$.jsx)(`label`,{className:`block text-sm font-medium text-slate-300 mb-2`,children:`Preferred Heroes (comma separated)`}),(0,$.jsx)(`input`,{type:`text`,value:s.preferredHeroes,onChange:e=>c(t=>({...t,preferredHeroes:e.target.value})),placeholder:`e.g., Anti-Mage, Invoker, Crystal Maiden`,className:`w-full px-4 py-2 bg-slate-900 text-white rounded-lg border border-slate-600 focus:border-purple-500 focus:outline-none`})]})]}),(0,$.jsxs)(`div`,{className:`bg-slate-900/50 rounded-lg p-4 border border-slate-700`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold text-white mb-4`,children:`Contact Information`}),(0,$.jsx)(`div`,{className:`space-y-4`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{className:`block text-sm font-medium text-slate-300 mb-2 flex items-center gap-2`,children:[(0,$.jsx)(bC,{className:`w-4 h-4`}),`Phone Number`]}),(0,$.jsx)(`input`,{type:`tel`,value:s.phone,onChange:e=>c(t=>({...t,phone:e.target.value})),placeholder:`+976 xxxx xxxx`,className:`w-full px-4 py-2 bg-slate-900 text-white rounded-lg border border-slate-600 focus:border-purple-500 focus:outline-none`})]})})]}),(0,$.jsxs)(`div`,{className:`flex gap-3`,children:[(0,$.jsxs)(`button`,{onClick:h,disabled:a,className:`flex-1 flex items-center justify-center gap-2 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:[(0,$.jsx)(wC,{className:`w-5 h-5`}),a?`Saving...`:`Save Profile`]}),(0,$.jsx)(`button`,{onClick:()=>i(!1),className:`px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-lg transition-colors`,children:`Cancel`})]})]})]})}),document.body):(0,$.jsxs)(`button`,{onClick:g,className:`flex items-center justify-center gap-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-xs sm:text-sm transition-colors ${n||`w-full`}`,children:[(0,$.jsx)(yC,{className:`w-3 h-3 sm:w-4 sm:h-4`}),(0,$.jsx)(`span`,{children:`Edit Profile Details`})]})}function JC({userName:e,scheduleData:t,updateSchedule:n,compact:r=!1}){let[i,a]=(0,l.useState)(!1),[o,s]=(0,l.useState)(``),[c,u]=(0,l.useState)(``),[d,f]=(0,l.useState)(!1),p=e=>{let t=e.match(/opendota\.com\/players\/(\d+)/);if(t)return t[1];let n=e.match(/dotabuff\.com\/players\/(\d+)/);if(n)return n[1];let r=e.match(/stratz\.com\/players\/(\d+)/);return r?r[1]:/^\d+$/.test(e.trim())?e.trim():null},m=[{value:`herald`,label:`Herald`,color:`text-gray-400`,mmrMin:0,mmrMax:769},{value:`guardian`,label:`Guardian`,color:`text-green-400`,mmrMin:770,mmrMax:1539},{value:`crusader`,label:`Crusader`,color:`text-yellow-400`,mmrMin:1540,mmrMax:2309},{value:`archon`,label:`Archon`,color:`text-orange-400`,mmrMin:2310,mmrMax:3079},{value:`legend`,label:`Legend`,color:`text-purple-400`,mmrMin:3080,mmrMax:3849},{value:`ancient`,label:`Ancient`,color:`text-cyan-400`,mmrMin:3850,mmrMax:4619},{value:`divine`,label:`Divine`,color:`text-blue-400`,mmrMin:4620,mmrMax:5600},{value:`immortal`,label:`Immortal`,color:`text-red-400`,mmrMin:5600,mmrMax:1/0}],h=e=>{if(!e||e<0)return`Unranked`;for(let t of m)if(e>=t.mmrMin&&e<=t.mmrMax)return t.label;return`Unranked`},g=async t=>{try{f(!0),console.log(`Fetching stats for Steam ID:`,t);let n=await(await fetch(`https://api.opendota.com/api/players/${t}`)).json();console.log(`Player data:`,n);let r=await(await fetch(`https://api.opendota.com/api/players/${t}/wl`)).json();console.log(`Win/Loss data:`,r);let i=await(await fetch(`https://api.opendota.com/api/players/${t}/recentMatches`)).json();console.log(`Recent matches:`,i);let a=(r.win||0)+(r.lose||0),o=a>0?(r.win/a*100).toFixed(1):`0.0`,s=i&&i.length>0?i[0]:null,c=Math.floor(Date.now()/1e3),l=s&&c-s.start_time<7200&&!s.duration,u=s?new Date(s.start_time*1e3):null,d={steamId:t,name:n.profile?.personaname||e,avatar:n.profile?.avatarfull||n.profile?.avatar||n.profile?.avatarmedium||null,mmr:0,rank:n.rank_tier||0,leaderboardRank:n.leaderboard_rank||null,winRate:o,totalGames:a,wins:r.win||0,losses:r.lose||0,isPlaying:l||!1,lastMatchTime:u?u.toISOString():null,profileUrl:`https://www.opendota.com/players/${t}`};return console.log(`Final stats object:`,d),d}catch(e){return console.error(`Error fetching player stats:`,e),alert(`Error fetching stats: `+e.message),null}finally{f(!1)}},_=async()=>{if(!e||!o.trim()){alert(`Please enter a Steam ID or profile URL.`);return}if(!c.trim()){alert(`Please enter your MMR.`);return}let r=parseInt(c.trim());if(isNaN(r)||r<0){alert(`Please enter a valid MMR (positive number).`);return}let i=p(o);if(!i){alert(`Invalid Steam ID or URL. Please enter:
- OpenDota URL (opendota.com/players/...)
- Dotabuff URL (dotabuff.com/players/...)
- Steam ID (numeric)`);return}let l=await g(i);if(console.log(`Stats returned from fetch:`,l),l)try{l.mmr=r;let i=bp(PS,`app-data`,`players`),o=await Em(i),c={...o.exists()&&o.data().list||{},[e]:{...l,registeredAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}};await km(i,{list:c}),console.log(`Player saved to players document:`,e),await n({playerStats:{...t.playerStats,[e]:l}}),console.log(`Player data saved successfully`),console.log(`All players:`,Object.keys(c));let d=h(l.mmr);alert(`Profile linked successfully!\n\nName: ${l.name}\nRank: ${d}\nMMR: ${l.mmr}`),a(!1),s(``),u(``)}catch(e){console.error(`Error saving player data:`,e),alert(`Error saving player data: `+e.message)}else alert(`Failed to fetch player stats. Please check your Steam ID and try again.`)};return(0,$.jsxs)($.Fragment,{children:[e&&(0,$.jsxs)(`div`,{className:r?`w-full space-y-2`:`flex items-center gap-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>a(!0),className:`flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-xs sm:text-sm ${r?`w-full justify-center`:``}`,children:[(0,$.jsx)(xC,{className:`w-3 h-3 sm:w-4 sm:h-4`}),t.playerStats[e]?`Update Steam Profile`:`Link Steam Profile`]}),(0,$.jsx)(qC,{userName:e,triggerClassName:r?`w-full`:`w-auto`}),!r&&(0,$.jsxs)(`span`,{className:`text-xs text-slate-500`,children:[`Stats: `,t.playerStats[e]?``:``,` | User: `,e]})]}),i&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 pt-54 bg-black/70 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-6 sm:p-8 max-w-lg w-full border-2 border-slate-700 shadow-2xl`,children:[(0,$.jsx)(`h2`,{className:`text-2xl sm:text-3xl font-bold text-white mb-2`,children:`Link Your Dota 2 Profile`}),(0,$.jsx)(`p`,{className:`text-slate-300 mb-4`,children:`Enter your Steam ID or profile URL to display your stats`}),(0,$.jsxs)(`div`,{className:`bg-blue-900/20 border border-blue-600/30 rounded-lg p-3 mb-4`,children:[(0,$.jsx)(`p`,{className:`text-blue-300 text-sm font-semibold mb-2`,children:`Accepted formats:`}),(0,$.jsxs)(`ul`,{className:`text-blue-200 text-xs space-y-1`,children:[(0,$.jsx)(`li`,{children:` OpenDota: https://www.opendota.com/players/123456789`}),(0,$.jsx)(`li`,{children:` Dotabuff: https://www.dotabuff.com/players/123456789`}),(0,$.jsx)(`li`,{children:` Steam ID: 123456789`})]})]}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Paste your profile URL or Steam ID...`,value:o,onChange:e=>s(e.target.value),className:`w-full p-3 sm:p-4 bg-slate-900 text-white rounded-lg border-2 border-slate-600 focus:border-green-500 focus:outline-none mb-4 text-sm sm:text-base`,autoFocus:!0}),(0,$.jsxs)(`div`,{className:`mb-4`,children:[(0,$.jsx)(`label`,{className:`block text-white text-sm font-semibold mb-2`,children:`Your MMR`}),(0,$.jsx)(`input`,{type:`number`,placeholder:`Enter your current MMR...`,value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{e.key===`Enter`&&_()},className:`w-full p-3 sm:p-4 bg-slate-900 text-white rounded-lg border-2 border-slate-600 focus:border-green-500 focus:outline-none text-sm sm:text-base`,min:`0`}),c&&!isNaN(parseInt(c))&&(0,$.jsx)(`div`,{className:`mt-2 p-2 bg-slate-900/50 rounded-lg border border-slate-700`,children:(0,$.jsxs)(`p`,{className:`text-sm text-slate-400`,children:[`Calculated Rank: `,(0,$.jsx)(`span`,{className:`font-bold text-white`,children:h(parseInt(c))})]})})]}),(0,$.jsxs)(`div`,{className:`flex gap-3`,children:[(0,$.jsx)(`button`,{onClick:_,disabled:d,className:`flex-1 py-3 sm:py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-colors duration-200 text-base sm:text-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:d?`Loading...`:`Save Profile`}),(0,$.jsx)(`button`,{onClick:()=>{a(!1),s(``),u(``)},className:`px-6 py-3 sm:py-4 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-lg transition-colors duration-200 text-base sm:text-lg`,children:`Cancel`})]})]})})]})}function YC({currentPage:e,setCurrentPage:t,userName:n,scheduleData:r,updateSchedule:i,onLogout:a}){let[o,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[d,f]=(0,l.useState)({});(0,l.useEffect)(()=>{let e=Nm(bp(PS,`app-data`,`players`),e=>{e.exists()?f(e.data().list||{}):f({})},e=>{console.error(`Error loading registered players:`,e)});return()=>e()},[]);let p=[{id:`feed`,label:`Feed`,icon:uC,color:`pink`},{id:`chat`,label:`Chat`,icon:mC,color:`green`},{id:`home`,label:`Polls`,icon:BC,color:`green`},{id:`draft`,label:`Draft`,icon:AC,color:`purple`},{id:`schedule`,label:`Schedule`,icon:JS,color:`orange`},{id:`players`,label:`Players`,icon:LC,color:`cyan`},{id:`statistics`,label:`Statistics`,icon:YS,color:`yellow`},{id:`guide`,label:`Guide`,icon:KS,color:`blue`}],m=e=>{let t={green:`bg-green-600 text-white shadow-lg`,purple:`bg-purple-600 text-white shadow-lg`,orange:`bg-orange-600 text-white shadow-lg`,cyan:`bg-cyan-600 text-white shadow-lg`,yellow:`bg-yellow-600 text-white shadow-lg`,blue:`bg-blue-600 text-white shadow-lg`,pink:`bg-pink-600 text-white shadow-lg`};return t[e]||t.green};return(0,$.jsxs)(`header`,{className:`sticky top-0 z-50 bg-slate-900/95 backdrop-blur-md border-b border-slate-800 shadow-2xl`,children:[(0,$.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between h-16 sm:h-20`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3 flex-shrink-0`,children:[(0,$.jsx)(`div`,{className:`w-10 h-10 sm:w-12 sm:h-12 bg-linear-to-br from-purple-600 to-pink-600 rounded-lg flex items-center justify-center shadow-lg`,children:(0,$.jsx)(AC,{className:`w-6 h-6 sm:w-7 sm:h-7 text-white`})}),(0,$.jsxs)(`div`,{className:`hidden sm:block`,children:[(0,$.jsx)(`h1`,{className:`text-lg sm:text-xl font-black text-transparent bg-clip-text bg-linear-to-r from-purple-400 to-pink-400`,children:`Permum Suga`}),(0,$.jsx)(`p`,{className:`text-xs text-slate-400`,children:`Dota 2 Community`})]})]}),(0,$.jsx)(`nav`,{className:`hidden lg:flex items-center gap-2`,children:p.map(n=>{let r=n.icon;return(0,$.jsxs)(`button`,{onClick:()=>t(n.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all duration-200 ${e===n.id?m(n.color):`bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 border border-slate-700 hover:border-slate-600`}`,children:[(0,$.jsx)(r,{className:`w-4 h-4`}),(0,$.jsx)(`span`,{className:`text-sm`,children:n.label})]},n.id)})}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[n&&(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsxs)(`button`,{onClick:()=>u(!c),className:`flex items-center gap-2 px-3 py-2 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg border border-slate-700 transition-colors`,children:[d?.[n]?.avatar?(0,$.jsx)(`img`,{src:d[n].avatar,alt:n,className:`w-6 h-6 rounded-full border border-slate-600`}):(0,$.jsx)(IC,{className:`w-4 h-4 text-slate-400`}),(0,$.jsx)(`span`,{className:`text-sm text-white font-medium hidden sm:block max-w-[120px] truncate`,children:n})]}),c&&(0,$.jsxs)(`div`,{className:`absolute right-0 mt-2 w-64 bg-slate-800 rounded-lg shadow-2xl border border-slate-700 overflow-hidden z-50`,children:[(0,$.jsx)(`div`,{className:`p-4 border-b border-slate-700`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[d?.[n]?.avatar&&(0,$.jsx)(`img`,{src:d[n].avatar,alt:n,className:`w-12 h-12 rounded-full border-2 border-slate-600`}),(0,$.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,$.jsx)(`p`,{className:`text-white font-semibold truncate`,children:n}),d?.[n]?(0,$.jsxs)(`div`,{className:`space-y-1`,children:[(0,$.jsx)(`p`,{className:`text-slate-400 text-xs mt-0.5`,children:d[n].rank?(0,$.jsxs)(`span`,{className:`text-yellow-400`,children:[`Rank: `,typeof d[n].rank==`number`?`${Math.floor(d[n].rank/10)}`:d[n].rank.charAt(0).toUpperCase()+d[n].rank.slice(1),d[n].mmr&&`  MMR: ${typeof d[n].mmr==`number`?d[n].mmr.toLocaleString():parseInt(d[n].mmr,10).toLocaleString()}`]}):`Community Member`}),d[n].role&&(0,$.jsxs)(`p`,{className:`text-slate-400 text-xs`,children:[`Role: `,(0,$.jsx)(`span`,{className:`text-white`,children:d[n].role.charAt(0).toUpperCase()+d[n].role.slice(1)})]}),d[n].phone&&(0,$.jsxs)(`p`,{className:`text-slate-400 text-xs`,children:[`Phone: `,(0,$.jsx)(`span`,{className:`text-white`,children:d[n].phone})]}),d[n].preferredHeroes&&(0,$.jsxs)(`p`,{className:`text-slate-400 text-xs truncate max-w-[200px]`,children:[`Heroes: `,(0,$.jsx)(`span`,{className:`text-white`,children:d[n].preferredHeroes})]})]}):(0,$.jsx)(`p`,{className:`text-slate-400 text-xs mt-0.5`,children:`Community Member`})]})]})}),(0,$.jsx)(`div`,{className:`p-3`,children:(0,$.jsx)(JC,{userName:n,scheduleData:r,updateSchedule:i,compact:!0})}),(0,$.jsx)(`div`,{className:`border-t border-slate-700`,children:(0,$.jsxs)(`button`,{onClick:()=>{a(),u(!1)},className:`w-full flex items-center gap-2 px-4 py-3 text-red-400 hover:bg-red-600/10 transition-colors`,children:[(0,$.jsx)(dC,{className:`w-4 h-4`}),(0,$.jsx)(`span`,{className:`text-sm font-medium`,children:`Logout`})]})})]})]}),(0,$.jsx)(`button`,{onClick:()=>s(!o),className:`lg:hidden p-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg transition-colors`,children:o?(0,$.jsx)(HC,{className:`w-6 h-6`}):(0,$.jsx)(pC,{className:`w-6 h-6`})})]})]}),o&&(0,$.jsx)(`div`,{className:`lg:hidden pb-4 border-t border-slate-800 mt-2 pt-4`,children:(0,$.jsx)(`nav`,{className:`flex flex-col gap-2`,children:p.map(n=>{let r=n.icon;return(0,$.jsxs)(`button`,{onClick:()=>{t(n.id),s(!1)},className:`flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${e===n.id?m(n.color):`bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 border border-slate-700`}`,children:[(0,$.jsx)(r,{className:`w-5 h-5`}),(0,$.jsx)(`span`,{children:n.label})]},n.id)})})})]}),c&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-40`,onClick:()=>u(!1)})]})}var XC=[{id:1,question:`Playing Dota 2 today?`,options:[`Yes`,`No`],votes:[{count:0,voters:[]},{count:0,voters:[]}],createdAt:new Date().toISOString()}];function ZC({userName:e,setShowNameModal:t}){let[n,r]=(0,l.useState)([]),[i,a]=(0,l.useState)(!1),[o,s]=(0,l.useState)({question:``,options:[``,``]}),[c,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=bp(PS,`app-data`,`polls`),t=Nm(e,t=>{t.exists()?r(t.data().list||[]):(km(e,{list:XC}),r(XC)),u(!1)},e=>{console.error(`Error loading polls:`,e);let t=localStorage.getItem(`polls`);r(t?JSON.parse(t):XC),u(!1)});return()=>t()},[]),(0,l.useEffect)(()=>{n.length>0&&localStorage.setItem(`polls`,JSON.stringify(n))},[n]);let d=async(i,a)=>{if(!e){t(!0);return}let o=n.map(t=>{if(t.id===i){let n=t.votes.findIndex(t=>t.voters.includes(e)),r=[...t.votes];return n!==-1&&(r[n]={count:r[n].count-1,voters:r[n].voters.filter(t=>t!==e)}),n!==a&&(r[a]={count:r[a].count+1,voters:[...r[a].voters,e]}),{...t,votes:r}}return t});try{await Am(bp(PS,`app-data`,`polls`),{list:o})}catch(e){console.error(`Error updating vote:`,e),r(o)}},f=async()=>{if(o.question.trim()&&o.options.every(e=>e.trim())){let e=o.options.filter(e=>e.trim()),t={id:Date.now(),question:o.question,options:e,votes:e.map(()=>({count:0,voters:[]})),createdAt:new Date().toISOString()},i=[...n,t];try{await Am(bp(PS,`app-data`,`polls`),{list:i})}catch(e){console.error(`Error creating poll:`,e),r(i)}s({question:``,options:[``,``]}),a(!1)}},p=()=>{s({...o,options:[...o.options,``]})},m=async e=>{if(!confirm(`Are you sure you want to delete this poll?`))return;let t=n.filter(t=>t.id!==e);try{await Am(bp(PS,`app-data`,`polls`),{list:t})}catch(e){console.error(`Error removing poll:`,e),r(t)}},h=e=>{if(!e)return`Unknown date`;let t=new Date(e),n=new Date,r=n-t,i=Math.floor(r/6e4),a=Math.floor(r/36e5),o=Math.floor(r/864e5);return i<1?`Just now`:i<60?`${i} minute${i>1?`s`:``} ago`:a<24?`${a} hour${a>1?`s`:``} ago`:o<7?`${o} day${o>1?`s`:``} ago`:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:t.getFullYear()===n.getFullYear()?void 0:`numeric`})};return(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(`div`,{className:`mb-8 sm:mb-12 bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl sm:rounded-2xl p-5 sm:p-6 lg:p-8 border-2 border-slate-700/50 mx-2 sm:mx-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-4 sm:mb-6`,children:[(0,$.jsxs)(`h3`,{className:`text-lg sm:text-xl font-bold text-white flex items-center gap-2 sm:gap-3`,children:[(0,$.jsx)(YS,{className:`w-5 h-5 sm:w-6 sm:h-6 text-green-400 shrink-0`}),(0,$.jsx)(`span`,{children:`Community Polls`})]}),(0,$.jsxs)(`button`,{onClick:()=>a(!i),className:`flex items-center gap-2 px-3 sm:px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 text-sm sm:text-base`,children:[(0,$.jsx)(xC,{className:`w-4 h-4`}),(0,$.jsx)(`span`,{className:`hidden sm:inline`,children:`Create Poll`}),(0,$.jsx)(`span`,{className:`sm:hidden`,children:`New`})]})]}),i&&(0,$.jsxs)(`div`,{className:`mb-6 p-4 sm:p-6 bg-slate-900/50 rounded-lg border border-slate-700`,children:[(0,$.jsx)(`h4`,{className:`text-base sm:text-lg font-semibold text-white mb-4`,children:`Create New Poll`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Enter your question (e.g., Playing Dota 2 today?)`,value:o.question,onChange:e=>s({...o,question:e.target.value}),className:`w-full p-3 bg-slate-800 text-white rounded-lg border border-slate-600 focus:border-green-500 focus:outline-none mb-4 text-sm sm:text-base`}),(0,$.jsx)(`div`,{className:`space-y-2 mb-4`,children:o.options.map((e,t)=>(0,$.jsx)(`input`,{type:`text`,placeholder:`Option ${t+1}`,value:e,onChange:e=>{let n=[...o.options];n[t]=e.target.value,s({...o,options:n})},className:`w-full p-2 sm:p-3 bg-slate-800 text-white rounded-lg border border-slate-600 focus:border-green-500 focus:outline-none text-sm sm:text-base`},t))}),(0,$.jsxs)(`div`,{className:`flex gap-2 sm:gap-3`,children:[(0,$.jsx)(`button`,{onClick:p,className:`px-3 sm:px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors duration-200 text-sm sm:text-base`,children:`Add Option`}),(0,$.jsx)(`button`,{onClick:f,className:`px-4 sm:px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 font-semibold text-sm sm:text-base`,children:`Create`}),(0,$.jsx)(`button`,{onClick:()=>{a(!1),s({question:``,options:[``,``]})},className:`px-3 sm:px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors duration-200 text-sm sm:text-base`,children:`Cancel`})]})]}),c?(0,$.jsx)(`div`,{className:`flex items-center justify-center p-12`,children:(0,$.jsxs)(`div`,{className:`text-center`,children:[(0,$.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4`}),(0,$.jsx)(`p`,{className:`text-slate-400`,children:`Loading polls...`})]})}):(0,$.jsx)(`div`,{className:`space-y-4 sm:space-y-6`,children:n.map(t=>{let n=t.votes.reduce((e,t)=>e+t.count,0),r=t.votes.some(t=>t.voters.includes(e));return(0,$.jsxs)(`div`,{className:`p-4 sm:p-6 bg-slate-900/50 rounded-lg border border-slate-700`,children:[(0,$.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`h4`,{className:`text-base sm:text-lg font-semibold text-white`,children:t.question}),(0,$.jsxs)(`p`,{className:`text-xs text-slate-500 mt-1`,children:[`Created `,h(t.createdAt)]})]}),(0,$.jsx)(`button`,{onClick:()=>m(t.id),className:`p-2 hover:bg-red-600/20 rounded-lg transition-colors text-red-400 hover:text-red-300`,title:`Delete poll`,children:(0,$.jsx)(NC,{className:`w-4 h-4`})})]}),(0,$.jsx)(`div`,{className:`space-y-3`,children:t.options.map((i,a)=>{let o=t.votes[a],s=n===0?0:Math.round(o.count/n*100),c=o.voters.includes(e);return(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsxs)(`button`,{onClick:()=>d(t.id,a),className:`w-full relative z-10 p-3 sm:p-4 rounded-lg border text-left transition-all duration-200 flex items-center justify-between group ${c?`border-green-500 bg-green-500/10 hover:border-green-400`:r?`border-slate-700 bg-slate-800/50 hover:border-slate-600 hover:bg-slate-700/50`:`border-slate-700 bg-slate-800 hover:border-green-500/50 hover:bg-slate-700`}`,title:r?`Click to change your vote`:`Click to vote`,children:[(0,$.jsxs)(`span`,{className:`font-medium text-sm sm:text-base ${c?`text-green-400`:`text-slate-300`}`,children:[i,c&&(0,$.jsx)(`span`,{className:`ml-2 text-xs text-green-400/70`,children:`(Your vote)`})]}),r&&(0,$.jsxs)(`span`,{className:`text-slate-400 text-sm sm:text-base`,children:[s,`% (`,o.count,`)`]})]}),r&&(0,$.jsx)(`div`,{className:`absolute top-0 left-0 h-full bg-green-500/10 rounded-lg transition-all duration-500`,style:{width:`${s}%`}})]},a)})}),r&&(0,$.jsxs)(`div`,{className:`mt-4 pt-4 border-t border-slate-700/50`,children:[(0,$.jsxs)(`p`,{className:`text-xs sm:text-sm text-slate-400`,children:[`Total votes: `,n]}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 mt-2`,children:t.votes.map((e,n)=>e.voters.length>0?(0,$.jsxs)(`div`,{className:`text-xs text-slate-500`,children:[(0,$.jsxs)(`span`,{className:`text-slate-400 font-medium`,children:[t.options[n],`:`]}),` `,e.voters.join(`, `)]},n):null)})]})]},t.id)})})]})})}function QC(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let n=document.implementation.createHTMLDocument(),r=n.createElement(`base`),i=n.createElement(`a`);return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const $C=(()=>{let e=0,t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function ew(e){let t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}var tw=null;function nw(e={}){return tw||(e.includeStyleProperties?(tw=e.includeStyleProperties,tw):(tw=ew(window.getComputedStyle(document.documentElement)),tw))}function rw(e,t){let n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace(`px`,``)):0}function iw(e){let t=rw(e,`border-left-width`),n=rw(e,`border-right-width`);return e.clientWidth+t+n}function aw(e){let t=rw(e,`border-top-width`),n=rw(e,`border-bottom-width`);return e.clientHeight+t+n}function ow(e,t={}){return{width:t.width||iw(e),height:t.height||aw(e)}}function sw(){let e,t;try{t=process}catch{}let n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}var cw=16384;function lw(e){(e.width>cw||e.height>cw)&&(e.width>cw&&e.height>cw?e.width>e.height?(e.height*=cw/e.width,e.width=cw):(e.width*=cw/e.height,e.height=cw):e.width>cw?(e.height*=cw/e.width,e.width=cw):(e.width*=cw/e.height,e.height=cw))}function uw(e){return new Promise((t,n)=>{let r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin=`anonymous`,r.decoding=`async`,r.src=e})}async function dw(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function fw(e,t,n){let r=`http://www.w3.org/2000/svg`,i=document.createElementNS(r,`svg`),a=document.createElementNS(r,`foreignObject`);return i.setAttribute(`width`,`${t}`),i.setAttribute(`height`,`${n}`),i.setAttribute(`viewBox`,`0 0 ${t} ${n}`),a.setAttribute(`width`,`100%`),a.setAttribute(`height`,`100%`),a.setAttribute(`x`,`0`),a.setAttribute(`y`,`0`),a.setAttribute(`externalResourcesRequired`,`true`),i.appendChild(a),a.appendChild(e),dw(i)}const pw=(e,t)=>{if(e instanceof t)return!0;let n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||pw(n,t)};function mw(e){let t=e.getPropertyValue(`content`);return`${e.cssText} content: '${t.replace(/'|"/g,``)}';`}function hw(e,t){return nw(t).map(t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?` !important`:``};`).join(` `)}function gw(e,t,n,r){let i=`.${e}:${t}`,a=n.cssText?mw(n):hw(n,r);return document.createTextNode(`${i}{${a}}`)}function _w(e,t,n,r){let i=window.getComputedStyle(e,n),a=i.getPropertyValue(`content`);if(a===``||a===`none`)return;let o=$C();try{t.className=`${t.className} ${o}`}catch{return}let s=document.createElement(`style`);s.appendChild(gw(o,n,i,r)),t.appendChild(s)}function vw(e,t,n){_w(e,t,`:before`,n),_w(e,t,`:after`,n)}var yw=`application/font-woff`,bw=`image/jpeg`,xw={woff:yw,woff2:yw,ttf:`application/font-truetype`,eot:`application/vnd.ms-fontobject`,png:`image/png`,jpg:bw,jpeg:bw,gif:`image/gif`,tiff:`image/tiff`,svg:`image/svg+xml`,webp:`image/webp`};function Sw(e){let t=/\.([^./]*?)$/g.exec(e);return t?t[1]:``}function Cw(e){return xw[Sw(e).toLowerCase()]||``}function ww(e){return e.split(/,/)[1]}function Tw(e){return e.search(/^(data:)/)!==-1}function Ew(e,t){return`data:${t};base64,${e}`}async function Dw(e,t,n){let r=await fetch(e,t);if(r.status===404)throw Error(`Resource "${r.url}" not found`);let i=await r.blob();return new Promise((e,t)=>{let a=new FileReader;a.onerror=t,a.onloadend=()=>{try{e(n({res:r,result:a.result}))}catch(e){t(e)}},a.readAsDataURL(i)})}var Ow={};function kw(e,t,n){let r=e.replace(/\?.*/,``);return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,``)),t?`[${t}]${r}`:r}async function Aw(e,t,n){let r=kw(e,t,n.includeQueryParams);if(Ow[r]!=null)return Ow[r];n.cacheBust&&(e+=(/\?/.test(e)?`&`:`?`)+new Date().getTime());let i;try{i=Ew(await Dw(e,n.fetchRequestInit,({res:e,result:n})=>(t||=e.headers.get(`Content-Type`)||``,ww(n))),t)}catch(t){i=n.imagePlaceholder||``;let r=`Failed to fetch resource: ${e}`;t&&(r=typeof t==`string`?t:t.message),r&&console.warn(r)}return Ow[r]=i,i}async function jw(e){let t=e.toDataURL();return t===`data:,`?e.cloneNode(!1):uw(t)}async function Mw(e,t){if(e.currentSrc){let t=document.createElement(`canvas`),n=t.getContext(`2d`);return t.width=e.clientWidth,t.height=e.clientHeight,n?.drawImage(e,0,0,t.width,t.height),uw(t.toDataURL())}let n=e.poster;return uw(await Aw(n,Cw(n),t))}async function Nw(e,t){try{if(e?.contentDocument?.body)return await Uw(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Pw(e,t){return pw(e,HTMLCanvasElement)?jw(e):pw(e,HTMLVideoElement)?Mw(e,t):pw(e,HTMLIFrameElement)?Nw(e,t):e.cloneNode(Iw(e))}var Fw=e=>e.tagName!=null&&e.tagName.toUpperCase()===`SLOT`,Iw=e=>e.tagName!=null&&e.tagName.toUpperCase()===`SVG`;async function Lw(e,t,n){if(Iw(t))return t;let r=[];return r=Fw(e)&&e.assignedNodes?ew(e.assignedNodes()):pw(e,HTMLIFrameElement)&&e.contentDocument?.body?ew(e.contentDocument.body.childNodes):ew((e.shadowRoot??e).childNodes),r.length===0||pw(e,HTMLVideoElement)||await r.reduce((e,r)=>e.then(()=>Uw(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}function Rw(e,t,n){let r=t.style;if(!r)return;let i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):nw(n).forEach(n=>{let a=i.getPropertyValue(n);n===`font-size`&&a.endsWith(`px`)&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),pw(e,HTMLIFrameElement)&&n===`display`&&a===`inline`&&(a=`block`),n===`d`&&t.getAttribute(`d`)&&(a=`path(${t.getAttribute(`d`)})`),r.setProperty(n,a,i.getPropertyPriority(n))})}function zw(e,t){pw(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),pw(e,HTMLInputElement)&&t.setAttribute(`value`,e.value)}function Bw(e,t){if(pw(e,HTMLSelectElement)){let n=t,r=Array.from(n.children).find(t=>e.value===t.getAttribute(`value`));r&&r.setAttribute(`selected`,``)}}function Vw(e,t,n){return pw(t,Element)&&(Rw(e,t,n),vw(e,t,n),zw(e,t),Bw(e,t)),t}async function Hw(e,t){let n=e.querySelectorAll?e.querySelectorAll(`use`):[];if(n.length===0)return e;let r={};for(let i=0;i<n.length;i++){let a=n[i].getAttribute(`xlink:href`);if(a){let n=e.querySelector(a),i=document.querySelector(a);!n&&i&&!r[a]&&(r[a]=await Uw(i,t,!0))}}let i=Object.values(r);if(i.length){let t=`http://www.w3.org/1999/xhtml`,n=document.createElementNS(t,`svg`);n.setAttribute(`xmlns`,t),n.style.position=`absolute`,n.style.width=`0`,n.style.height=`0`,n.style.overflow=`hidden`,n.style.display=`none`;let r=document.createElementNS(t,`defs`);n.appendChild(r);for(let e=0;e<i.length;e++)r.appendChild(i[e]);e.appendChild(n)}return e}async function Uw(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(e=>Pw(e,t)).then(n=>Lw(e,n,t)).then(n=>Vw(e,n,t)).then(e=>Hw(e,t))}var Ww=/url\((['"]?)([^'"]+?)\1\)/g,Gw=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Kw=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function qw(e){let t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,`\\$1`);return RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,`g`)}function Jw(e){let t=[];return e.replace(Ww,(e,n,r)=>(t.push(r),e)),t.filter(e=>!Tw(e))}async function Yw(e,t,n,r,i){try{let a=n?QC(t,n):t,o=Cw(t),s;return s=i?Ew(await i(a),o):await Aw(a,o,r),e.replace(qw(t),`$1${s}$3`)}catch{}return e}function Xw(e,{preferredFontFormat:t}){return t?e.replace(Kw,e=>{for(;;){let[n,,r]=Gw.exec(e)||[];if(!r)return``;if(r===t)return`src: ${n};`}}):e}function Zw(e){return e.search(Ww)!==-1}async function Qw(e,t,n){if(!Zw(e))return e;let r=Xw(e,n);return Jw(r).reduce((e,r)=>e.then(e=>Yw(e,r,t,n)),Promise.resolve(r))}async function $w(e,t,n){let r=t.style?.getPropertyValue(e);if(r){let i=await Qw(r,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function eT(e,t){await $w(`background`,e,t)||await $w(`background-image`,e,t),await $w(`mask`,e,t)||await $w(`-webkit-mask`,e,t)||await $w(`mask-image`,e,t)||await $w(`-webkit-mask-image`,e,t)}async function tT(e,t){let n=pw(e,HTMLImageElement);if(!(n&&!Tw(e.src))&&!(pw(e,SVGImageElement)&&!Tw(e.href.baseVal)))return;let r=n?e.src:e.href.baseVal,i=await Aw(r,Cw(r),t);await new Promise((r,a)=>{e.onload=r,e.onerror=t.onImageErrorHandler?(...e)=>{try{r(t.onImageErrorHandler(...e))}catch(e){a(e)}}:a;let o=e;o.decode&&=r,o.loading===`lazy`&&(o.loading=`eager`),n?(e.srcset=``,e.src=i):e.href.baseVal=i})}async function nT(e,t){let n=ew(e.childNodes).map(e=>rT(e,t));await Promise.all(n).then(()=>e)}async function rT(e,t){pw(e,Element)&&(await eT(e,t),await tT(e,t),await nT(e,t))}function iT(e,t){let{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);let r=t.style;return r!=null&&Object.keys(r).forEach(e=>{n[e]=r[e]}),e}var aT={};async function oT(e){let t=aT[e];return t??(t={url:e,cssText:await(await fetch(e)).text()},aT[e]=t,t)}async function sT(e,t){let n=e.cssText,r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let a=i.replace(r,`$1`);return a.startsWith(`https://`)||(a=new URL(a,e.url).href),Dw(a,t.fetchRequestInit,({result:e})=>(n=n.replace(i,`url(${e})`),[i,e]))});return Promise.all(i).then(()=>n)}function cT(e){if(e==null)return[];let t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,``),r=RegExp(`((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})`,`gi`);for(;;){let e=r.exec(n);if(e===null)break;t.push(e[0])}n=n.replace(r,``);let i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a=RegExp(`((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})`,`gi`);for(;;){let e=i.exec(n);if(e===null){if(e=a.exec(n),e===null)break;i.lastIndex=a.lastIndex}else a.lastIndex=i.lastIndex;t.push(e[0])}return t}async function lT(e,t){let n=[],r=[];return e.forEach(n=>{if(`cssRules`in n)try{ew(n.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let a=i+1,o=e.href,s=oT(o).then(e=>sT(e,t)).then(e=>cT(e).forEach(e=>{try{n.insertRule(e,e.startsWith(`@import`)?a+=1:n.cssRules.length)}catch(t){console.error(`Error inserting rule from remote css`,{rule:e,error:t})}})).catch(e=>{console.error(`Error loading remote css`,e.toString())});r.push(s)}})}catch(i){let a=e.find(e=>e.href==null)||document.styleSheets[0];n.href!=null&&r.push(oT(n.href).then(e=>sT(e,t)).then(e=>cT(e).forEach(e=>{a.insertRule(e,a.cssRules.length)})).catch(e=>{console.error(`Error loading remote stylesheet`,e)})),console.error(`Error inlining remote css file`,i)}}),Promise.all(r).then(()=>(e.forEach(e=>{if(`cssRules`in e)try{ew(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),n))}function uT(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Zw(e.style.getPropertyValue(`src`)))}async function dT(e,t){if(e.ownerDocument==null)throw Error(`Provided element is not within a Document`);return uT(await lT(ew(e.ownerDocument.styleSheets),t))}function fT(e){return e.trim().replace(/["']/g,``)}function pT(e){let t=new Set;function n(e){(e.style.fontFamily||getComputedStyle(e).fontFamily).split(`,`).forEach(e=>{t.add(fT(e))}),Array.from(e.children).forEach(e=>{e instanceof HTMLElement&&n(e)})}return n(e),t}async function mT(e,t){let n=await dT(e,t),r=pT(e);return(await Promise.all(n.filter(e=>r.has(fT(e.style.fontFamily))).map(e=>{let n=e.parentStyleSheet?e.parentStyleSheet.href:null;return Qw(e.cssText,n,t)}))).join(`
`)}async function hT(e,t){let n=t.fontEmbedCSS==null?t.skipFonts?null:await mT(e,t):t.fontEmbedCSS;if(n){let t=document.createElement(`style`),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function gT(e,t={}){let{width:n,height:r}=ow(e,t),i=await Uw(e,t,!0);return await hT(i,t),await rT(i,t),iT(i,t),await fw(i,n,r)}async function _T(e,t={}){let{width:n,height:r}=ow(e,t),i=await uw(await gT(e,t)),a=document.createElement(`canvas`),o=a.getContext(`2d`),s=t.pixelRatio||sw(),c=t.canvasWidth||n,l=t.canvasHeight||r;return a.width=c*s,a.height=l*s,t.skipAutoScale||lw(a),a.style.width=`${c}`,a.style.height=`${l}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(i,0,0,a.width,a.height),a}async function vT(e,t={}){return(await _T(e,t)).toDataURL()}function yT(e){let[t,n]=(0,l.useState)({}),[r,i]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let t=dS(FS,`presence/${e}`),r=dS(FS,`presence`),a=async()=>{let n={state:`online`,lastChanged:jS(),userName:e};try{await mS(t,n),await pS(t).set({state:`offline`,lastChanged:jS(),userName:e})}catch(e){console.error(` Error setting user presence:`,e),console.error(`Error details:`,e.message),e.code===`PERMISSION_DENIED`?(console.error(` PERMISSION_DENIED: Check Firebase Realtime Database rules`),i(`PERMISSION_DENIED`)):(console.error(` Database might not be enabled. Please enable Firebase Realtime Database.`),i(`DATABASE_NOT_ENABLED`))}};a();let o=vS(r,e=>{n(e.val()||{})},e=>{console.error(` Error listening to presence:`,e),console.error(`Error details:`,e.message)}),s=()=>{document.hidden?mS(t,{state:`away`,lastChanged:jS(),userName:e}):a()};return document.addEventListener(`visibilitychange`,s),()=>{document.removeEventListener(`visibilitychange`,s),o(),mS(t,{state:`offline`,lastChanged:jS(),userName:e}).catch(()=>{})}},[e]),{onlineUsers:t,error:r}}var bT=`https://discord.com/api/webhooks/1445441332070846678/9S5_OhdFw_4TDZogFmakPT1J1PlR5dCf7gha2A9-ZByC-JU3ecSPCKkyHBipdFrsWlqE`;const xT=()=>bT,ST=async(e,t)=>{if(xT())try{await fetch(bT,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({username:e,content:t,avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=random`})})}catch(e){console.error(`Failed to send message to Discord:`,e)}},CT=async(e,t)=>{if(xT())try{let n={title:` New Feed Post`,description:t.content||``,color:9647082,author:{name:e,icon_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=random`},timestamp:new Date().toISOString(),fields:[]};t.imageUrl&&(n.image={url:t.imageUrl}),t.videoUrl&&n.fields.push({name:` Video`,value:t.videoUrl}),await fetch(bT,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({embeds:[n]})})}catch(e){console.error(`Failed to send feed post to Discord:`,e)}};function wT(){let[e,t]=(0,l.useState)({}),[n,r]=(0,l.useState)({}),[i,a]=(0,l.useState)(null),[o,s]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let n,i,o,c=!1,l=0;n=setTimeout(()=>{c||(console.warn(`[Discord Presence]  Loading timeout - bot may be offline or connection slow`),s(!1))},1e4);try{let u=dS(FS,`discord/presence`);console.log(`[Discord Presence] Setting up listener for path:`,`discord/presence`),i=vS(u,r=>{if(!c){clearTimeout(n);let i=r.val();console.log(`[Discord Presence] Data received:`,i?`Has data`:`No data`,`Keys:`,i?Object.keys(i).length:0),i===null?(t({}),s(!1),console.log(`[Discord Presence]  No data available`),Object.keys(e).length===0&&a(`No Discord data available - bot may be offline`)):(t(i||{}),s(!1),a(null),console.log(`[Discord Presence]  Connection successful`))}},e=>{if(!c){l++,console.error(`[Discord Presence]  Error (attempt `+l+`):`,e.code,e.message),console.error(`[Discord Presence] Full error:`,e),console.error(`[Discord Presence] Error details:`,{code:e.code,message:e.message,name:e.name,toString:e.toString()});let t=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),r=`Connection error: ${e.code||e.message}`;e.code===`PERMISSION_DENIED`||e.message?.includes(`permission`)?r=`Permission denied. Please check Firebase Realtime Database rules.`:t&&(e.message?.includes(`network`)||e.message?.includes(`quota`))&&(r=`Safari connection issue. Try: Settings  Safari  Privacy  Disable "Prevent Cross-Site Tracking"`),a(r),s(!1),clearTimeout(n)}}),o=vS(dS(FS,`discord/voice-channels`),e=>{c||r(e.val()||{})},e=>{c||console.error(`Discord voice error:`,e)})}catch(e){c||(console.error(`Discord hook error:`,e),a(e.message),s(!1),clearTimeout(n))}return()=>{c=!0,n&&clearTimeout(n),i&&i(),o&&o()}},[]),{discordUsers:e,voiceChannels:n,onlineCount:(()=>Object.values(e).filter(e=>e.status!==`offline`).length)(),voiceUsers:(()=>{let e=[];return Object.entries(n).forEach(([t,n])=>{n.forEach(n=>{e.push({...n,channel:t})})}),e})(),isUserOnlineOnDiscord:t=>e[t]?.status===`online`||e[t]?.status===`idle`||e[t]?.status===`dnd`,isUserPlayingDota:t=>e[t]?.playingDota||!1,getUserAvatar:t=>e[t]?.avatar||null,isLoading:o,error:i}}function TT(){let{discordUsers:e,voiceChannels:t,onlineCount:n,voiceUsers:r,isLoading:i,error:a}=wT(),[o,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1);if(i)return(0,$.jsx)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`div`,{className:`w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`span`,{className:`text-slate-400`,children:`Loading Discord status...`})]})});if(a)return(0,$.jsx)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-red-700/50`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(LC,{className:`w-6 h-6 text-red-400`}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`p`,{className:`text-red-400 font-semibold`,children:`Discord Not Connected`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-sm mb-2`,children:a.includes(`PERMISSION_DENIED`)?`Firebase permission denied - check database rules`:a.includes(`timeout`)?`Connection timeout - bot may be offline`:`Bot offline or not configured`}),(0,$.jsxs)(`details`,{className:`text-xs text-slate-500`,children:[(0,$.jsx)(`summary`,{className:`cursor-pointer hover:text-slate-400`,children:`Technical details`}),(0,$.jsx)(`p`,{className:`mt-2 font-mono bg-slate-900/50 p-2 rounded`,children:a})]})]})]})});let d=Object.entries(e).filter(([,e])=>e.status!==`offline`).sort((e,t)=>e[1].playingDota&&!t[1].playingDota?-1:!e[1].playingDota&&t[1].playingDota?1:0),f=e=>{switch(e){case`online`:return`bg-green-500`;case`idle`:return`bg-yellow-500`;case`dnd`:return`bg-red-500`;default:return`bg-gray-500`}},p=e=>{switch(e){case`online`:return`Online`;case`idle`:return`Idle`;case`dnd`:return`Do Not Disturb`;default:return`Offline`}};return(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-indigo-900/30 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-indigo-700/50`,children:[(0,$.jsxs)(`button`,{onClick:()=>s(!o),className:`w-full flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(LC,{className:`w-6 h-6 text-indigo-400`}),(0,$.jsxs)(`div`,{className:`text-left`,children:[(0,$.jsx)(`h3`,{className:`text-white font-bold text-lg`,children:`Discord Online`}),(0,$.jsxs)(`p`,{className:`text-slate-400 text-sm`,children:[n,` `,n===1?`user`:`users`,` online`]})]})]}),o?(0,$.jsx)(QS,{className:`w-5 h-5 text-slate-400`}):(0,$.jsx)(ZS,{className:`w-5 h-5 text-slate-400`})]}),o&&d.length>0&&(0,$.jsx)(`div`,{className:`mt-4 space-y-2`,children:d.map(([e,t])=>(0,$.jsxs)(`div`,{className:`flex items-center gap-3 p-3 bg-slate-900/50 rounded-lg border border-slate-700/50`,children:[(0,$.jsxs)(`div`,{className:`relative`,children:[t.avatar?(0,$.jsx)(`img`,{src:t.avatar,alt:e,className:`w-10 h-10 rounded-full`}):(0,$.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold`,children:e.charAt(0).toUpperCase()}),(0,$.jsx)(`div`,{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-slate-900 ${f(t.status)}`})]}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`p`,{className:`text-white font-semibold`,children:t.displayName||e}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:p(t.status)}),t.playingDota&&(0,$.jsx)(`span`,{className:`text-xs bg-green-600/20 text-green-400 px-2 py-0.5 rounded-full font-semibold`,children:` Playing Dota 2`})]})]})]},e))}),o&&d.length===0&&(0,$.jsxs)(`div`,{className:`mt-4 text-center py-8`,children:[(0,$.jsx)(LC,{className:`w-12 h-12 text-slate-600 mx-auto mb-2`}),(0,$.jsx)(`p`,{className:`text-slate-400`,children:`No one online on Discord`})]})]}),Object.keys(t).length>0&&(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-purple-900/30 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-700/50`,children:[(0,$.jsxs)(`button`,{onClick:()=>u(!c),className:`w-full flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(gC,{className:`w-6 h-6 text-purple-400`}),(0,$.jsxs)(`div`,{className:`text-left`,children:[(0,$.jsx)(`h3`,{className:`text-white font-bold text-lg`,children:`Voice Channels`}),(0,$.jsxs)(`p`,{className:`text-slate-400 text-sm`,children:[r.length,` `,r.length===1?`user`:`users`,` in voice`]})]})]}),c?(0,$.jsx)(QS,{className:`w-5 h-5 text-slate-400`}):(0,$.jsx)(ZS,{className:`w-5 h-5 text-slate-400`})]}),c&&(0,$.jsx)(`div`,{className:`mt-4 space-y-3`,children:Object.entries(t).map(([e,t])=>(0,$.jsxs)(`div`,{className:`bg-slate-900/50 rounded-lg p-3 border border-slate-700/50`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[(0,$.jsx)(gC,{className:`w-4 h-4 text-purple-400`}),(0,$.jsx)(`h4`,{className:`text-white font-semibold text-sm`,children:e}),(0,$.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[`(`,t.length,`)`]})]}),(0,$.jsx)(`div`,{className:`space-y-2 ml-6`,children:t.map(e=>(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-sm`,children:[(0,$.jsxs)(`span`,{className:`text-slate-300`,children:[` `,e.nickname||e.username]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[e.streaming&&(0,$.jsxs)(`a`,{href:`https://discord.com/channels/${e.guildId||``}/${e.channelId||``}`,target:`_blank`,rel:`noopener noreferrer`,className:`flex items-center gap-1 px-1.5 py-0.5 bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded-full text-xs font-semibold transition-colors cursor-pointer`,title:`Click to watch in Discord`,children:[(0,$.jsx)(_C,{className:`w-3 h-3`}),(0,$.jsx)(`span`,{children:`Live - Watch`})]}),e.selfVideo&&(0,$.jsx)(`div`,{className:`flex items-center gap-1 px-1.5 py-0.5 bg-blue-600/20 text-blue-400 rounded-full text-xs`,title:`Camera on`,children:(0,$.jsx)(RC,{className:`w-3 h-3`})}),e.selfMute&&(0,$.jsx)(hC,{className:`w-3 h-3 text-slate-500`,title:`Muted`}),e.selfDeaf&&(0,$.jsx)(zC,{className:`w-3 h-3 text-slate-500`,title:`Deafened`})]})]},e.id))})]},e))})]})]})}var ET=`/firebase-messaging-sw.js`,DT=`/firebase-cloud-messaging-push-scope`,OT=`BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4`,kT=`https://fcmregistrations.googleapis.com/v1`,AT=`google.c.a.c_id`,jT=`google.c.a.c_l`,MT=`google.c.a.ts`,NT=`google.c.a.e`,PT=1e4,FT;(function(e){e[e.DATA_MESSAGE=1]=`DATA_MESSAGE`,e[e.DISPLAY_NOTIFICATION=3]=`DISPLAY_NOTIFICATION`})(FT||={});var IT;(function(e){e.PUSH_RECEIVED=`push-received`,e.NOTIFICATION_CLICKED=`notification-clicked`})(IT||={});function LT(e){let t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,``).replace(/\+/g,`-`).replace(/\//g,`_`)}function RT(e){let t=(e+`=`.repeat((4-e.length%4)%4)).replace(/\-/g,`+`).replace(/_/g,`/`),n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r}var zT=`fcm_token_details_db`,BT=5,VT=`fcm_token_object_Store`;async function HT(e){if(`databases`in indexedDB&&!(await indexedDB.databases()).map(e=>e.name).includes(zT))return null;let t=null;return(await Dt(zT,BT,{upgrade:async(n,r,i,a)=>{if(r<2||!n.objectStoreNames.contains(VT))return;let o=a.objectStore(VT),s=await o.index(`fcmSenderId`).get(e);if(await o.clear(),s){if(r===2){let e=s;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:e.createTime??Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:typeof e.vapidKey==`string`?e.vapidKey:LT(e.vapidKey)}}}else if(r===3){let e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:LT(e.auth),p256dh:LT(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:LT(e.vapidKey)}}}else if(r===4){let e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:LT(e.auth),p256dh:LT(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:LT(e.vapidKey)}}}}}})).close(),await Ot(zT),await Ot(`fcm_vapid_details_db`),await Ot(`undefined`),UT(t)?t:null}function UT(e){if(!e||!e.subscriptionOptions)return!1;let{subscriptionOptions:t}=e;return typeof e.createTime==`number`&&e.createTime>0&&typeof e.token==`string`&&e.token.length>0&&typeof t.auth==`string`&&t.auth.length>0&&typeof t.p256dh==`string`&&t.p256dh.length>0&&typeof t.endpoint==`string`&&t.endpoint.length>0&&typeof t.swScope==`string`&&t.swScope.length>0&&typeof t.vapidKey==`string`&&t.vapidKey.length>0}var WT=`firebase-messaging-database`,GT=1,KT=`firebase-messaging-store`,qT=null;function JT(){return qT||=Dt(WT,GT,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(KT)}}}),qT}async function YT(e){let t=ZT(e),n=await(await JT()).transaction(KT).objectStore(KT).get(t);if(n)return n;{let t=await HT(e.appConfig.senderId);if(t)return await XT(e,t),t}}async function XT(e,t){let n=ZT(e),r=(await JT()).transaction(KT,`readwrite`);return await r.objectStore(KT).put(t,n),await r.done,t}function ZT({appConfig:e}){return e.appId}var QT=new Ee(`messaging`,`Messaging`,{"missing-app-config-values":`Missing App configuration value: "{$valueName}"`,"only-available-in-window":`This method is available in a Window context.`,"only-available-in-sw":`This method is available in a service worker context.`,"permission-default":`The notification permission was not granted and dismissed instead.`,"permission-blocked":`The notification permission was not granted and blocked instead.`,"unsupported-browser":`This browser doesn't support the API's required to use the Firebase SDK.`,"indexed-db-unsupported":`This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)`,"failed-service-worker-registration":`We are unable to register the default service worker. {$browserErrorMessage}`,"token-subscribe-failed":`A problem occurred while subscribing the user to FCM: {$errorInfo}`,"token-subscribe-no-token":`FCM returned no token when subscribing the user to push.`,"token-unsubscribe-failed":`A problem occurred while unsubscribing the user from FCM: {$errorInfo}`,"token-update-failed":`A problem occurred while updating the user from FCM: {$errorInfo}`,"token-update-no-token":`FCM returned no token when updating the user to push.`,"use-sw-after-get-token":`The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.`,"invalid-sw-registration":`The input to useServiceWorker() must be a ServiceWorkerRegistration.`,"invalid-bg-handler":`The input to setBackgroundMessageHandler() must be a function.`,"invalid-vapid-key":`The public VAPID key must be a string.`,"use-vapid-key-after-get-token":`The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.`});async function $T(e,t){let n=await rE(e),r=iE(t),i={method:`POST`,headers:n,body:JSON.stringify(r)},a;try{a=await(await fetch(nE(e.appConfig),i)).json()}catch(e){throw QT.create(`token-subscribe-failed`,{errorInfo:e?.toString()})}if(a.error){let e=a.error.message;throw QT.create(`token-subscribe-failed`,{errorInfo:e})}if(!a.token)throw QT.create(`token-subscribe-no-token`);return a.token}async function eE(e,t){let n=await rE(e),r=iE(t.subscriptionOptions),i={method:`PATCH`,headers:n,body:JSON.stringify(r)},a;try{a=await(await fetch(`${nE(e.appConfig)}/${t.token}`,i)).json()}catch(e){throw QT.create(`token-update-failed`,{errorInfo:e?.toString()})}if(a.error){let e=a.error.message;throw QT.create(`token-update-failed`,{errorInfo:e})}if(!a.token)throw QT.create(`token-update-no-token`);return a.token}async function tE(e,t){let n={method:`DELETE`,headers:await rE(e)};try{let r=await(await fetch(`${nE(e.appConfig)}/${t}`,n)).json();if(r.error){let e=r.error.message;throw QT.create(`token-unsubscribe-failed`,{errorInfo:e})}}catch(e){throw QT.create(`token-unsubscribe-failed`,{errorInfo:e?.toString()})}}function nE({projectId:e}){return`${kT}/projects/${e}/registrations`}async function rE({appConfig:e,installations:t}){let n=await t.getToken();return new Headers({"Content-Type":`application/json`,Accept:`application/json`,"x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function iE({p256dh:e,auth:t,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:t,p256dh:e}};return r!==OT&&(i.web.applicationPubKey=r),i}var aE=10080*60*1e3;async function oE(e){let t=await lE(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:LT(t.getKey(`auth`)),p256dh:LT(t.getKey(`p256dh`))},r=await YT(e.firebaseDependencies);if(r){if(uE(r.subscriptionOptions,n))return Date.now()>=r.createTime+aE?sE(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await tE(e.firebaseDependencies,r.token)}catch(e){console.warn(e)}return cE(e.firebaseDependencies,n)}else return cE(e.firebaseDependencies,n)}async function sE(e,t){try{let n=await eE(e.firebaseDependencies,t),r={...t,token:n,createTime:Date.now()};return await XT(e.firebaseDependencies,r),n}catch(e){throw e}}async function cE(e,t){let n={token:await $T(e,t),createTime:Date.now(),subscriptionOptions:t};return await XT(e,n),n.token}async function lE(e,t){return await e.pushManager.getSubscription()||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:RT(t)})}function uE(e,t){let n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&r&&i&&a}function dE(e){let t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return fE(t,e),pE(t,e),mE(t,e),t}function fE(e,t){if(!t.notification)return;e.notification={};let n=t.notification.title;n&&(e.notification.title=n);let r=t.notification.body;r&&(e.notification.body=r);let i=t.notification.image;i&&(e.notification.image=i);let a=t.notification.icon;a&&(e.notification.icon=a)}function pE(e,t){t.data&&(e.data=t.data)}function mE(e,t){if(!t.fcmOptions&&!t.notification?.click_action)return;e.fcmOptions={};let n=t.fcmOptions?.link??t.notification?.click_action;n&&(e.fcmOptions.link=n);let r=t.fcmOptions?.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}function hE(e){return typeof e==`object`&&!!e&&AT in e}gE(`AzSCbw63g1R0nCw85jG8`,`Iaya3yLKwmgvh7cF0q4`);function gE(e,t){let n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join(``)}function _E(e){if(!e||!e.options)throw vE(`App Configuration Object`);if(!e.name)throw vE(`App Name`);let t=[`projectId`,`apiKey`,`appId`,`messagingSenderId`],{options:n}=e;for(let e of t)if(!n[e])throw vE(e);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function vE(e){return QT.create(`missing-app-config-values`,{valueName:e})}var yE=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1,this.firebaseDependencies={app:e,appConfig:_E(e),installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};async function bE(e){try{e.swRegistration=await navigator.serviceWorker.register(ET,{scope:DT}),e.swRegistration.update().catch(()=>{}),await xE(e.swRegistration)}catch(e){throw QT.create(`failed-service-worker-registration`,{browserErrorMessage:e?.message})}}async function xE(e){return new Promise((t,n)=>{let r=setTimeout(()=>n(Error(`Service worker not registered after ${PT} ms`)),PT),i=e.installing||e.waiting;e.active?(clearTimeout(r),t()):i?i.onstatechange=e=>{e.target?.state===`activated`&&(i.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(Error(`No incoming service worker found.`)))})}async function SE(e,t){if(!t&&!e.swRegistration&&await bE(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw QT.create(`invalid-sw-registration`);e.swRegistration=t}}async function CE(e,t){t?e.vapidKey=t:e.vapidKey||=OT}async function wE(e,t){if(!navigator)throw QT.create(`only-available-in-window`);if(Notification.permission===`default`&&await Notification.requestPermission(),Notification.permission!==`granted`)throw QT.create(`permission-blocked`);return await CE(e,t?.vapidKey),await SE(e,t?.serviceWorkerRegistration),oE(e)}async function TE(e,t,n){let r=EE(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[AT],message_name:n[jT],message_time:n[MT],message_device_time:Math.floor(Date.now()/1e3)})}function EE(e){switch(e){case IT.NOTIFICATION_CLICKED:return`notification_open`;case IT.PUSH_RECEIVED:return`notification_foreground`;default:throw Error()}}async function DE(e,t){let n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===IT.PUSH_RECEIVED&&(typeof e.onMessageHandler==`function`?e.onMessageHandler(dE(n)):e.onMessageHandler.next(dE(n)));let r=n.data;hE(r)&&r[NT]===`1`&&await TE(e,n.messageType,r)}var OE=`@firebase/messaging`,kE=`0.12.23`,AE=e=>{let t=new yE(e.getProvider(`app`).getImmediate(),e.getProvider(`installations-internal`).getImmediate(),e.getProvider(`analytics-internal`));return navigator.serviceWorker.addEventListener(`message`,e=>DE(t,e)),t},jE=e=>{let t=e.getProvider(`messaging`).getImmediate();return{getToken:e=>wE(t,e)}};function ME(){_n(new Ze(`messaging`,AE,`PUBLIC`)),_n(new Ze(`messaging-internal`,jE,`PRIVATE`)),Tn(OE,kE),Tn(OE,kE,`esm2020`)}async function NE(){try{await Se()}catch{return!1}return typeof window<`u`&&xe()&&Ce()&&`serviceWorker`in navigator&&`PushManager`in window&&`Notification`in window&&`fetch`in window&&ServiceWorkerRegistration.prototype.hasOwnProperty(`showNotification`)&&PushSubscription.prototype.hasOwnProperty(`getKey`)}function PE(e,t){if(!navigator)throw QT.create(`only-available-in-window`);return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}function FE(e=wn()){return NE().then(e=>{if(!e)throw QT.create(`unsupported-browser`)},e=>{throw QT.create(`indexed-db-unsupported`)}),vn(Xe(e),`messaging`).getImmediate()}async function IE(e,t){return e=Xe(e),wE(e,t)}function LE(e,t){return e=Xe(e),PE(e,t)}ME();var RE=null;try{RE=FE(NS),console.log(`[FCM] Firebase Messaging initialized`)}catch(e){console.warn(`[FCM] Failed to initialize Firebase Messaging:`,e.message)}var zE=`BFsCDJy4n3a-iaPXID4vmQElEAWnLMvvz-TXvokwVG3ntsSZhTmcnDK--Lbsm_sxzUYk9PGyNGudnjHXniZFG-c`;const BE=async()=>{try{if(!(`Notification`in window))return console.warn(`[FCM] This browser does not support notifications`),!1;if(!RE)return console.warn(`[FCM] Messaging not initialized`),!1;if(Notification.permission===`granted`)return console.log(`[FCM] Notification permission already granted`),!0;if(Notification.permission===`denied`)return console.warn(`[FCM] Notification permission denied by user`),!1;if(await Notification.requestPermission()===`granted`){console.log(`[FCM] Notification permission granted`);let e=await IE(RE,{vapidKey:zE});return e?(console.log(`[FCM] Token obtained:`,e),localStorage.setItem(`fcm_token`,e),!0):(console.warn(`[FCM] No token received`),!1)}else return console.warn(`[FCM] Notification permission denied`),!1}catch(e){return console.error(`[FCM] Error requesting notification permission:`,e),!1}},VE=()=>`Notification`in window&&Notification.permission===`granted`&&!!RE&&!0,HE=e=>{if(RE)try{LE(RE,t=>{console.log(`[FCM] Foreground message received:`,t);let{notification:n,data:r}=t;if(n){let e=n.title||`New Notification`,t={body:n.body||``,icon:n.icon||`/icon.png`,badge:`/icon.png`,tag:r?.type||`general`,data:r||{}};`serviceWorker`in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(n=>{n.showNotification(e,t)}):new Notification(e,t)}e&&typeof e==`function`&&e(t)}),console.log(`[FCM] Foreground message listener set up`)}catch(e){console.error(`[FCM] Error setting up foreground message listener:`,e)}},UE=(e,t,n={})=>{if(!VE()){console.warn(`[FCM] Notifications not enabled`);return}let r={body:t,icon:`/icon.png`,badge:`/icon.png`,tag:n.type||`local`,data:n};`serviceWorker`in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(t=>{t.showNotification(e,r)}):new Notification(e,r)};function WE({userName:e,setShowNameModal:t}){let[n,r]=(0,l.useState)([]),[i,a]=(0,l.useState)(``),[o,s]=(0,l.useState)(!0),[c,u]=(0,l.useState)(!1),[d,f]=(0,l.useState)(!1),p=(0,l.useRef)(null),{onlineUsers:m,error:h}=yT(e),g=()=>{p.current?.scrollIntoView({behavior:`smooth`})},_=async()=>{try{let e=new Date;e.setDate(e.getDate()-7);let t=(await Om(cm(yp(PS,`chat-messages`),um(`timestamp`,`<`,e)))).docs.map(e=>jm(bp(PS,`chat-messages`,e.id)));await Promise.all(t)}catch(e){console.error(`Error cleaning up old messages:`,e)}};(0,l.useEffect)(()=>{HE(e=>{console.log(`[Chat] Received notification:`,e),e.data?.type===`chat`&&console.log(`[Chat] New chat message notification`)})},[]),(0,l.useEffect)(()=>{let t=cm(yp(PS,`chat-messages`),pm(`timestamp`,`desc`),hm(50)),n=0,i=Nm(t,t=>{let i=t.docs.map(e=>({id:e.id,...e.data()})).reverse();if(n>0&&i.length>n){let t=i[i.length-1];if(t.userName!==e&&VE()){let e=t.message?t.message.substring(0,50)+(t.message.length>50?`...`:``):`Sent a message`;UE(`${t.userName} sent a message`,e,{type:`chat`,messageId:t.id})}}n=i.length,r(i),s(!1),setTimeout(g,100)},e=>{console.error(`Error loading messages:`,e),s(!1)});return _(),()=>i()},[e]);let v=async n=>{if(n.preventDefault(),!e){t(!0);return}if(i.trim()){u(!0);try{let t=i.trim();await Mm(yp(PS,`chat-messages`),{text:t,userName:e,timestamp:Im(),source:`app`}),ST(e,t).catch(e=>console.warn(`Discord sync failed:`,e)),a(``),setTimeout(g,100)}catch(e){console.error(`Error sending message:`,e),alert(`   .   .`)}finally{u(!1)}}},y=async(t,n)=>{if(n!==e){alert(`     !`);return}if(confirm(`   ?`))try{await jm(bp(PS,`chat-messages`,t))}catch(e){console.error(`Error deleting message:`,e),alert(`   .`)}},b=e=>{if(!e)return``;let t=e.toDate();return(new Date-t)/(1e3*60*60)<24?t.toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`}):t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`})},x=()=>Object.values(m).filter(e=>e.state===`online`||e.state===`away`).length,S=()=>Object.entries(m).filter(([,e])=>e.state===`online`||e.state===`away`).map(([e,t])=>({name:e,...t})),C=e=>e?e.gameStatus===`in-game`?{icon:`gamepad`,color:`text-red-500`,label:`In Game`}:e.gameStatus===`in-lobby`?{icon:`home`,color:`text-yellow-500`,label:`In Lobby`}:e.state===`online`?{icon:`online`,color:`bg-green-500`,label:`Online`}:e.state===`away`?{icon:`away`,color:`bg-yellow-500`,label:`Away`}:{icon:`offline`,color:`bg-slate-500`,label:`Offline`}:{icon:`offline`,color:`bg-slate-500`,label:`Offline`},w=({status:e,className:t=``})=>e.icon===`gamepad`?(0,$.jsx)(oC,{className:`${e.color} ${t}`}):e.icon===`home`?(0,$.jsx)(lC,{className:`${e.color} ${t}`}):(0,$.jsx)(`div`,{className:`rounded-full ${e.color} ${t}`});return(0,$.jsxs)(`div`,{className:`space-y-4 px-2 sm:px-0 h-full flex flex-col`,children:[(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50 shrink-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(mC,{className:`w-6 h-6 text-green-400`}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{className:`text-xl font-bold text-white`,children:`Permum Chat`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-sm`,children:`Dota 2 toxic community`})]})]}),(0,$.jsxs)(`button`,{onClick:()=>f(!d),className:`flex items-center gap-2 text-sm px-3 py-2 rounded-lg hover:bg-slate-700/50 transition-colors cursor-pointer`,title:`View online users`,children:[(0,$.jsx)(LC,{className:`w-4 h-4 text-cyan-400`}),(0,$.jsxs)(`span`,{className:`text-cyan-400 font-semibold`,children:[x(),` online`]})]})]}),d&&(0,$.jsxs)(`div`,{className:`mt-4 p-3 bg-slate-900/70 rounded-lg border border-slate-700/50`,children:[(0,$.jsxs)(`h3`,{className:`text-sm font-semibold text-white mb-3 flex items-center gap-2`,children:[(0,$.jsx)(LC,{className:`w-4 h-4 text-cyan-400`}),`Online Users (`,x(),`)`]}),(0,$.jsx)(`div`,{className:`space-y-2 max-h-60 overflow-y-auto`,children:S().length>0?S().map(e=>{let t=C(e);return(0,$.jsxs)(`div`,{className:`flex items-center justify-between p-2 bg-slate-800/50 rounded-lg`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(w,{status:t,className:`w-3 h-3`}),(0,$.jsx)(`span`,{className:`text-white text-sm font-medium`,children:e.name})]}),(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:t.label})]},e.name)}):(0,$.jsx)(`p`,{className:`text-slate-400 text-sm text-center py-2`,children:`No users online`})})]})]}),(0,$.jsx)(TT,{}),h&&(0,$.jsxs)(`div`,{className:`bg-yellow-900/50 border-2 border-yellow-600/50 rounded-xl p-4 flex items-start gap-3`,children:[(0,$.jsx)($S,{className:`w-5 h-5 text-yellow-400 shrink-0 mt-0.5`}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`h3`,{className:`text-yellow-400 font-semibold text-sm mb-1`,children:`Real-Time Presence Not Enabled`}),(0,$.jsx)(`p`,{className:`text-yellow-200/90 text-sm mb-3`,children:h===`PERMISSION_DENIED`?`Firebase Realtime Database permissions need to be configured.`:`Firebase Realtime Database needs to be enabled to show online status.`}),(0,$.jsxs)(`div`,{className:`space-y-2 text-xs text-yellow-200/80`,children:[(0,$.jsx)(`p`,{className:`font-semibold`,children:`Quick Fix (2 minutes):`}),(0,$.jsxs)(`ol`,{className:`list-decimal list-inside space-y-1 ml-2`,children:[(0,$.jsx)(`li`,{children:`Go to Firebase Console  Realtime Database`}),(0,$.jsx)(`li`,{children:`Click "Create Database"`}),(0,$.jsx)(`li`,{children:`Choose "Start in test mode"`}),(0,$.jsx)(`li`,{children:`Click "Enable"`}),(0,$.jsx)(`li`,{children:`Refresh this page`})]}),(0,$.jsxs)(`a`,{href:`https://console.firebase.google.com/`,target:`_blank`,rel:`noopener noreferrer`,className:`inline-flex items-center gap-1 text-yellow-400 hover:text-yellow-300 font-medium mt-2`,children:[`Open Firebase Console`,(0,$.jsx)(nC,{className:`w-3 h-3`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl border-2 border-slate-700/50 flex flex-col flex-1 min-h-0 max-h-[640px]`,children:[(0,$.jsx)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-3`,children:o?(0,$.jsx)(`div`,{className:`flex items-center justify-center h-full`,children:(0,$.jsxs)(`div`,{className:`text-center`,children:[(0,$.jsx)(`div`,{className:`inline-block w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`p`,{className:`text-slate-400 mt-4`,children:`  ...`})]})}):n.length===0?(0,$.jsx)(`div`,{className:`flex items-center justify-center h-full`,children:(0,$.jsxs)(`div`,{className:`text-center`,children:[(0,$.jsx)(mC,{className:`w-16 h-16 text-slate-600 mx-auto mb-4`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-lg`,children:`  `}),(0,$.jsx)(`p`,{className:`text-slate-500 text-sm mt-2`,children:`     !`})]})}):(0,$.jsxs)($.Fragment,{children:[n.map(t=>{let n=t.userName===e,r=m[t.userName],i=C(r);return(0,$.jsx)(`div`,{className:`flex ${n?`justify-end`:`justify-start`}`,children:(0,$.jsxs)(`div`,{className:`max-w-[75%] sm:max-w-[60%] rounded-lg p-3 ${n?`bg-green-600/20 border border-green-600/30`:`bg-slate-700/50 border border-slate-600/30`}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2 mb-1`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,$.jsx)(w,{status:i,className:`w-2.5 h-2.5`,title:i.label}),(0,$.jsx)(`span`,{className:`text-xs font-semibold ${n?`text-green-400`:`text-cyan-400`}`,children:t.userName})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-500`,children:b(t.timestamp)}),n&&(0,$.jsx)(`button`,{onClick:()=>y(t.id,t.userName),className:`text-red-400 hover:text-red-300 transition-colors`,title:` `,children:(0,$.jsx)(NC,{className:`w-3 h-3`})})]})]}),(0,$.jsx)(`p`,{className:`text-white text-sm wrap-break-word`,children:t.text})]})},t.id)}),(0,$.jsx)(`div`,{ref:p})]})}),(0,$.jsxs)(`div`,{className:`border-t border-slate-700/50 p-4`,children:[(0,$.jsxs)(`form`,{onSubmit:v,className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:i,onChange:e=>a(e.target.value),placeholder:e?`Write letters...`:`    ...`,disabled:!e||c,className:`flex-1 px-4 py-3 bg-slate-900/50 text-white rounded-lg border-2 border-slate-700 focus:border-green-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,maxLength:500}),(0,$.jsx)(`button`,{type:`submit`,disabled:!e||!i.trim()||c,className:`px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2`,children:c?(0,$.jsx)(`div`,{className:`w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin`}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(TC,{className:`w-5 h-5`}),(0,$.jsx)(`span`,{className:`hidden sm:inline`,children:`Send`})]})})]}),(0,$.jsxs)(`p`,{className:`text-xs text-slate-500 mt-2`,children:[i.length,`/500     7    `]})]})]})]})}function GE(){let[e,t]=(0,l.useState)({captain1:``,captain2:``,team1:[],team2:[],availablePlayers:[],draftOrder:[]}),[n,r]=(0,l.useState)(!0),[i,a]=(0,l.useState)(``),[o,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[d,f]=(0,l.useState)(localStorage.getItem(`userName`)||``),[p,m]=(0,l.useState)(!1),[h,g]=(0,l.useState)({}),[_,v]=(0,l.useState)(!0),y=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=bp(PS,`app-data`,`draft`),n=Nm(e,n=>{if(n.exists())t(n.data());else{let n={captain1:``,captain2:``,team1:[],team2:[],availablePlayers:[],draftOrder:[]};km(e,n),t(n)}r(!1)},e=>{console.error(`Error loading draft:`,e),r(!1)});return()=>n()},[]),(0,l.useEffect)(()=>{let e=Nm(bp(PS,`app-data`,`players`),e=>{e.exists()?g(e.data().list||{}):g({}),v(!1)},e=>{console.error(`Error loading registered players:`,e),v(!1)});return()=>e()},[]);let b=async e=>{try{await Am(bp(PS,`app-data`,`draft`),e)}catch(e){console.error(`Error updating draft:`,e)}},x=()=>{i.trim()&&(b({availablePlayers:[...e.availablePlayers,i.trim()]}),a(``),s(!1))},S=(t,n)=>{let r={...e},i=r.draftOrder?.find(e=>e.playerName===t);if(console.log(`aaaaa`,t),r.availablePlayers=r.availablePlayers.filter(e=>e!==t),r.team1=r.team1.filter(e=>e!==t),r.team2=r.team2.filter(e=>e!==t),n===`team1`&&r.team1.length<4)if(r.team1.push(t),i)r.draftOrder=r.draftOrder.map(e=>e.playerName===t?{...e,team:`team1`}:e);else{let e=(r.draftOrder?.length||0)+1;r.draftOrder=[...r.draftOrder||[],{playerName:t,team:`team1`,pickNumber:e}]}else if(n===`team2`&&r.team2.length<4)if(r.team2.push(t),i)r.draftOrder=r.draftOrder.map(e=>e.playerName===t?{...e,team:`team2`}:e);else{let e=(r.draftOrder?.length||0)+1;r.draftOrder=[...r.draftOrder||[],{playerName:t,team:`team2`,pickNumber:e}]}else r.availablePlayers.push(t),r.draftOrder=(r.draftOrder||[]).filter(e=>e.playerName!==t);b(r)},C=(t,n)=>{let r={...e};n===1?(!t&&e.captain1&&(r.team1.length<4?r.team1.push(e.captain1):r.availablePlayers.push(e.captain1)),r.team1=r.team1.filter(e=>e!==t),r.captain1=t):(!t&&e.captain2&&(r.team2.length<4?r.team2.push(e.captain2):r.availablePlayers.push(e.captain2)),r.team2=r.team2.filter(e=>e!==t),r.captain2=t),b(r)},w=t=>{b({availablePlayers:e.availablePlayers.filter(e=>e!==t)})},ee=()=>{b({captain1:``,captain2:``,team1:[],team2:[],availablePlayers:e.availablePlayers,draftOrder:[]})},te=t=>e.draftOrder?.find(e=>e.playerName===t)?.pickNumber;return(0,$.jsxs)(`div`,{className:`space-y-6 px-2 sm:px-0 relative`,children:[(0,$.jsx)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(AC,{className:`w-6 h-6 text-purple-400`}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{className:`text-xl font-bold text-white`,children:`Captain's Draft`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-sm`,children:`Pick captains and draft your teams`})]})]}),(0,$.jsxs)(`button`,{onClick:async()=>{if(y.current)try{await vT(y.current);let e=await vT(y.current,{quality:1,pixelRatio:2,backgroundColor:`#0f172a`,cacheBust:!0,skipFonts:!1}),t=document.createElement(`a`);t.download=`dota2-draft-${new Date().toISOString().split(`T`)[0]}.png`,t.href=e,t.click()}catch(e){console.error(`Error downloading draft:`,e),alert(`Failed to download draft image. Please try again.`)}},className:`flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm font-medium`,title:`Download draft as image`,children:[(0,$.jsx)(tC,{className:`w-4 h-4`}),(0,$.jsx)(`span`,{className:`hidden sm:inline`,children:`Download`})]})]})}),n?(0,$.jsxs)(`div`,{className:`text-center py-12`,children:[(0,$.jsx)(`div`,{className:`inline-block w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`p`,{className:`text-slate-400 mt-4`,children:`Loading draft...`})]}):(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(`div`,{ref:y,className:`grid grid-cols-1 lg:grid-cols-3 gap-4 backdrop-blur-sm `,children:[(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-green-900/40 to-slate-900/60 rounded-xl p-4 border-2 border-green-500/30`,children:[(0,$.jsxs)(`div`,{className:`mb-3`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-bold text-green-400`,children:`Radiant`}),(0,$.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[(e.captain1?1:0)+e.team1.length,`/5`]})]}),(0,$.jsxs)(`div`,{className:`text-xs text-green-300 font-medium mt-1`,children:[`Total MMR: `,(()=>{let t=0;if(e.captain1){let n=h[e.captain1];if(n?.mmr){let e=typeof n.mmr==`number`?n.mmr:parseInt(n.mmr,10);!isNaN(e)&&e>0&&(t+=e)}}return e.team1.forEach(e=>{let n=h[e];if(n?.mmr){let e=typeof n.mmr==`number`?n.mmr:parseInt(n.mmr,10);!isNaN(e)&&e>0&&(t+=e)}}),t.toLocaleString()})()]})]}),(0,$.jsxs)(`div`,{className:`mb-3`,children:[(0,$.jsxs)(`label`,{className:`text-xs text-green-400/70 uppercase font-bold mb-1 flex items-center gap-2`,children:[(0,$.jsx)(WS,{className:`w-3 h-3`}),`Captain`]}),e.captain1?(0,$.jsxs)(`div`,{className:`h-10 bg-slate-900/50 rounded border border-green-500/30 flex items-center px-3 justify-between group`,children:[(0,$.jsx)(`span`,{className:`text-white font-medium text-sm`,children:e.captain1}),(0,$.jsx)(`button`,{onClick:()=>C(``,1),className:`opacity-0 group-hover:opacity-100 p-1 hover:bg-slate-700 rounded text-xs text-red-400 transition-opacity`,title:`Remove captain`,children:(0,$.jsx)(KE,{className:`w-3 h-3`})})]}):(0,$.jsx)(`div`,{className:`text-xs text-slate-400 p-2 bg-slate-900/30 rounded border border-green-500/20`,children:`Select a captain from drafted players below`})]}),(0,$.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,]].map((t,n)=>{let r=e.team1[n],i=r?te(r):null,a=r?h[r]:null;return(0,$.jsx)(`div`,{className:`min-h-10 bg-slate-900/40 rounded border border-green-500/20 flex items-center px-3 py-2`,children:r?(0,$.jsxs)(`div`,{className:`flex items-center justify-between w-full group`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col flex-1 min-w-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-white font-medium text-sm`,children:r}),i&&(0,$.jsxs)(`span`,{className:`text-green-400/60 text-xs font-semibold`,children:[`#`,i]}),e.captain1===r&&(0,$.jsx)(WS,{className:`w-3 h-3 text-yellow-400`,title:`Captain`})]}),a&&(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-[10px] text-slate-400 mt-0.5`,children:[a.mmr&&(0,$.jsxs)(`span`,{className:`text-green-300`,children:[typeof a.mmr==`number`?a.mmr.toLocaleString():parseInt(a.mmr,10).toLocaleString(),` MMR`]}),a.role&&(0,$.jsxs)(`span`,{children:[` `,a.role.charAt(0).toUpperCase()+a.role.slice(1)]})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[e.captain1!==r&&(0,$.jsx)(`button`,{onClick:()=>C(r,1),className:`p-1 hover:bg-green-700 rounded text-xs text-yellow-400`,title:`Make captain`,children:(0,$.jsx)(WS,{className:`w-3 h-3`})}),(0,$.jsx)(`button`,{onClick:()=>S(r,`team2`),className:`p-1 hover:bg-slate-700 rounded text-xs text-slate-300`,title:`Move to Dire`,children:``}),(0,$.jsx)(`button`,{onClick:()=>S(r,`available`),className:`p-1 hover:bg-slate-700 rounded text-xs text-red-400`,children:(0,$.jsx)(KE,{className:`w-3 h-3`})})]})]}):(0,$.jsxs)(`p`,{className:`text-slate-500 text-xs`,children:[`Slot `,n+1]})},n)})})]}),(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,$.jsxs)(`h3`,{className:`text-base font-bold text-white flex items-center gap-2`,children:[(0,$.jsx)(LC,{className:`w-4 h-4 text-cyan-400`}),(0,$.jsxs)(`span`,{children:[`All Players `,(0,$.jsxs)(`span`,{className:`text-purple-400`,children:[`(`,e.team1.length+e.team2.length,` drafted / `,Object.keys(h).length+e.availablePlayers.filter(e=>!h[e]).length,` total)`]})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>s(!o),className:`flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded text-xs font-medium transition-colors`,children:[(0,$.jsx)(FC,{className:`w-3 h-3`}),`Add`]}),(0,$.jsxs)(`button`,{onClick:ee,className:`flex items-center gap-1.5 px-2.5 py-1.5 bg-slate-700 hover:bg-slate-600 text-white rounded text-xs font-medium transition-colors`,children:[(0,$.jsx)(CC,{className:`w-3 h-3`}),`Reset`]})]})]}),o&&(0,$.jsx)(`div`,{className:`mb-3 p-2 bg-slate-900/50 rounded border border-slate-700`,children:(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Player Name`,value:i,onChange:e=>a(e.target.value),onKeyDown:e=>e.key===`Enter`&&x(),className:`flex-1 p-1.5 bg-slate-800 text-white rounded border border-slate-600 focus:border-purple-500 focus:outline-none text-xs`,autoFocus:!0}),(0,$.jsx)(`button`,{onClick:x,className:`px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded font-medium text-xs`,children:`Add`})]})}),_?(0,$.jsxs)(`div`,{className:`text-center py-8`,children:[(0,$.jsx)(`div`,{className:`inline-block w-6 h-6 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`p`,{className:`text-slate-400 mt-2 text-xs`,children:`Loading...`})]}):(0,$.jsxs)(`div`,{className:`max-h-[500px] overflow-y-auto space-y-2 pr-1`,children:[Object.entries(h).sort((e,t)=>(t[1].mmr||0)-(e[1].mmr||0)).map(([t,n])=>{let r=e=>{if(!e)return`Unranked`;if(typeof e==`string`)return e.charAt(0).toUpperCase()+e.slice(1);let t=[`Herald`,`Guardian`,`Crusader`,`Archon`,`Legend`,`Ancient`,`Divine`,`Immortal`],n=Math.floor(e/10),r=e%10;return n===8?`Immortal ${r>0?`#${r}`:``}`:`${t[n-1]} ${r}`},i=e.team1.includes(t),a=e.team2.includes(t),o=e.captain1===t,s=e.captain2===t,c=i||a||o||s,l=c?te(t):null;return(0,$.jsx)(`div`,{className:`p-2 rounded border transition-all ${c?`bg-slate-900/20 border-slate-700/30 opacity-50`:`bg-slate-900/60 border-slate-700/50 hover:border-cyan-500/50`}`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[n.avatar?(0,$.jsx)(`img`,{src:n.avatar,alt:t,className:`w-8 h-8 rounded-full border border-cyan-600/50`}):(0,$.jsx)(`div`,{className:`w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold text-xs`,children:t.charAt(0).toUpperCase()}),(0,$.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,$.jsx)(`span`,{className:`text-white font-medium text-xs truncate`,children:t}),c&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`span`,{className:`text-[10px] px-1 py-0.5 bg-purple-600/20 text-purple-400 border border-purple-600/40 rounded`,children:i||o?`R`:`D`}),(o||s)&&(0,$.jsx)(WS,{className:`w-3 h-3 text-yellow-400`,title:`Captain`}),l&&(0,$.jsxs)(`span`,{className:`text-[10px] px-1 py-0.5 bg-cyan-600/20 text-cyan-400 border border-cyan-600/40 rounded font-semibold`,children:[`#`,l]})]})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-1 text-[10px] text-slate-400`,children:[(0,$.jsx)(`span`,{className:`text-yellow-400 font-medium`,children:r(n.rank)}),n.mmr>0&&(0,$.jsxs)(`span`,{children:[` `,n.mmr.toLocaleString()]}),n.role&&(0,$.jsxs)(`span`,{children:[` `,n.role.charAt(0).toUpperCase()+n.role.slice(1)]})]})]}),c?(0,$.jsx)(`button`,{onClick:()=>S(t,`available`),className:`px-2 py-1 bg-orange-600 hover:bg-orange-700 text-white rounded text-[10px] font-medium transition-colors`,children:``}):(0,$.jsxs)(`div`,{className:`flex gap-1`,children:[(0,$.jsx)(`button`,{onClick:()=>{e.availablePlayers.includes(t)||b({availablePlayers:[...e.availablePlayers,t]}),setTimeout(()=>S(t,`team1`),100)},className:`px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-[10px] font-medium transition-colors disabled:opacity-40`,disabled:e.team1.length>=4,title:`Add to Radiant`,children:`R`}),(0,$.jsx)(`button`,{onClick:()=>{e.availablePlayers.includes(t)||b({availablePlayers:[...e.availablePlayers,t]}),setTimeout(()=>S(t,`team2`),100)},className:`px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-[10px] font-medium transition-colors disabled:opacity-40`,disabled:e.team2.length>=4,title:`Add to Dire`,children:`D`})]})]})},t)}),e.availablePlayers.filter(e=>!h[e]).map(t=>(0,$.jsx)(`div`,{className:`p-2 rounded border bg-slate-900/60 border-slate-700/50 hover:border-cyan-500/50 transition-all`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`div`,{className:`w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold text-xs`,children:t.charAt(0).toUpperCase()}),(0,$.jsx)(`span`,{className:`flex-1 text-white font-medium text-xs`,children:t}),(0,$.jsxs)(`div`,{className:`flex gap-1`,children:[(0,$.jsx)(`button`,{onClick:()=>S(t,`team1`),className:`px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-[10px] font-medium transition-colors disabled:opacity-40`,disabled:e.team1.length>=4,children:`R`}),(0,$.jsx)(`button`,{onClick:()=>S(t,`team2`),className:`px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-[10px] font-medium transition-colors disabled:opacity-40`,disabled:e.team2.length>=4,children:`D`}),(0,$.jsx)(`button`,{onClick:()=>w(t),className:`px-1.5 py-1 bg-slate-700 hover:bg-slate-600 text-white rounded text-[10px] transition-colors`,children:(0,$.jsx)(NC,{className:`w-3 h-3`})})]})]})},t)),Object.keys(h).length===0&&e.availablePlayers.length===0&&(0,$.jsxs)(`div`,{className:`text-center py-8`,children:[(0,$.jsx)(LC,{className:`w-12 h-12 text-slate-600 mx-auto mb-2`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-xs`,children:`No players`})]})]})]}),(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-red-900/40 to-slate-900/60 rounded-xl p-4 border-2 border-red-500/30`,children:[(0,$.jsxs)(`div`,{className:`mb-3`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-bold text-red-400`,children:`Dire`}),(0,$.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[(e.captain2?1:0)+e.team2.length,`/5`]})]}),(0,$.jsxs)(`div`,{className:`text-xs text-red-300 font-medium mt-1`,children:[`Total MMR: `,(()=>{let t=0;if(e.captain2){let n=h[e.captain2];if(n?.mmr){let e=typeof n.mmr==`number`?n.mmr:parseInt(n.mmr,10);!isNaN(e)&&e>0&&(t+=e)}}return e.team2.forEach(e=>{let n=h[e];if(n?.mmr){let e=typeof n.mmr==`number`?n.mmr:parseInt(n.mmr,10);!isNaN(e)&&e>0&&(t+=e)}}),t.toLocaleString()})()]})]}),(0,$.jsxs)(`div`,{className:`mb-3`,children:[(0,$.jsxs)(`label`,{className:`text-xs text-red-400/70 uppercase font-bold mb-1 flex items-center gap-2`,children:[(0,$.jsx)(WS,{className:`w-3 h-3`}),`Captain`]}),e.captain2?(0,$.jsxs)(`div`,{className:`h-10 bg-slate-900/50 rounded border border-red-500/30 flex items-center px-3 justify-between group`,children:[(0,$.jsx)(`span`,{className:`text-white font-medium text-sm`,children:e.captain2}),(0,$.jsx)(`button`,{onClick:()=>C(``,2),className:`opacity-0 group-hover:opacity-100 p-1 hover:bg-slate-700 rounded text-xs text-red-400 transition-opacity`,title:`Remove captain`,children:(0,$.jsx)(KE,{className:`w-3 h-3`})})]}):(0,$.jsx)(`div`,{className:`text-xs text-slate-400 p-2 bg-slate-900/30 rounded border border-red-500/20`,children:`Select a captain from drafted players below`})]}),(0,$.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,]].map((t,n)=>{let r=e.team2[n],i=r?te(r):null,a=r?h[r]:null;return(0,$.jsx)(`div`,{className:`min-h-10 bg-slate-900/40 rounded border border-red-500/20 flex items-center px-3 py-2`,children:r?(0,$.jsxs)(`div`,{className:`flex items-center justify-between w-full group`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col flex-1 min-w-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-white font-medium text-sm`,children:r}),i&&(0,$.jsxs)(`span`,{className:`text-red-400/60 text-xs font-semibold`,children:[`#`,i]}),e.captain2===r&&(0,$.jsx)(WS,{className:`w-3 h-3 text-yellow-400`,title:`Captain`})]}),a&&(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-[10px] text-slate-400 mt-0.5`,children:[a.mmr&&(0,$.jsxs)(`span`,{className:`text-red-300`,children:[typeof a.mmr==`number`?a.mmr.toLocaleString():parseInt(a.mmr,10).toLocaleString(),` MMR`]}),a.role&&(0,$.jsxs)(`span`,{children:[` `,a.role.charAt(0).toUpperCase()+a.role.slice(1)]})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[e.captain2!==r&&(0,$.jsx)(`button`,{onClick:()=>C(r,2),className:`p-1 hover:bg-red-700 rounded text-xs text-yellow-400`,title:`Make captain`,children:(0,$.jsx)(WS,{className:`w-3 h-3`})}),(0,$.jsx)(`button`,{onClick:()=>S(r,`team1`),className:`p-1 hover:bg-slate-700 rounded text-xs text-slate-300`,title:`Move to Radiant`,children:``}),(0,$.jsx)(`button`,{onClick:()=>S(r,`available`),className:`p-1 hover:bg-slate-700 rounded text-xs text-red-400`,children:(0,$.jsx)(KE,{className:`w-3 h-3`})})]})]}):(0,$.jsxs)(`p`,{className:`text-slate-500 text-xs`,children:[`Slot `,n+1]})},n)})})]})]})}),!c&&(0,$.jsx)(`button`,{onClick:()=>u(!0),className:`fixed bottom-6 right-6 z-40 w-14 h-14 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all hover:scale-110`,title:`Open chat`,children:(0,$.jsx)(mC,{className:`w-6 h-6`})}),c&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-end justify-end p-4 sm:p-6 bg-black/30 backdrop-blur-xs`,children:(0,$.jsxs)(`div`,{className:`w-full sm:w-[450px] h-[600px] max-h-[90vh] bg-slate-900 rounded-xl shadow-2xl border-2 border-slate-700 flex flex-col`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b border-slate-700`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(mC,{className:`w-5 h-5 text-green-400`}),(0,$.jsx)(`h3`,{className:`text-lg font-bold text-white`,children:`Draft Chat`})]}),(0,$.jsx)(`button`,{onClick:()=>u(!1),className:`p-2 hover:bg-slate-800 rounded-lg transition-colors text-slate-400 hover:text-white`,title:`Close chat`,children:(0,$.jsx)(HC,{className:`w-5 h-5`})})]}),(0,$.jsx)(`div`,{className:`flex-1 overflow-hidden`,children:(0,$.jsx)(WE,{userName:d,setShowNameModal:m})})]})}),p&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-60 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-6 sm:p-8 max-w-md w-full border-2 border-slate-700 shadow-2xl`,children:[(0,$.jsx)(`h2`,{className:`text-2xl sm:text-3xl font-bold text-white mb-2`,children:`Welcome!`}),(0,$.jsx)(`p`,{className:`text-slate-300 mb-6`,children:`Enter your name to chat Noob`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Your name`,defaultValue:d,className:`w-full p-3 sm:p-4 bg-slate-900 text-white rounded-lg border-2 border-slate-600 focus:border-green-500 focus:outline-none mb-4 text-base sm:text-lg`,onKeyDown:e=>{if(e.key===`Enter`){let t=e.target.value.trim();t&&(f(t),localStorage.setItem(`userName`,t),m(!1))}},autoFocus:!0}),(0,$.jsx)(`button`,{onClick:e=>{let t=e.target.previousElementSibling.value.trim();t&&(f(t),localStorage.setItem(`userName`,t),m(!1))},className:`w-full py-3 sm:py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-colors duration-200 text-base sm:text-lg`,children:`Continue`})]})})]})}function KE({className:e}){return(0,$.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,$.jsx)(`path`,{d:`M18 6 6 18`}),(0,$.jsx)(`path`,{d:`m6 6 18 12`})]})}function qE({scheduleData:e,updateSchedule:t,userName:n,setShowNameModal:r}){let i=[`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`,`Sunday`],a=[`14:00`,`15:00`,`16:00`,`17:00`,`18:00`,`19:00`,`20:00`,`21:00`,`22:00`,`23:00`],o=(i,a)=>{if(!n){r(!0);return}let o=`${i}-${a}`,s=e.availability[n]||{};t({availability:{...e.availability,[n]:{...s,[o]:!s[o]}}})},s=()=>{if(!n)return;let r={...e.availability},i={...e.preferences};delete r[n],delete i[n],t({availability:r,preferences:i})},c=i=>{if(!n){r(!0);return}let a=e.preferences[n]||{lan:!1,ranked:!1};t({preferences:{...e.preferences,[n]:{...a,[i]:!a[i]}}})},l=(()=>{let t={},n={},r={};return Object.entries(e.availability).forEach(([i,a])=>{Object.entries(a).forEach(([a,o])=>{if(o){t[a]=(t[a]||0)+1,n[a]||(n[a]=[]),n[a].push(i),r[a]||(r[a]={lan:0,ranked:0});let o=e.preferences[i]||{};o.lan&&r[a].lan++,o.ranked&&r[a].ranked++}})}),Object.entries(t).sort((e,t)=>t[1]-e[1]).map(([e,t])=>({slot:e,count:t,players:n[e],modes:r[e]}))})();return(0,$.jsxs)(`div`,{className:`space-y-6 px-2 sm:px-0`,children:[(0,$.jsx)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 sm:p-6 border-2 border-slate-700/50`,children:(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`h2`,{className:`text-xl sm:text-2xl font-bold text-white flex items-center gap-3`,children:[(0,$.jsx)(JS,{className:`w-6 h-6 text-orange-400`}),`Team Schedule`]}),(0,$.jsx)(`p`,{className:`text-slate-400 mt-1 text-sm sm:text-base`,children:`Mark your availability for the week`})]}),n&&(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full sm:w-auto`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 bg-slate-900/50 p-2 rounded-lg border border-slate-700 w-full sm:w-auto justify-center`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Preferences:`}),(0,$.jsxs)(`button`,{onClick:()=>c(`lan`),className:`flex items-center gap-1 px-2 py-1 rounded text-xs sm:text-sm transition-colors ${e.preferences[n]?.lan?`bg-purple-600 text-white`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:[(0,$.jsx)(VC,{className:`w-3 h-3 sm:w-4 sm:h-4`}),`LAN`]}),(0,$.jsxs)(`button`,{onClick:()=>c(`ranked`),className:`flex items-center gap-1 px-2 py-1 rounded text-xs sm:text-sm transition-colors ${e.preferences[n]?.ranked?`bg-yellow-600 text-white`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:[(0,$.jsx)(PC,{className:`w-3 h-3 sm:w-4 sm:h-4`}),`Ranked`]})]}),(0,$.jsxs)(`button`,{onClick:s,className:`flex items-center justify-center gap-2 px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors border border-red-600/30 w-full sm:w-auto text-sm sm:text-base`,children:[(0,$.jsx)(NC,{className:`w-4 h-4`}),`Clear My Schedule`]})]})]})}),l.length>0&&(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-green-900/20 to-slate-900/40 rounded-xl p-4 sm:p-6 border border-green-500/20 backdrop-blur-sm`,children:[(0,$.jsxs)(`h3`,{className:`text-lg font-bold text-green-400 mb-4 flex items-center gap-2`,children:[(0,$.jsx)(eC,{className:`w-5 h-5`}),`Best Times to Play`]}),(0,$.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3`,children:l.slice(0,6).map(({slot:e,count:t,players:n,modes:r})=>(0,$.jsxs)(`div`,{className:`bg-slate-900/60 p-3 rounded-lg border border-slate-700 flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-semibold text-white text-sm sm:text-base`,children:e.replace(`-`,` `)}),(0,$.jsx)(`div`,{className:`text-xs text-slate-400 mt-1`,children:n.join(`, `)})]}),(0,$.jsxs)(`div`,{className:`flex flex-col items-end gap-1`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-1 bg-green-600/20 px-2 py-1 rounded text-green-400 text-xs font-bold`,children:[(0,$.jsx)(XS,{className:`w-3 h-3`}),t]}),(0,$.jsxs)(`div`,{className:`flex gap-1`,children:[r.lan>0&&(0,$.jsx)(`span`,{className:`text-[10px] bg-purple-600/20 text-purple-400 px-1 rounded`,title:`${r.lan} players want LAN`,children:`LAN`}),r.ranked>0&&(0,$.jsx)(`span`,{className:`text-[10px] bg-yellow-600/20 text-yellow-400 px-1 rounded`,title:`${r.ranked} players want Ranked`,children:`Ranked`})]})]})]},e))})]}),(0,$.jsx)(`div`,{className:`overflow-x-auto pb-4`,children:(0,$.jsxs)(`div`,{className:`min-w-[800px] bg-slate-900/50 rounded-xl border border-slate-700 overflow-hidden`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-8 border-b border-slate-700 bg-slate-800/50`,children:[(0,$.jsx)(`div`,{className:`p-2 sm:p-2 font-bold text-slate-400 border-r border-slate-700 sticky left-0 bg-slate-800/95 backdrop-blur-sm z-10 text-sm sm:text-base`,children:`Time`}),i.map(e=>(0,$.jsx)(`div`,{className:`p-2 sm:p-2 font-bold text-white text-center border-r border-slate-700 last:border-r-0 text-sm sm:text-base`,children:e.slice(0,3)},e))]}),a.map(t=>(0,$.jsxs)(`div`,{className:`grid grid-cols-8 border-b border-slate-700 last:border-b-0 hover:bg-slate-800/30 transition-colors`,children:[(0,$.jsx)(`div`,{className:`p-2 sm:p-3 text-slate-400 font-medium text-xs sm:text-sm border-r border-slate-700 flex items-center justify-center sticky left-0 bg-slate-900/95 backdrop-blur-sm z-10`,children:t}),i.map(r=>{let i=`${r}-${t}`,a=Object.entries(e.availability).filter(([,e])=>e[i]).map(([e])=>e),s=e.availability[n]?.[i];return(0,$.jsxs)(`div`,{onClick:()=>o(r,t),className:`p-1 sm:p-2 border-r border-slate-700 last:border-r-0 min-h-[60px] sm:min-h-[80px] cursor-pointer transition-all duration-200 relative group ${s?`bg-green-600/10 hover:bg-green-600/20`:`hover:bg-slate-700/30`}`,children:[s&&(0,$.jsx)(`div`,{className:`absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-[0_0_8px_rgba(34,197,94,0.6)]`}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1 content-start h-full`,children:a.map(e=>(0,$.jsx)(`span`,{className:`text-[10px] px-1.5 py-0.5 rounded border ${e===n?`bg-green-600 text-white border-green-500`:`bg-slate-800 text-slate-300 border-slate-600`}`,children:e},e))}),(0,$.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 backdrop-blur-[1px]`,children:s?(0,$.jsx)(HC,{className:`w-4 h-4 sm:w-6 sm:h-6 text-red-400`}):(0,$.jsx)(XS,{className:`w-4 h-4 sm:w-6 sm:h-6 text-green-400`})})]},`${r}-${t}`)})]},t))]})})]})}function JE(){let[e,t]=(0,l.useState)(null);return(0,$.jsxs)(`div`,{className:`space-y-6 px-2 sm:px-0 backdrop-blur-sm`,children:[(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 sm:p-6 border-2 border-slate-700/50`,children:[(0,$.jsxs)(`h2`,{className:`text-xl sm:text-2xl font-bold text-white flex items-center gap-3 mb-2`,children:[(0,$.jsx)(PC,{className:`w-6 h-6 text-yellow-500`}),`Skill Improvement Tracks`]}),(0,$.jsx)(`p`,{className:`text-slate-300 text-sm sm:text-base`,children:`Select a track to focus your training`})]}),(0,$.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6`,children:[{id:`mechanics`,title:`Mechanics & Execution`,icon:UC,color:`from-blue-500 to-cyan-500`,practices:[`Last-hitting practice: 50+ CS in 10 min (custom lobby)`,`Deny practice: Focus on denying every 4th creep`,`Combos: Practice hero-specific combos in demo mode`,`Camera control: Use edge pan + control groups efficiently`,`Quick buy & hotkeys: Memorize item slots (1-6)`,`Animation canceling: Master attack & cast animations`],resources:[`Watch your replays at 0.5x speed for mechanical mistakes`,`Use the demo hero feature to practice combos`,`Try "Dota 2 Last Hit Trainer" custom game`]},{id:`map`,title:`Map Awareness & Vision`,icon:fC,color:`from-green-500 to-emerald-500`,practices:[`Minimap glance: Look every 3-5 seconds (set timer)`,`Ward spots: Learn all meta ward positions`,`Enemy movements: Track enemy heroes on minimap`,`Smoke timings: Note when smokes are available`,`Roshan timer: Always track Aegis timing`,`TP reactions: Keep TP ready, watch for dives`],resources:[`Study high MMR player minimap camera movements`,`Use a minimap metronome while playing`,`Watch pro replays focusing only on their ward placements`]},{id:`game-sense`,title:`Game Sense & Decision Making`,icon:qS,color:`from-purple-500 to-pink-500`,practices:[`Power spikes: Know when your hero is strongest`,`Itemization: Adapt builds to enemy lineup`,`Objective priority: Towers > Kills in most cases`,`When to farm vs fight: Read the game state`,`Buyback discipline: Save for critical moments`,`Risk assessment: When to trade, when to back`],resources:[`Watch replays asking "why" for every decision`,`Study DotaBuff meta trends for your heroes`,`Review pro player item builds and adapt them`]},{id:`roles`,title:`Role Mastery`,icon:LC,color:`from-orange-500 to-red-500`,practices:[`Pick 2-3 heroes per role to master`,`Learn role-specific timings (stacks, pulls, rotations)`,`Understand your win condition as that role`,`Study matchups: Know your counters & advantages`,`Position 1-2: Farm patterns & space creation`,`Position 3-5: Map control & enabling carries`],resources:[`Watch role-specific guides from top players`,`Join role-specific Discord communities`,`Analyze your hero's win rate by matchup`]},{id:`mental`,title:`Mental Game & Consistency`,icon:jC,color:`from-yellow-500 to-amber-500`,practices:[`Set 1-2 specific goals per session (not just "win")`,`Review 1 replay per day - wins AND losses`,`Mute toxicity immediately, use pings`,`Take breaks after 2-3 games to reset`,`Focus on YOUR play, not teammates' mistakes`,`Track your improvement (CS, KDA, impact)`],resources:[`Keep a Dota journal noting what you learned`,`Use Dota Plus or tracking tools to measure progress`,`Watch BSJ or GameLeap mental game guides`]},{id:`learning`,title:`Learning Resources`,icon:PC,color:`from-indigo-500 to-violet-500`,practices:["Watch EL`Chapos game per week (player perspective)",`Follow patch notes and adapt quickly`,`Study meta shifts on DotaBuff/OpenDota`,`Join coaching Discord servers`,`Watch educational content (BSJ, Jenkins, Gameleap)`,`Analyze immortal replays of your heroes`],resources:[`YouTube: BananaSlamJamma (BSJ), Jenkins, DotaCinema`,`Twitch: Watch high MMR players for your role`,`Reddit: r/TrueDoTA2 for serious discussions`,`DotaBuff.com for stats and meta analysis`]}].map(n=>{let r=n.icon,i=e===n.id;return(0,$.jsxs)(`div`,{onClick:()=>t(i?null:n.id),className:`relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer group ${i?`border-white/50 scale-105 shadow-2xl z-10`:`border-slate-700 hover:border-slate-500 hover:scale-[1.02]`}`,children:[(0,$.jsx)(`div`,{className:`absolute inset-0 bg-linear-to-br ${n.color} opacity-10 group-hover:opacity-20 transition-opacity`}),(0,$.jsxs)(`div`,{className:`p-5 sm:p-6 relative z-10`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-4 mb-4`,children:[(0,$.jsx)(`div`,{className:`p-3 rounded-lg bg-linear-to-br ${n.color} shadow-lg`,children:(0,$.jsx)(r,{className:`w-6 h-6 text-white`})}),(0,$.jsx)(`h3`,{className:`text-lg sm:text-xl font-bold text-white leading-tight`,children:n.title})]}),i&&(0,$.jsxs)(`div`,{className:`space-y-4 animate-in fade-in slide-in-from-top-4 duration-300`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h4`,{className:`text-sm font-bold text-slate-300 uppercase tracking-wider mb-2`,children:`Daily Practices`}),(0,$.jsx)(`ul`,{className:`space-y-2`,children:n.practices.map((e,t)=>(0,$.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-300`,children:[(0,$.jsx)(XS,{className:`w-4 h-4 text-green-400 shrink-0 mt-0.5`}),(0,$.jsx)(`span`,{children:e})]},t))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h4`,{className:`text-sm font-bold text-slate-300 uppercase tracking-wider mb-2`,children:`Resources`}),(0,$.jsx)(`ul`,{className:`space-y-2`,children:n.resources.map((e,t)=>(0,$.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-300`,children:[(0,$.jsx)(`div`,{className:`w-1.5 h-1.5 rounded-full bg-slate-500 mt-1.5 shrink-0`}),(0,$.jsx)(`span`,{children:e})]},t))})]})]}),!i&&(0,$.jsx)(`div`,{className:`flex items-center text-slate-400 text-sm mt-2 group-hover:text-white transition-colors`,children:(0,$.jsx)(`span`,{children:`Click to view details`})})]})]},n.id)})})]})}function YE({userName:e}){let[t,n]=(0,l.useState)({}),[r,i]=(0,l.useState)(!0),[a,o]=(0,l.useState)(!1),[s,c]=(0,l.useState)(null),[u,d]=(0,l.useState)(``),[f,p]=(0,l.useState)(``),[m,h]=(0,l.useState)({}),[g,_]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=Nm(bp(PS,`app-data`,`players`),e=>{e.exists()?n(e.data().list||{}):n({}),i(!1)},e=>{console.error(`Error loading players:`,e),i(!1)});return()=>e()},[]),(0,l.useEffect)(()=>{let e=Nm(bp(PS,`app-data`,`fun-reports`),e=>{e.exists()?h(e.data().reports||{}):h({})},e=>{console.error(`Error loading reports:`,e)});return()=>e()},[]),(0,l.useEffect)(()=>{let e=Nm(bp(PS,`app-data`,`custom-report-reasons`),e=>{e.exists()?_(e.data().reasons||[]):_([])},e=>{console.error(`Error loading custom reasons:`,e)});return()=>e()},[]);let v=[{emoji:``,text:`Picked Techies`,color:`text-red-400`},{emoji:``,text:`Didn't buy wards`,color:`text-yellow-400`},{emoji:``,text:`Too handsome`,color:`text-blue-400`},{emoji:``,text:`Didn't join voice`,color:`text-purple-400`},{emoji:``,text:`Acted like pro, played like Herald`,color:`text-orange-400`},{emoji:``,text:`Slowest farmer in history`,color:`text-green-400`},{emoji:``,text:`Missed every skillshot`,color:`text-pink-400`},{emoji:``,text:`AFK farming while team fights`,color:`text-cyan-400`}],y=[...v,...g.map(e=>({emoji:``,text:e,color:`text-indigo-400`}))],b=t=>e?(m[t]||[]).some(t=>t.reporter===e):!1,x=async(t,n)=>{if(!e){alert(`Please set your username first!`);return}try{let r=bp(PS,`app-data`,`fun-reports`),i=bp(PS,`app-data`,`custom-report-reasons`),a=await Em(r),s=a.exists()&&a.data().reports||{},l=s[t]||[],u=l.findIndex(t=>t.reporter===e),f;if(u!==-1)f=[...l],f[u]={...f[u],reason:n,timestamp:new Date().toISOString()};else{let t={reason:n,reporter:e,timestamp:new Date().toISOString(),id:Date.now()};f=[...l,t]}if(await km(r,{reports:{...s,[t]:f}}),!v.some(e=>e.text===n)&&!g.includes(n)){let e=await Em(i);await km(i,{reasons:[...e.exists()&&e.data().reasons||[],n]})}o(!1),c(null),d(``),p(``)}catch(e){console.error(`Error submitting report:`,e),alert(`Failed to submit report. Please try again.`)}},S=e=>m[e]||[],C=e=>{let t=S(e);if(t.length===0)return null;let n={};return t.forEach(e=>{n[e.reason]=(n[e.reason]||0)+1}),Object.entries(n).sort((e,t)=>t[1]-e[1])[0]},w=e=>{if(!e)return`Unranked`;if(typeof e==`string`)return e.charAt(0).toUpperCase()+e.slice(1);let t=[`Herald`,`Guardian`,`Crusader`,`Archon`,`Legend`,`Ancient`,`Divine`,`Immortal`],n=Math.floor(e/10),r=e%10;return n===8?`Immortal ${r>0?`#${r}`:``}`:`${t[n-1]} ${r}`};return(0,$.jsxs)(`div`,{className:`space-y-6 px-2 sm:px-0`,children:[(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 sm:p-6 border-2 border-slate-700/50`,children:[(0,$.jsxs)(`h2`,{className:`text-xl sm:text-2xl font-bold text-white flex items-center gap-3 mb-2`,children:[(0,$.jsx)(LC,{className:`w-6 h-6 text-cyan-400`}),`Registered Players`]}),(0,$.jsx)(`p`,{className:`text-slate-300 text-sm sm:text-base`,children:`All players who have linked their Dota 2 profiles`})]}),r?(0,$.jsxs)(`div`,{className:`text-center py-12`,children:[(0,$.jsx)(`div`,{className:`inline-block w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`p`,{className:`text-slate-400 mt-4`,children:`Loading players...`})]}):Object.keys(t).length===0?(0,$.jsxs)(`div`,{className:`bg-slate-800/50 rounded-xl p-8 border-2 border-slate-700 text-center`,children:[(0,$.jsx)(LC,{className:`w-16 h-16 text-slate-600 mx-auto mb-4`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-lg`,children:`No players registered yet`}),(0,$.jsx)(`p`,{className:`text-slate-500 text-sm mt-2`,children:`Be the first to link your Steam profile!`})]}):(0,$.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4`,children:Object.entries(t).sort((e,t)=>(t[1].mmr||0)-(e[1].mmr||0)).map(([t,n],r)=>(0,$.jsxs)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-5 border-2 border-cyan-600/30 hover:border-cyan-600/50 transition-all duration-300 hover:scale-105`,children:[r<3&&(0,$.jsxs)(`div`,{className:`absolute top-3 right-3`,children:[r===0&&(0,$.jsx)(WS,{className:`w-6 h-6 text-yellow-400`}),r===1&&(0,$.jsx)(WS,{className:`w-6 h-6 text-gray-400`}),r===2&&(0,$.jsx)(WS,{className:`w-6 h-6 text-orange-600`})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[n.avatar&&(0,$.jsx)(`img`,{src:n.avatar,alt:t,className:`w-16 h-16 rounded-full border-2 border-cyan-600/50`}),(0,$.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,$.jsx)(`h3`,{className:`text-white font-bold text-lg truncate`,children:t}),n.name&&n.name!==t&&(0,$.jsx)(`p`,{className:`text-slate-400 text-sm truncate`,children:n.name})]})]}),(0,$.jsxs)(`div`,{className:`space-y-2`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Rank:`}),(0,$.jsx)(`span`,{className:`text-yellow-400 font-bold text-sm`,children:w(n.rank)})]}),n.mmr>0&&(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`MMR:`}),(0,$.jsx)(`span`,{className:`text-cyan-400 font-bold text-sm`,children:n.mmr.toLocaleString()})]}),(n.role||n.phone||n.preferredHeroes)&&(0,$.jsxs)(`div`,{className:`pt-2 border-t border-slate-700/50 space-y-1`,children:[n.role&&(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Role:`}),(0,$.jsx)(`span`,{className:`text-white font-medium text-sm`,children:n.role.charAt(0).toUpperCase()+n.role.slice(1)})]}),n.phone&&(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Phone:`}),(0,$.jsx)(`span`,{className:`text-white font-medium text-sm`,children:n.phone})]}),n.preferredHeroes&&(0,$.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Heroes:`}),(0,$.jsx)(`span`,{className:`text-white text-sm truncate`,children:n.preferredHeroes})]})]}),n.totalGames>0&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Win Rate:`}),(0,$.jsxs)(`span`,{className:`font-bold text-sm ${parseFloat(n.winRate)>=50?`text-green-400`:`text-orange-400`}`,children:[n.winRate,`%`]})]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`Total Games:`}),(0,$.jsx)(`span`,{className:`text-white font-bold text-sm`,children:n.totalGames.toLocaleString()})]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-slate-400 text-sm`,children:`W/L:`}),(0,$.jsxs)(`span`,{className:`text-white font-bold text-sm`,children:[(0,$.jsx)(`span`,{className:`text-green-400`,children:n.wins}),` `,`/`,` `,(0,$.jsx)(`span`,{className:`text-red-400`,children:n.losses})]})]})]}),n.isPlaying&&(0,$.jsx)(`div`,{className:`mt-3 px-3 py-1.5 bg-green-600/20 text-green-400 border border-green-600/40 rounded text-xs font-medium text-center animate-pulse`,children:`Playing Now`}),C(t)&&(0,$.jsx)(`div`,{className:`mt-3 px-3 py-2 bg-orange-600/10 border border-orange-600/30 rounded`,children:(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:`Most Reported:`}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-sm`,children:y.find(e=>e.text===C(t)[0])?.emoji}),(0,$.jsx)(`span`,{className:`text-xs font-medium ${y.find(e=>e.text===C(t)[0])?.color}`,children:C(t)[0]}),(0,$.jsxs)(`span`,{className:`text-xs text-slate-500`,children:[`(`,C(t)[1],`x)`]})]})]})}),(0,$.jsxs)(`button`,{onClick:()=>{c(t);let n=(m[t]||[]).find(t=>t.reporter===e);n&&(v.some(e=>e.text===n.reason)?(d(n.reason),p(``)):(d(``),p(n.reason))),o(!0)},className:`mt-3 w-full flex items-center justify-center gap-2 px-3 py-2 border rounded text-sm transition-colors bg-orange-600/20 text-orange-400 border-orange-600/30 hover:bg-orange-600/30`,children:[(0,$.jsx)(OC,{className:`w-4 h-4`}),b(t)?`Change Report`:`Report (For Fun!)`]}),n.profileUrl&&(0,$.jsx)(`a`,{href:n.profileUrl,target:`_blank`,rel:`noopener noreferrer`,className:`mt-2 block text-center px-3 py-2 bg-cyan-600/20 text-cyan-400 border border-cyan-600/30 rounded text-sm hover:bg-cyan-600/30 transition-colors`,children:`View OpenDota Profile`})]})]},t))}),a&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-100 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm overflow-y-auto pt-20`,children:(0,$.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-6 max-w-md w-full border-2 border-orange-600/50 shadow-2xl my-auto max-h-[calc(100vh-160px)] overflow-y-auto`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,$.jsxs)(`h3`,{className:`text-xl font-bold text-white flex items-center gap-2`,children:[(0,$.jsx)(OC,{className:`w-6 h-6 text-orange-400`}),b(s)?`Change Report for ${s}`:`Report ${s}`]}),(0,$.jsx)(`button`,{onClick:()=>{o(!1),c(null),d(``),p(``)},className:`text-slate-400 hover:text-white`,children:(0,$.jsx)(iC,{className:`w-5 h-5`})})]}),(0,$.jsx)(`p`,{className:`text-sm text-slate-400 mb-4`,children:`This is just for laughs! No one is actually being reported. `}),(0,$.jsx)(`div`,{className:`space-y-2 mb-4`,children:y.map(e=>(0,$.jsx)(`button`,{onClick:()=>{d(e.text),p(``)},className:`w-full p-3 rounded-lg border-2 transition-all text-left ${u===e.text&&!f?`border-orange-600 bg-orange-600/20 ${e.color}`:`border-slate-700 bg-slate-900/50 text-slate-300 hover:border-slate-600`}`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`text-2xl`,children:e.emoji}),(0,$.jsx)(`span`,{className:`text-sm font-medium`,children:e.text})]})},e.text))}),(0,$.jsxs)(`div`,{className:`mb-6`,children:[(0,$.jsx)(`label`,{className:`block text-sm text-slate-400 mb-2`,children:`Or write your own reason:`}),(0,$.jsx)(`input`,{type:`text`,value:f,onChange:e=>{p(e.target.value),e.target.value&&d(``)},placeholder:`e.g., Stole all the bounty runes...`,className:`w-full px-3 py-2 bg-slate-900 text-white rounded-lg border-2 border-slate-700 focus:border-orange-600 focus:outline-none text-sm`,maxLength:50}),(0,$.jsxs)(`p`,{className:`text-xs text-slate-500 mt-1`,children:[f.length,`/50 characters`]})]}),(0,$.jsxs)(`div`,{className:`flex gap-3`,children:[(0,$.jsx)(`button`,{onClick:()=>{let e=f.trim()||u;e&&(x(s,e),p(``))},disabled:!u&&!f.trim(),className:`flex-1 py-3 bg-orange-600 hover:bg-orange-700 text-white font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:`Submit Report`}),(0,$.jsx)(`button`,{onClick:()=>{o(!1),c(null),d(``),p(``)},className:`px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-lg transition-colors`,children:`Cancel`})]})]})})]})}function XE(){return(0,$.jsxs)(`div`,{className:`space-y-6 px-2 sm:px-0`,children:[(0,$.jsx)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(YS,{className:`w-6 h-6 text-cyan-400`}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{className:`text-xl font-bold text-white`,children:`Statistics Dashboard`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-sm`,children:`View detailed Dota 2 statistics and analytics`})]})]})}),(0,$.jsx)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl border-2 border-slate-700/50 overflow-hidden`,children:(0,$.jsx)(`div`,{className:`relative w-full`,style:{paddingBottom:`56.25%`},children:(0,$.jsx)(`iframe`,{title:`Dota 2 Statistics Dashboard`,src:`https://app.powerbi.com/view?r=eyJrIjoiY2QwMGE1ZDItODVmNS00ZDFlLTk5NTAtMjUxNDE4ZDIxMWM1IiwidCI6ImJkZTY4YTRhLWE5YmEtNGIxYS05N2Y1LTQ2ZjNiOWY4ZjhjYyIsImMiOjEwfQ%3D%3D`,frameBorder:`0`,allowFullScreen:!0,className:`absolute top-0 left-0 w-full h-full`})})}),(0,$.jsxs)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700/50`,children:[(0,$.jsx)(`h3`,{className:`text-sm font-semibold text-white mb-2`,children:`About this Dashboard`}),(0,$.jsx)(`p`,{className:`text-xs text-slate-400`,children:`This interactive dashboard displays statistics and analytics for our Dota 2 Permum toxic community. Explore player performance, match history, win rates, and more.`})]})]})}var ZE=[{id:`like`,icon:MC,label:`Like`,color:`text-blue-500`,emoji:``},{id:`love`,icon:cC,label:`Love`,color:`text-red-500`,emoji:``},{id:`haha`,icon:OC,label:`Haha`,color:`text-yellow-500`,emoji:``},{id:`angry`,icon:US,label:`Angry`,color:`text-orange-500`,emoji:``},{id:`gg`,icon:PC,label:`GG`,color:`text-yellow-400`,emoji:``},{id:`toxic`,icon:DC,label:`Toxic`,color:`text-green-500`,emoji:``},{id:`fire`,icon:aC,label:`Fire`,color:`text-orange-400`,emoji:``},{id:`party`,icon:vC,label:`Party`,color:`text-pink-500`,emoji:``},{id:`bigbrain`,icon:qS,label:`Big Brain`,color:`text-purple-400`,emoji:``},{id:`watching`,icon:rC,label:`Watching`,color:`text-slate-400`,emoji:``},{id:`noob`,icon:sC,label:`Noob`,color:`text-gray-400`,emoji:``}],QE=[`What tilted you today?`,`What is your problem?`,`Shut up and just send your meme`,`Don't feed... your thoughts here`,`Who ruined your MMR today?`,`Share your suffering...`,`Report or compliment? You decide`,`GG EZ or gg no re?`,`Carry or feeder? Post it here`,`Did someone pick your hero?`,`Blame your team here`,`Post your copium`,`Which role got flamed today?`,`Mid or feed?`,`Another jungle LC story?`,`Who bought shadow amulet?`,`Share your PTSD moment`,`Did you get fountain camped?`,`Tell us about the intentional feeder`,`Toxic or just passionate?`];function $E({userName:e,setShowNameModal:t}){let[n,r]=(0,l.useState)([]),[i,a]=(0,l.useState)({content:``,imageUrl:``,videoUrl:``,gifUrl:``,type:`text`}),[o,s]=(0,l.useState)(!0),[c,u]=(0,l.useState)(!1),[d,f]=(0,l.useState)(null),[p,m]=(0,l.useState)(null),[h,g]=(0,l.useState)(null),[_,v]=(0,l.useState)(null),[y,b]=(0,l.useState)({}),[x,S]=(0,l.useState)(!1),[C,w]=(0,l.useState)(``),[ee,te]=(0,l.useState)(null),[ne,re]=(0,l.useState)(QE[0]),ie=(0,l.useRef)(null),ae=()=>QE[Math.floor(Math.random()*QE.length)],oe=()=>{let t=new Set;return n.forEach(e=>{t.add(e.userName),e.comments?.forEach(e=>{t.add(e.userName)})}),Array.from(t).filter(t=>t!==e)},se=e=>e&&e.split(/(@\w+)/g).map((e,t)=>e.startsWith(`@`)?(0,$.jsx)(`span`,{className:`text-cyan-400 font-semibold bg-cyan-400/10 px-1 rounded`,children:e},t):e),ce=(e,t=`content`)=>{t===`content`&&a({...i,content:e});let n=e.lastIndexOf(`@`);if(n!==-1){let t=e.substring(n+1);!t.includes(` `)&&t.length<=20?(S(!0),w(t.toLowerCase()),te(n)):S(!1)}else S(!1)},le=e=>{let t=`${i.content.substring(0,ee)}@${e} ${i.content.substring(ee+C.length+1)}`;a({...i,content:t}),S(!1),w(``)};(0,l.useEffect)(()=>{re(ae())},[]),(0,l.useEffect)(()=>{HE(e=>{console.log(`[Feed] Received notification:`,e),e.data?.type===`feed`&&console.log(`[Feed] New feed post notification`)})},[]),(0,l.useEffect)(()=>{let t=cm(yp(PS,`feed-posts`),pm(`timestamp`,`desc`),hm(50)),n=0,i=Nm(t,t=>{let i=t.docs.map(e=>({id:e.id,...e.data()}));if(n>0&&i.length>n){let t=i[0];if(t.userName!==e&&VE()){let e=t.content?t.content.substring(0,50)+(t.content.length>50?`...`:``):`Posted new content`;UE(`${t.userName} posted in feed`,e,{type:`feed`,postId:t.id})}}n=i.length,r(i),s(!1)},e=>{console.error(`Error loading posts:`,e),s(!1)});return()=>i()},[e]);let ue=async n=>{if(n.preventDefault(),!e){t(!0);return}if(!(!i.content.trim()&&!i.imageUrl.trim()&&!i.videoUrl.trim()&&!i.gifUrl.trim())){u(!0);try{let t=yp(PS,`feed-posts`),n=i.imageUrl.trim()?be(i.imageUrl.trim()):``,r=i.gifUrl.trim(),o={content:i.content.trim(),imageUrl:n,videoUrl:i.videoUrl.trim(),gifUrl:r,type:r?`gif`:n?`image`:i.videoUrl?`video`:`text`,userName:e,timestamp:Im(),reactions:{},comments:[]};await Mm(t,o),CT(e,o).catch(e=>console.warn(`Discord sync failed:`,e)),a({content:``,imageUrl:``,videoUrl:``,gifUrl:``,type:`text`})}catch(e){console.error(`Error creating post:`,e),alert(`Failed to create post. Please try again.`)}finally{u(!1)}}},T=async(r,i)=>{if(!e){t(!0);return}let a=n.find(e=>e.id===r);if(!a)return;let o=a.reactions||{},s=o[e]||[],c;c=s.includes(i)?s.filter(e=>e!==i):[...s,i];let l={...o,[e]:c};c.length===0&&delete l[e];try{await Am(bp(PS,`feed-posts`,r),{reactions:l})}catch(e){console.error(`Error updating reaction:`,e)}},E=async r=>{if(!e){t(!0);return}let i=y[r]?.trim();if(!i)return;let a=n.find(e=>e.id===r);if(!a)return;let o={id:Date.now(),userName:e,text:i,timestamp:new Date().toISOString()},s=[...a.comments||[],o];try{await Am(bp(PS,`feed-posts`,r),{comments:s}),b({...y,[r]:``})}catch(e){console.error(`Error adding comment:`,e)}},de=(n,r)=>{if(!e){t(!0);return}let i=`@${r} `;b({...y,[n]:i});let a=document.querySelector(`input[data-post-id="${n}"]`);a&&(a.focus(),setTimeout(()=>{a.setSelectionRange(i.length,i.length)},0))},fe=async(r,i,a)=>{if(!e){t(!0);return}let o=n.find(e=>e.id===r);if(!o)return;let s=o.comments.map(t=>{if(t.id===i){let n=t.reactions||{},r=n[e]||[],i;i=r.includes(a)?r.filter(e=>e!==a):[...r,a];let o={...n,[e]:i};return i.length===0&&delete o[e],{...t,reactions:o}}return t});try{await Am(bp(PS,`feed-posts`,r),{comments:s})}catch(e){console.error(`Error updating comment reaction:`,e)}},pe=async(t,n)=>{if(n!==e){alert(`You can only delete your own posts!`);return}if(confirm(`Delete this post?`))try{await jm(bp(PS,`feed-posts`,t))}catch(e){console.error(`Error deleting post:`,e),alert(`Failed to delete post.`)}},me=e=>{if(!e)return``;let t=e.toDate?e.toDate():new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5);return r<1?`Just now`:r<60?`${r}m ago`:i<24?`${i}h ago`:t.toLocaleDateString()},he=e=>{if(!e||Object.keys(e).length===0)return null;let t={};return Object.values(e).forEach(e=>{e.forEach(e=>{t[e]=(t[e]||0)+1})}),t},ge=(e,t)=>{if(!e)return[];let n=[];return Object.entries(e).forEach(([e,r])=>{r.includes(t)&&n.push(e)}),n},_e=e=>{v(setTimeout(()=>{g(e)},500))},ve=()=>{_&&(clearTimeout(_),v(null)),setTimeout(()=>{g(null)},2e3)},ye=e=>{let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&t[2].length===11?t[2]:null},be=e=>{if(!e||e.includes(`i.imgur.com`))return e;let t=e.match(/imgur\.com\/([a-zA-Z0-9]+)$/);if(t)return`https://i.imgur.com/${t[1]}.jpg`;let n=e.match(/imgur\.com\/a\/([a-zA-Z0-9]+)/);return n?`https://i.imgur.com/${n[1]}.jpg`:e};return(0,$.jsxs)(`div`,{className:`space-y-4 px-2 sm:px-0 max-w-3xl mx-auto`,children:[(0,$.jsx)(`div`,{className:`bg-linear-to-br from-slate-800/80 to-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(LC,{className:`w-6 h-6 text-purple-400`}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{className:`text-xl font-bold text-white`,children:`Community Feed`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-sm`,children:`Share memes, videos, and interact`})]})]})}),(0,$.jsx)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:(0,$.jsxs)(`form`,{onSubmit:ue,className:`space-y-3`,children:[(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`textarea`,{value:i.content,onChange:e=>ce(e.target.value),onFocus:()=>re(ae()),placeholder:e?`${ne} (Use @ to mention)`:`Enter your name to post...`,disabled:!e||c,className:`w-full px-4 py-3 bg-slate-900/50 text-white rounded-lg border-2 border-slate-700 focus:border-purple-500 focus:outline-none disabled:opacity-50 resize-none`,rows:`3`,maxLength:1e3}),x&&(0,$.jsxs)(`div`,{className:`absolute z-10 mt-1 w-64 bg-slate-900 border-2 border-slate-700 rounded-lg shadow-xl max-h-48 overflow-y-auto`,children:[oe().filter(e=>e.toLowerCase().includes(C)).slice(0,5).map(e=>(0,$.jsxs)(`button`,{type:`button`,onClick:()=>le(e),className:`w-full px-4 py-2 text-left text-white hover:bg-slate-800 transition-colors flex items-center gap-2`,children:[(0,$.jsx)(`div`,{className:`w-6 h-6 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold text-xs`,children:e.charAt(0).toUpperCase()}),(0,$.jsxs)(`span`,{children:[`@`,e]})]},e)),oe().filter(e=>e.toLowerCase().includes(C)).length===0&&(0,$.jsx)(`div`,{className:`px-4 py-2 text-slate-400 text-sm`,children:`No users found`})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:i.imageUrl,onChange:e=>a({...i,imageUrl:e.target.value,videoUrl:``,gifUrl:``}),placeholder:`Direct Image URL (i.imgur.com/image.jpg or right-click  Copy image address)`,disabled:!e||c||i.videoUrl||i.gifUrl,className:`flex-1 px-4 py-2 bg-slate-900/50 text-white rounded-lg border-2 border-slate-700 focus:border-purple-500 focus:outline-none disabled:opacity-50 text-sm`}),(0,$.jsx)(`input`,{type:`text`,value:i.videoUrl,onChange:e=>a({...i,videoUrl:e.target.value,imageUrl:``,gifUrl:``}),placeholder:`YouTube URL`,disabled:!e||c||i.imageUrl||i.gifUrl,className:`flex-1 px-4 py-2 bg-slate-900/50 text-white rounded-lg border-2 border-slate-700 focus:border-purple-500 focus:outline-none disabled:opacity-50 text-sm`})]}),(0,$.jsx)(`input`,{type:`text`,value:i.gifUrl,onChange:e=>a({...i,gifUrl:e.target.value,imageUrl:``,videoUrl:``}),placeholder:`GIF URL (Tenor, Giphy, or direct .gif link)`,disabled:!e||c||i.imageUrl||i.videoUrl,className:`w-full px-4 py-2 bg-slate-900/50 text-white rounded-lg border-2 border-slate-700 focus:border-purple-500 focus:outline-none disabled:opacity-50 text-sm`})]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,$.jsxs)(`div`,{className:`flex gap-2 text-slate-400 text-sm items-center`,children:[(0,$.jsx)(uC,{className:`w-4 h-4`}),(0,$.jsx)(`span`,{children:`Share images, videos, or GIFs`})]}),(0,$.jsxs)(`p`,{className:`text-xs text-slate-500`,children:[`Images: `,(0,$.jsx)(`a`,{href:`https://imgur.com/upload`,target:`_blank`,rel:`noopener noreferrer`,className:`text-purple-400 hover:text-purple-300 underline`,children:`Upload to Imgur`}),` then right-click image  "Copy image address" | GIFs: `,(0,$.jsx)(`a`,{href:`https://tenor.com`,target:`_blank`,rel:`noopener noreferrer`,className:`text-purple-400 hover:text-purple-300 underline ml-1`,children:`Tenor`}),` or `,(0,$.jsx)(`a`,{href:`https://giphy.com`,target:`_blank`,rel:`noopener noreferrer`,className:`text-purple-400 hover:text-purple-300 underline ml-1`,children:`Giphy`})]})]}),(0,$.jsxs)(`button`,{type:`submit`,disabled:!e||c||!i.content.trim()&&!i.imageUrl&&!i.videoUrl&&!i.gifUrl,className:`px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2`,children:[c?`Posting...`:`Post`,(0,$.jsx)(TC,{className:`w-4 h-4`})]})]})]})}),(0,$.jsx)(`div`,{className:`space-y-4`,children:o?(0,$.jsx)(`div`,{className:`flex items-center justify-center py-12`,children:(0,$.jsxs)(`div`,{className:`text-center`,children:[(0,$.jsx)(`div`,{className:`inline-block w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`p`,{className:`text-slate-400 mt-4`,children:`Loading posts...`})]})}):n.length===0?(0,$.jsxs)(`div`,{className:`text-center py-12 bg-slate-800/50 rounded-xl border-2 border-slate-700/50`,children:[(0,$.jsx)(LC,{className:`w-16 h-16 text-slate-600 mx-auto mb-4`}),(0,$.jsx)(`p`,{className:`text-slate-400 text-lg`,children:`No posts yet`}),(0,$.jsx)(`p`,{className:`text-slate-500 text-sm mt-2`,children:`Be the first to share something!`})]}):n.map(t=>{let n=he(t.reactions),r=t.reactions?.[e]||[],i=t.videoUrl?ye(t.videoUrl):null;return(0,$.jsxs)(`div`,{className:`bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border-2 border-slate-700/50`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold`,children:t.userName.charAt(0).toUpperCase()}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-white font-semibold`,children:t.userName}),(0,$.jsx)(`p`,{className:`text-slate-400 text-xs`,children:me(t.timestamp)})]})]}),t.userName===e&&(0,$.jsx)(`button`,{onClick:()=>pe(t.id,t.userName),className:`p-2 hover:bg-red-600/20 rounded-lg transition-colors text-red-400`,title:`Delete post`,children:(0,$.jsx)(NC,{className:`w-4 h-4`})})]}),t.content&&(0,$.jsx)(`p`,{className:`text-white mb-3 whitespace-pre-wrap wrap-break-word`,children:se(t.content)}),t.imageUrl&&(0,$.jsx)(`img`,{src:t.imageUrl,alt:`Post`,className:`w-full rounded-lg mb-3 max-h-96 object-cover border border-slate-700`,onError:e=>{e.target.style.display=`none`}}),i&&(0,$.jsx)(`div`,{className:`relative pb-[56.25%] mb-3 rounded-lg overflow-hidden border border-slate-700`,children:(0,$.jsx)(`iframe`,{className:`absolute top-0 left-0 w-full h-full`,src:`https://www.youtube.com/embed/${i}`,title:`YouTube video`,allow:`accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture`,allowFullScreen:!0})}),t.gifUrl&&(0,$.jsx)(`div`,{className:`mb-3 rounded-lg overflow-hidden border border-slate-700 bg-slate-900/50`,children:(0,$.jsx)(`img`,{src:t.gifUrl,alt:`GIF`,className:`w-full max-h-96 object-contain`,onError:e=>{e.target.style.display=`none`,e.target.parentElement.innerHTML=`<div class="p-4 text-center text-red-400 text-sm">Failed to load GIF</div>`}})}),n&&(0,$.jsx)(`div`,{className:`flex items-center gap-1.5 mb-3 pb-3 border-b border-slate-700/50 flex-wrap`,children:Object.entries(n).map(([n,r])=>{let i=ZE.find(e=>e.id===n);if(!i)return null;let a=ge(t.reactions,n),o=`${t.id}-${n}`;return(0,$.jsxs)(`div`,{className:`relative inline-flex items-center gap-1 px-2 py-1 bg-slate-800/50 rounded-full border border-slate-700/50 hover:border-slate-600 transition-colors cursor-pointer select-none`,onMouseEnter:()=>g(o),onMouseLeave:()=>g(null),onTouchStart:()=>_e(o),onTouchEnd:ve,children:[(0,$.jsx)(`span`,{className:`text-base`,children:i.emoji}),(0,$.jsx)(`span`,{className:`text-slate-300 text-xs font-semibold`,children:r}),h===o&&(0,$.jsxs)(`div`,{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-slate-900 border-2 border-slate-700 rounded-lg shadow-xl z-30 whitespace-nowrap pointer-events-none`,children:[(0,$.jsx)(`div`,{className:`text-xs font-semibold text-slate-400 mb-1`,children:i.label}),(0,$.jsx)(`div`,{className:`space-y-1 max-h-32 overflow-y-auto`,children:a.map((t,n)=>(0,$.jsx)(`div`,{className:`text-sm text-white`,children:t===e?`You`:t},n))}),(0,$.jsx)(`div`,{className:`absolute top-full left-1/2 -translate-x-1/2 -mt-1 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-700`})]})]},n)})}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50`,children:[(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsxs)(`button`,{onClick:()=>f(d===t.id?null:t.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-slate-700/50 transition-colors text-slate-300`,children:[(0,$.jsx)(MC,{className:`w-5 h-5 ${r.length>0?`text-blue-500 fill-blue-500`:``}`}),(0,$.jsx)(`span`,{className:`text-sm`,children:`React`})]}),d===t.id&&(0,$.jsxs)(`div`,{className:`absolute bottom-full left-0 mb-2 bg-slate-900 rounded-lg border-2 border-slate-700 shadow-xl z-20 min-w-[280px] sm:max-w-none`,children:[(0,$.jsx)(`div`,{className:`grid grid-cols-4 sm:grid-cols-6 gap-2 p-3`,children:ZE.map(e=>(0,$.jsxs)(`button`,{onClick:()=>T(t.id,e.id),className:`group relative p-2 rounded-lg hover:bg-slate-800 transition-all transform hover:scale-110 active:scale-95 ${r.includes(e.id)?`bg-slate-800 ring-2 ring-cyan-400`:``}`,title:e.label,children:[(0,$.jsx)(`span`,{className:`text-xl sm:text-2xl`,children:e.emoji}),(0,$.jsx)(`span`,{className:`absolute -bottom-8 left-1/2 -translate-x-1/2 text-xs text-white bg-slate-800 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20`,children:e.label})]},e.id))}),(0,$.jsx)(`div`,{className:`border-t border-slate-700 p-2`,children:(0,$.jsx)(`button`,{onClick:()=>f(null),className:`w-full px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white text-sm rounded-lg transition-colors font-semibold`,children:`Done`})})]})]}),(0,$.jsxs)(`button`,{className:`flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-slate-700/50 transition-colors text-slate-300`,children:[(0,$.jsx)(mC,{className:`w-5 h-5`}),(0,$.jsx)(`span`,{className:`text-sm`,children:`Comment`}),t.comments?.length>0&&(0,$.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[`(`,t.comments.length,`)`]})]})]}),(0,$.jsxs)(`div`,{className:`space-y-3`,children:[t.comments?.map(n=>{let r=he(n.reactions),i=n.reactions?.[e]||[],a=`${t.id}-${n.id}`;return(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`div`,{className:`w-8 h-8 rounded-full bg-cyan-600 flex items-center justify-center text-white font-bold text-sm shrink-0`,children:n.userName.charAt(0).toUpperCase()}),(0,$.jsxs)(`div`,{className:`flex-1 bg-slate-900/50 rounded-lg p-3`,children:[(0,$.jsx)(`p`,{className:`text-cyan-400 font-semibold text-sm`,children:n.userName}),(0,$.jsx)(`p`,{className:`text-white text-sm mt-1`,children:se(n.text)}),r&&(0,$.jsx)(`div`,{className:`flex items-center gap-1 mt-2 flex-wrap`,children:Object.entries(r).map(([r,i])=>{let a=ZE.find(e=>e.id===r);if(!a)return null;let o=ge(n.reactions,r),s=`${t.id}-${n.id}-${r}`;return(0,$.jsxs)(`div`,{className:`relative inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-slate-800/50 rounded-full border border-slate-700/50 hover:border-slate-600 transition-colors cursor-pointer select-none`,onMouseEnter:()=>g(s),onMouseLeave:()=>g(null),onTouchStart:()=>_e(s),onTouchEnd:ve,children:[(0,$.jsx)(`span`,{className:`text-xs`,children:a.emoji}),(0,$.jsx)(`span`,{className:`text-slate-300 text-xs font-semibold`,children:i}),h===s&&(0,$.jsxs)(`div`,{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1.5 bg-slate-900 border-2 border-slate-700 rounded-lg shadow-xl z-30 whitespace-nowrap pointer-events-none`,children:[(0,$.jsx)(`div`,{className:`text-xs font-semibold text-slate-400 mb-1`,children:a.label}),(0,$.jsx)(`div`,{className:`space-y-0.5 max-h-24 overflow-y-auto`,children:o.map((t,n)=>(0,$.jsx)(`div`,{className:`text-xs text-white`,children:t===e?`You`:t},n))}),(0,$.jsx)(`div`,{className:`absolute top-full left-1/2 -translate-x-1/2 -mt-1 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-700`})]})]},r)})}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3 mt-2`,children:[(0,$.jsx)(`p`,{className:`text-slate-500 text-xs`,children:me(n.timestamp)}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsxs)(`button`,{onClick:()=>m(p===a?null:a),className:`flex items-center gap-1 text-slate-400 hover:text-cyan-400 transition-colors text-xs font-semibold`,children:[(0,$.jsx)(MC,{className:`w-3 h-3 ${i.length>0?`text-cyan-400 fill-cyan-400`:``}`}),(0,$.jsx)(`span`,{children:`React`})]}),p===a&&(0,$.jsxs)(`div`,{className:`absolute bottom-full left-0 mb-2 bg-slate-900 rounded-lg border-2 border-slate-700 shadow-xl z-20 min-w-60 sm:max-w-none`,children:[(0,$.jsx)(`div`,{className:`grid grid-cols-4 sm:grid-cols-6 gap-1 p-2`,children:ZE.map(e=>(0,$.jsx)(`button`,{onClick:()=>fe(t.id,n.id,e.id),className:`group relative p-1 rounded-lg hover:bg-slate-800 transition-all transform hover:scale-110 active:scale-95 ${i.includes(e.id)?`bg-slate-800 ring-2 ring-cyan-400`:``}`,title:e.label,children:(0,$.jsx)(`span`,{className:`text-lg`,children:e.emoji})},e.id))}),(0,$.jsx)(`div`,{className:`border-t border-slate-700 p-1.5`,children:(0,$.jsx)(`button`,{onClick:()=>m(null),className:`w-full px-2 py-1 bg-slate-800 hover:bg-slate-700 text-white text-xs rounded-lg transition-colors font-semibold`,children:`Done`})})]})]}),(0,$.jsxs)(`button`,{onClick:()=>de(t.id,n.userName),className:`flex items-center gap-1 text-slate-400 hover:text-cyan-400 transition-colors text-xs font-semibold`,children:[(0,$.jsx)(SC,{className:`w-3 h-3`}),(0,$.jsx)(`span`,{children:`Reply`})]})]})]})]},n.id)}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,"data-post-id":t.id,value:y[t.id]||``,onChange:e=>b({...y,[t.id]:e.target.value}),placeholder:e?`Write a comment... (Use @ to mention)`:`Enter your name to comment`,disabled:!e,onKeyDown:e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),E(t.id))},className:`flex-1 px-4 py-2 bg-slate-900/50 text-white rounded-lg border border-slate-700 focus:border-purple-500 focus:outline-none disabled:opacity-50 text-sm`,maxLength:500}),(0,$.jsx)(`button`,{onClick:()=>E(t.id),disabled:!e||!y[t.id]?.trim(),className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:(0,$.jsx)(TC,{className:`w-4 h-4`})})]})]})]},t.id)})}),(0,$.jsx)(`div`,{ref:ie})]})}function eD(){let[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=VE();r(e);let n=localStorage.getItem(`notification_prompt_dismissed`);if(!e&&!n){let e=setTimeout(()=>{t(!0)},5e3);return()=>clearTimeout(e)}},[]);let o=async()=>{a(!0);let e=await BE();a(!1),e?(r(!0),t(!1),alert(` Notifications enabled! You'll now receive updates for new posts and messages.`)):alert(` Unable to enable notifications. Please check your browser settings.`)},s=()=>{t(!1),localStorage.setItem(`notification_prompt_dismissed`,`true`)};return!e&&n?(0,$.jsx)(`div`,{className:`fixed bottom-4 right-4 z-40`,children:(0,$.jsx)(`button`,{onClick:async()=>{n?alert(`To disable notifications:

1. Click the lock icon in your browser's address bar
2. Find "Notifications" setting
3. Change it to "Block"`):await o()},className:`p-3 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-lg transition-colors`,title:`Notifications enabled`,children:(0,$.jsx)(GS,{className:`w-5 h-5`})})}):e?(0,$.jsx)(`div`,{className:`fixed bottom-4 right-4 z-50 max-w-sm`,children:(0,$.jsxs)(`div`,{className:`bg-gradient-to-br from-purple-600 to-blue-600 rounded-xl shadow-2xl border-2 border-purple-400/50 overflow-hidden`,children:[(0,$.jsx)(`button`,{onClick:s,className:`absolute top-2 right-2 p-1 hover:bg-white/20 rounded-lg transition-colors`,children:(0,$.jsx)(HC,{className:`w-4 h-4 text-white`})}),(0,$.jsxs)(`div`,{className:`p-6`,children:[(0,$.jsx)(`div`,{className:`flex justify-center mb-4`,children:(0,$.jsx)(`div`,{className:`p-4 bg-white/20 rounded-full`,children:(0,$.jsx)(GS,{className:`w-8 h-8 text-white animate-pulse`})})}),(0,$.jsx)(`h3`,{className:`text-xl font-bold text-white text-center mb-2`,children:`Stay Updated!`}),(0,$.jsx)(`p`,{className:`text-white/90 text-sm text-center mb-4`,children:`Enable notifications to get instant updates when:`}),(0,$.jsxs)(`ul`,{className:`text-white/80 text-xs space-y-2 mb-6`,children:[(0,$.jsxs)(`li`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`w-1.5 h-1.5 bg-white rounded-full`}),(0,$.jsx)(`span`,{children:`Someone posts in the feed`})]}),(0,$.jsxs)(`li`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`w-1.5 h-1.5 bg-white rounded-full`}),(0,$.jsx)(`span`,{children:`You get a new chat message`})]}),(0,$.jsxs)(`li`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`w-1.5 h-1.5 bg-white rounded-full`}),(0,$.jsx)(`span`,{children:`Someone mentions you`})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,$.jsx)(`button`,{onClick:o,disabled:i,className:`w-full py-3 bg-white hover:bg-gray-100 text-purple-600 font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`w-4 h-4 border-2 border-purple-600 border-t-transparent rounded-full animate-spin`}),(0,$.jsx)(`span`,{children:`Enabling...`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(GS,{className:`w-4 h-4`}),(0,$.jsx)(`span`,{children:`Enable Notifications`})]})}),(0,$.jsx)(`button`,{onClick:s,className:`w-full py-2 text-white/80 hover:text-white text-sm font-semibold transition-colors`,children:`Maybe Later`})]})]}),(0,$.jsx)(`div`,{className:`h-1 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400`})]})}):null}var tD=`@vercel/analytics`,nD=`1.6.1`,rD=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function iD(){return typeof window<`u`}function aD(){try{let e=`production`;if(e===`development`||e===`test`)return`development`}catch{}return`production`}function oD(e=`auto`){if(e===`auto`){window.vam=aD();return}window.vam=e}function sD(){return(iD()?window.vam:aD())||`production`}function cD(){return sD()===`development`}function lD(e){return e.scriptSrc?e.scriptSrc:cD()?`https://va.vercel-scripts.com/v1/script.debug.js`:e.basePath?`${e.basePath}/insights/script.js`:`/_vercel/insights/script.js`}function uD(e={debug:!0}){var t;if(!iD())return;oD(e.mode),rD(),e.beforeSend&&((t=window.va)==null||t.call(window,`beforeSend`,e.beforeSend));let n=lD(e);if(document.head.querySelector(`script[src*="${n}"]`))return;let r=document.createElement(`script`);r.src=n,r.defer=!0,r.dataset.sdkn=tD+(e.framework?`/${e.framework}`:``),r.dataset.sdkv=nD,e.disableAutoTrack&&(r.dataset.disableAutoTrack=`1`),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{let e=cD()?`Please check if any ad blockers are enabled and try again.`:`Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.`;console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${e}`)},cD()&&e.debug===!1&&(r.dataset.debug=`false`),document.head.appendChild(r)}function dD({route:e,path:t}){var n;(n=window.va)==null||n.call(window,`pageview`,{route:e,path:t})}function fD(){if(!(typeof process>`u`))return{}.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function pD(e){return(0,l.useEffect)(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,`beforeSend`,e.beforeSend))},[e.beforeSend]),(0,l.useEffect)(()=>{uD({framework:e.framework||`react`,basePath:e.basePath??fD(),...e.route!==void 0&&{disableAutoTrack:!0},...e})},[]),(0,l.useEffect)(()=>{e.route&&e.path&&dD({route:e.route,path:e.path})},[e.route,e.path]),null}function mD(){let[e,t]=(0,l.useState)(`feed`),[n,r]=(0,l.useState)(localStorage.getItem(`userName`)||``),[i,a]=(0,l.useState)(!localStorage.getItem(`userName`)),[o,s]=(0,l.useState)({availability:{},preferences:{},playerStats:{}});(0,l.useEffect)(()=>{let e=bp(PS,`app-data`,`schedule`),t=Nm(e,t=>{if(t.exists()){let e=t.data();s({availability:e.availability||{},preferences:e.preferences||{},playerStats:e.playerStats||{}})}else{let t={availability:{},preferences:{},playerStats:{}};km(e,t),s(t)}},e=>{console.error(`Error loading schedule:`,e)});return()=>t()},[]);let c=async e=>{let t=bp(PS,`app-data`,`schedule`);try{await Am(t,e)}catch(n){console.error(`Error updating schedule:`,n),n.code===`not-found`&&await km(t,{availability:o.availability||{},preferences:o.preferences||{},playerStats:o.playerStats||{},...e})}},u=e=>{e.trim()&&(r(e.trim()),localStorage.setItem(`userName`,e.trim()),a(!1))};return(0,$.jsxs)(`div`,{className:`min-h-screen relative`,children:[(0,$.jsx)(pD,{}),(0,$.jsx)(`div`,{className:`fixed inset-0 z-0`,style:{backgroundImage:`url(/dota.png)`,backgroundSize:`cover`,backgroundPosition:`center top`,backgroundAttachment:`fixed`},children:(0,$.jsx)(`div`,{className:`absolute inset-0 bg-linear-to-br from-slate-950/25 via-slate-900/35 to-slate-950/30`})}),i&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm`,children:(0,$.jsxs)(`div`,{className:`bg-slate-800 rounded-2xl p-6 sm:p-8 max-w-md w-full border-2 border-slate-700 shadow-2xl`,children:[(0,$.jsx)(`h2`,{className:`text-2xl sm:text-3xl font-bold text-white mb-2`,children:`Welcome!`}),(0,$.jsx)(`p`,{className:`text-slate-300 mb-6`,children:`Write your name noob`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Your name (e.g., ProPlayer123)`,className:`w-full p-3 sm:p-4 bg-slate-900 text-white rounded-lg border-2 border-slate-600 focus:border-green-500 focus:outline-none mb-4 text-base sm:text-lg`,onKeyDown:e=>{e.key===`Enter`&&u(e.target.value)},autoFocus:!0}),(0,$.jsx)(`button`,{onClick:e=>{let t=e.target.previousElementSibling;u(t.value)},className:`w-full py-3 sm:py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-colors duration-200 text-base sm:text-lg`,children:`Continue`})]})}),(0,$.jsx)(YC,{currentPage:e,setCurrentPage:t,userName:n,scheduleData:o,updateSchedule:c,onLogout:()=>{localStorage.removeItem(`userName`),r(``),a(!0),t(`home`)}}),(0,$.jsxs)(`div`,{className:`max-w-7xl mx-auto relative z-10 px-4 sm:px-6 lg:px-8 py-6`,children:[e===`chat`&&(0,$.jsx)(WE,{userName:n,setShowNameModal:a}),e===`home`&&(0,$.jsx)(ZC,{userName:n,setShowNameModal:a}),e===`schedule`&&(0,$.jsx)(qE,{scheduleData:o,updateSchedule:c,userName:n,setShowNameModal:a}),e===`draft`&&(0,$.jsx)(GE,{}),e===`players`&&(0,$.jsx)(YE,{userName:n}),e===`statistics`&&(0,$.jsx)(XE,{}),e===`feed`&&(0,$.jsx)($E,{userName:n,setShowNameModal:a}),e===`guide`&&(0,$.jsx)(JE,{})]}),(0,$.jsx)(eD,{})]})}(0,c.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(l.StrictMode,{children:(0,$.jsx)(mD,{})}));